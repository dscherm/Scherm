(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function ow(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jm={exports:{}},za={},bm={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zi=Symbol.for("react.element"),aw=Symbol.for("react.portal"),lw=Symbol.for("react.fragment"),uw=Symbol.for("react.strict_mode"),cw=Symbol.for("react.profiler"),hw=Symbol.for("react.provider"),dw=Symbol.for("react.context"),fw=Symbol.for("react.forward_ref"),pw=Symbol.for("react.suspense"),mw=Symbol.for("react.memo"),gw=Symbol.for("react.lazy"),Tf=Symbol.iterator;function yw(t){return t===null||typeof t!="object"?null:(t=Tf&&t[Tf]||t["@@iterator"],typeof t=="function"?t:null)}var Lm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Om=Object.assign,Mm={};function ms(t,e,n){this.props=t,this.context=e,this.refs=Mm,this.updater=n||Lm}ms.prototype.isReactComponent={};ms.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ms.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Fm(){}Fm.prototype=ms.prototype;function qc(t,e,n){this.props=t,this.context=e,this.refs=Mm,this.updater=n||Lm}var Gc=qc.prototype=new Fm;Gc.constructor=qc;Om(Gc,ms.prototype);Gc.isPureReactComponent=!0;var Ef=Array.isArray,Um=Object.prototype.hasOwnProperty,Wc={current:null},Bm={key:!0,ref:!0,__self:!0,__source:!0};function zm(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Um.call(e,r)&&!Bm.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:zi,type:t,key:i,ref:a,props:s,_owner:Wc.current}}function vw(t,e){return{$$typeof:zi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qc(t){return typeof t=="object"&&t!==null&&t.$$typeof===zi}function _w(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Sf=/\/+/g;function ql(t,e){return typeof t=="object"&&t!==null&&t.key!=null?_w(""+t.key):e.toString(36)}function zo(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case zi:case aw:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+ql(a,0):r,Ef(s)?(n="",t!=null&&(n=t.replace(Sf,"$&/")+"/"),zo(s,e,n,"",function(d){return d})):s!=null&&(Qc(s)&&(s=vw(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Sf,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Ef(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+ql(i,l);a+=zo(i,e,n,u,s)}else if(u=yw(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+ql(i,l++),a+=zo(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function To(t,e,n){if(t==null)return t;var r=[],s=0;return zo(t,r,"","",function(i){return e.call(n,i,s++)}),r}function ww(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ht={current:null},Ho={transition:null},Tw={ReactCurrentDispatcher:ht,ReactCurrentBatchConfig:Ho,ReactCurrentOwner:Wc};function Hm(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:To,forEach:function(t,e,n){To(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return To(t,function(){e++}),e},toArray:function(t){return To(t,function(e){return e})||[]},only:function(t){if(!Qc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=ms;te.Fragment=lw;te.Profiler=cw;te.PureComponent=qc;te.StrictMode=uw;te.Suspense=pw;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tw;te.act=Hm;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Om({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Wc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Um.call(e,u)&&!Bm.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:zi,type:t.type,key:s,ref:i,props:r,_owner:a}};te.createContext=function(t){return t={$$typeof:dw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:hw,_context:t},t.Consumer=t};te.createElement=zm;te.createFactory=function(t){var e=zm.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:fw,render:t}};te.isValidElement=Qc;te.lazy=function(t){return{$$typeof:gw,_payload:{_status:-1,_result:t},_init:ww}};te.memo=function(t,e){return{$$typeof:mw,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Ho.transition;Ho.transition={};try{t()}finally{Ho.transition=e}};te.unstable_act=Hm;te.useCallback=function(t,e){return ht.current.useCallback(t,e)};te.useContext=function(t){return ht.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return ht.current.useDeferredValue(t)};te.useEffect=function(t,e){return ht.current.useEffect(t,e)};te.useId=function(){return ht.current.useId()};te.useImperativeHandle=function(t,e,n){return ht.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return ht.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return ht.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return ht.current.useMemo(t,e)};te.useReducer=function(t,e,n){return ht.current.useReducer(t,e,n)};te.useRef=function(t){return ht.current.useRef(t)};te.useState=function(t){return ht.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return ht.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return ht.current.useTransition()};te.version="18.3.1";bm.exports=te;var $=bm.exports;const Ew=ow($);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw=$,Iw=Symbol.for("react.element"),Pw=Symbol.for("react.fragment"),Aw=Object.prototype.hasOwnProperty,kw=Sw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Cw={key:!0,ref:!0,__self:!0,__source:!0};function $m(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Aw.call(e,r)&&!Cw.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Iw,type:t,key:i,ref:a,props:s,_owner:kw.current}}za.Fragment=Pw;za.jsx=$m;za.jsxs=$m;jm.exports=za;var h=jm.exports,Pu={},qm={exports:{}},Pt={},Gm={exports:{}},Wm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,K){var ee=B.length;B.push(K);e:for(;0<ee;){var pe=ee-1>>>1,H=B[pe];if(0<s(H,K))B[pe]=K,B[ee]=H,ee=pe;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var K=B[0],ee=B.pop();if(ee!==K){B[0]=ee;e:for(var pe=0,H=B.length,Q=H>>>1;pe<Q;){var he=2*(pe+1)-1,Te=B[he],Le=he+1,Vt=B[Le];if(0>s(Te,ee))Le<H&&0>s(Vt,Te)?(B[pe]=Vt,B[Le]=ee,pe=Le):(B[pe]=Te,B[he]=ee,pe=he);else if(Le<H&&0>s(Vt,ee))B[pe]=Vt,B[Le]=ee,pe=Le;else break e}}return K}function s(B,K){var ee=B.sortIndex-K.sortIndex;return ee!==0?ee:B.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],d=[],p=1,v=null,y=3,T=!1,C=!1,R=!1,b=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(B){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=B)r(d),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(d)}}function j(B){if(R=!1,k(B),!C)if(n(u)!==null)C=!0,re(F);else{var K=n(d);K!==null&&ot(j,K.startTime-B)}}function F(B,K){C=!1,R&&(R=!1,S(g),g=-1),T=!0;var ee=y;try{for(k(K),v=n(u);v!==null&&(!(v.expirationTime>K)||B&&!A());){var pe=v.callback;if(typeof pe=="function"){v.callback=null,y=v.priorityLevel;var H=pe(v.expirationTime<=K);K=t.unstable_now(),typeof H=="function"?v.callback=H:v===n(u)&&r(u),k(K)}else r(u);v=n(u)}if(v!==null)var Q=!0;else{var he=n(d);he!==null&&ot(j,he.startTime-K),Q=!1}return Q}finally{v=null,y=ee,T=!1}}var D=!1,_=null,g=-1,w=5,I=-1;function A(){return!(t.unstable_now()-I<w)}function x(){if(_!==null){var B=t.unstable_now();I=B;var K=!0;try{K=_(!0,B)}finally{K?P():(D=!1,_=null)}}else D=!1}var P;if(typeof E=="function")P=function(){E(x)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,X=Ue.port2;Ue.port1.onmessage=x,P=function(){X.postMessage(null)}}else P=function(){b(x,0)};function re(B){_=B,D||(D=!0,P())}function ot(B,K){g=b(function(){B(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){C||T||(C=!0,re(F))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(y){case 1:case 2:case 3:var K=3;break;default:K=y}var ee=y;y=K;try{return B()}finally{y=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ee=y;y=B;try{return K()}finally{y=ee}},t.unstable_scheduleCallback=function(B,K,ee){var pe=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?pe+ee:pe):ee=pe,B){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=ee+H,B={id:p++,callback:K,priorityLevel:B,startTime:ee,expirationTime:H,sortIndex:-1},ee>pe?(B.sortIndex=ee,e(d,B),n(u)===null&&B===n(d)&&(R?(S(g),g=-1):R=!0,ot(j,ee-pe))):(B.sortIndex=H,e(u,B),C||T||(C=!0,re(F))),B},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(B){var K=y;return function(){var ee=y;y=K;try{return B.apply(this,arguments)}finally{y=ee}}}})(Wm);Gm.exports=Wm;var xw=Gm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nw=$,It=xw;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qm=new Set,gi={};function wr(t,e){es(t,e),es(t+"Capture",e)}function es(t,e){for(gi[t]=e,t=0;t<e.length;t++)Qm.add(e[t])}var hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Au=Object.prototype.hasOwnProperty,Rw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,If={},Pf={};function Dw(t){return Au.call(Pf,t)?!0:Au.call(If,t)?!1:Rw.test(t)?Pf[t]=!0:(If[t]=!0,!1)}function Vw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function jw(t,e,n,r){if(e===null||typeof e>"u"||Vw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function dt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){We[t]=new dt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];We[e]=new dt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){We[t]=new dt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){We[t]=new dt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){We[t]=new dt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){We[t]=new dt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){We[t]=new dt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){We[t]=new dt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){We[t]=new dt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Kc=/[\-:]([a-z])/g;function Yc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Kc,Yc);We[e]=new dt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Kc,Yc);We[e]=new dt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Kc,Yc);We[e]=new dt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){We[t]=new dt(t,1,!1,t.toLowerCase(),null,!1,!1)});We.xlinkHref=new dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){We[t]=new dt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xc(t,e,n,r){var s=We.hasOwnProperty(e)?We[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(jw(e,n,s,r)&&(n=null),r||s===null?Dw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var vn=Nw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Eo=Symbol.for("react.element"),Vr=Symbol.for("react.portal"),jr=Symbol.for("react.fragment"),Jc=Symbol.for("react.strict_mode"),ku=Symbol.for("react.profiler"),Km=Symbol.for("react.provider"),Ym=Symbol.for("react.context"),Zc=Symbol.for("react.forward_ref"),Cu=Symbol.for("react.suspense"),xu=Symbol.for("react.suspense_list"),eh=Symbol.for("react.memo"),Sn=Symbol.for("react.lazy"),Xm=Symbol.for("react.offscreen"),Af=Symbol.iterator;function Fs(t){return t===null||typeof t!="object"?null:(t=Af&&t[Af]||t["@@iterator"],typeof t=="function"?t:null)}var Ie=Object.assign,Gl;function Qs(t){if(Gl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gl=e&&e[1]||""}return`
`+Gl+t}var Wl=!1;function Ql(t,e){if(!t||Wl)return"";Wl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{Wl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qs(t):""}function bw(t){switch(t.tag){case 5:return Qs(t.type);case 16:return Qs("Lazy");case 13:return Qs("Suspense");case 19:return Qs("SuspenseList");case 0:case 2:case 15:return t=Ql(t.type,!1),t;case 11:return t=Ql(t.type.render,!1),t;case 1:return t=Ql(t.type,!0),t;default:return""}}function Nu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case jr:return"Fragment";case Vr:return"Portal";case ku:return"Profiler";case Jc:return"StrictMode";case Cu:return"Suspense";case xu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ym:return(t.displayName||"Context")+".Consumer";case Km:return(t._context.displayName||"Context")+".Provider";case Zc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case eh:return e=t.displayName||null,e!==null?e:Nu(t.type)||"Memo";case Sn:e=t._payload,t=t._init;try{return Nu(t(e))}catch{}}return null}function Lw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nu(e);case 8:return e===Jc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Jm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ow(t){var e=Jm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function So(t){t._valueTracker||(t._valueTracker=Ow(t))}function Zm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Jm(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ia(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ru(t,e){var n=e.checked;return Ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function kf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=zn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function eg(t,e){e=e.checked,e!=null&&Xc(t,"checked",e,!1)}function Du(t,e){eg(t,e);var n=zn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vu(t,e.type,zn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Cf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vu(t,e,n){(e!=="number"||ia(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ks=Array.isArray;function Gr(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+zn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ju(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return Ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(Ks(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:zn(n)}}function tg(t,e){var n=zn(e.value),r=zn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Nf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ng(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ng(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Io,rg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Io=Io||document.createElement("div"),Io.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Io.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ri={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mw=["Webkit","ms","Moz","O"];Object.keys(ri).forEach(function(t){Mw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ri[e]=ri[t]})});function sg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ri.hasOwnProperty(t)&&ri[t]?(""+e).trim():e+"px"}function ig(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=sg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Fw=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lu(t,e){if(e){if(Fw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function Ou(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mu=null;function th(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fu=null,Wr=null,Qr=null;function Rf(t){if(t=qi(t)){if(typeof Fu!="function")throw Error(M(280));var e=t.stateNode;e&&(e=Wa(e),Fu(t.stateNode,t.type,e))}}function og(t){Wr?Qr?Qr.push(t):Qr=[t]:Wr=t}function ag(){if(Wr){var t=Wr,e=Qr;if(Qr=Wr=null,Rf(t),e)for(t=0;t<e.length;t++)Rf(e[t])}}function lg(t,e){return t(e)}function ug(){}var Kl=!1;function cg(t,e,n){if(Kl)return t(e,n);Kl=!0;try{return lg(t,e,n)}finally{Kl=!1,(Wr!==null||Qr!==null)&&(ug(),ag())}}function vi(t,e){var n=t.stateNode;if(n===null)return null;var r=Wa(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var Uu=!1;if(hn)try{var Us={};Object.defineProperty(Us,"passive",{get:function(){Uu=!0}}),window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch{Uu=!1}function Uw(t,e,n,r,s,i,a,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var si=!1,oa=null,aa=!1,Bu=null,Bw={onError:function(t){si=!0,oa=t}};function zw(t,e,n,r,s,i,a,l,u){si=!1,oa=null,Uw.apply(Bw,arguments)}function Hw(t,e,n,r,s,i,a,l,u){if(zw.apply(this,arguments),si){if(si){var d=oa;si=!1,oa=null}else throw Error(M(198));aa||(aa=!0,Bu=d)}}function Tr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Df(t){if(Tr(t)!==t)throw Error(M(188))}function $w(t){var e=t.alternate;if(!e){if(e=Tr(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Df(s),t;if(i===r)return Df(s),e;i=i.sibling}throw Error(M(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function dg(t){return t=$w(t),t!==null?fg(t):null}function fg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=fg(t);if(e!==null)return e;t=t.sibling}return null}var pg=It.unstable_scheduleCallback,Vf=It.unstable_cancelCallback,qw=It.unstable_shouldYield,Gw=It.unstable_requestPaint,xe=It.unstable_now,Ww=It.unstable_getCurrentPriorityLevel,nh=It.unstable_ImmediatePriority,mg=It.unstable_UserBlockingPriority,la=It.unstable_NormalPriority,Qw=It.unstable_LowPriority,gg=It.unstable_IdlePriority,Ha=null,Kt=null;function Kw(t){if(Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Ha,t,void 0,(t.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:Jw,Yw=Math.log,Xw=Math.LN2;function Jw(t){return t>>>=0,t===0?32:31-(Yw(t)/Xw|0)|0}var Po=64,Ao=4194304;function Ys(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ua(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Ys(l):(i&=a,i!==0&&(r=Ys(i)))}else a=n&~s,a!==0?r=Ys(a):i!==0&&(r=Ys(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Bt(e),s=1<<n,r|=t[n],e&=~s;return r}function Zw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function e0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Bt(i),l=1<<a,u=s[a];u===-1?(!(l&n)||l&r)&&(s[a]=Zw(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function zu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yg(){var t=Po;return Po<<=1,!(Po&4194240)&&(Po=64),t}function Yl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Hi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bt(e),t[e]=n}function t0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Bt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function rh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Bt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ue=0;function vg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _g,sh,wg,Tg,Eg,Hu=!1,ko=[],Nn=null,Rn=null,Dn=null,_i=new Map,wi=new Map,Pn=[],n0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jf(t,e){switch(t){case"focusin":case"focusout":Nn=null;break;case"dragenter":case"dragleave":Rn=null;break;case"mouseover":case"mouseout":Dn=null;break;case"pointerover":case"pointerout":_i.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wi.delete(e.pointerId)}}function Bs(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=qi(e),e!==null&&sh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function r0(t,e,n,r,s){switch(e){case"focusin":return Nn=Bs(Nn,t,e,n,r,s),!0;case"dragenter":return Rn=Bs(Rn,t,e,n,r,s),!0;case"mouseover":return Dn=Bs(Dn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return _i.set(i,Bs(_i.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,wi.set(i,Bs(wi.get(i)||null,t,e,n,r,s)),!0}return!1}function Sg(t){var e=sr(t.target);if(e!==null){var n=Tr(e);if(n!==null){if(e=n.tag,e===13){if(e=hg(n),e!==null){t.blockedOn=e,Eg(t.priority,function(){wg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $o(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$u(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Mu=r,n.target.dispatchEvent(r),Mu=null}else return e=qi(n),e!==null&&sh(e),t.blockedOn=n,!1;e.shift()}return!0}function bf(t,e,n){$o(t)&&n.delete(e)}function s0(){Hu=!1,Nn!==null&&$o(Nn)&&(Nn=null),Rn!==null&&$o(Rn)&&(Rn=null),Dn!==null&&$o(Dn)&&(Dn=null),_i.forEach(bf),wi.forEach(bf)}function zs(t,e){t.blockedOn===e&&(t.blockedOn=null,Hu||(Hu=!0,It.unstable_scheduleCallback(It.unstable_NormalPriority,s0)))}function Ti(t){function e(s){return zs(s,t)}if(0<ko.length){zs(ko[0],t);for(var n=1;n<ko.length;n++){var r=ko[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Nn!==null&&zs(Nn,t),Rn!==null&&zs(Rn,t),Dn!==null&&zs(Dn,t),_i.forEach(e),wi.forEach(e),n=0;n<Pn.length;n++)r=Pn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Pn.length&&(n=Pn[0],n.blockedOn===null);)Sg(n),n.blockedOn===null&&Pn.shift()}var Kr=vn.ReactCurrentBatchConfig,ca=!0;function i0(t,e,n,r){var s=ue,i=Kr.transition;Kr.transition=null;try{ue=1,ih(t,e,n,r)}finally{ue=s,Kr.transition=i}}function o0(t,e,n,r){var s=ue,i=Kr.transition;Kr.transition=null;try{ue=4,ih(t,e,n,r)}finally{ue=s,Kr.transition=i}}function ih(t,e,n,r){if(ca){var s=$u(t,e,n,r);if(s===null)ou(t,e,r,ha,n),jf(t,r);else if(r0(s,t,e,n,r))r.stopPropagation();else if(jf(t,r),e&4&&-1<n0.indexOf(t)){for(;s!==null;){var i=qi(s);if(i!==null&&_g(i),i=$u(t,e,n,r),i===null&&ou(t,e,r,ha,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ou(t,e,r,null,n)}}var ha=null;function $u(t,e,n,r){if(ha=null,t=th(r),t=sr(t),t!==null)if(e=Tr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=hg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ha=t,null}function Ig(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ww()){case nh:return 1;case mg:return 4;case la:case Qw:return 16;case gg:return 536870912;default:return 16}default:return 16}}var kn=null,oh=null,qo=null;function Pg(){if(qo)return qo;var t,e=oh,n=e.length,r,s="value"in kn?kn.value:kn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return qo=s.slice(t,1<r?1-r:void 0)}function Go(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Co(){return!0}function Lf(){return!1}function At(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Co:Lf,this.isPropagationStopped=Lf,this}return Ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Co)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Co)},persist:function(){},isPersistent:Co}),e}var gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ah=At(gs),$i=Ie({},gs,{view:0,detail:0}),a0=At($i),Xl,Jl,Hs,$a=Ie({},$i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hs&&(Hs&&t.type==="mousemove"?(Xl=t.screenX-Hs.screenX,Jl=t.screenY-Hs.screenY):Jl=Xl=0,Hs=t),Xl)},movementY:function(t){return"movementY"in t?t.movementY:Jl}}),Of=At($a),l0=Ie({},$a,{dataTransfer:0}),u0=At(l0),c0=Ie({},$i,{relatedTarget:0}),Zl=At(c0),h0=Ie({},gs,{animationName:0,elapsedTime:0,pseudoElement:0}),d0=At(h0),f0=Ie({},gs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),p0=At(f0),m0=Ie({},gs,{data:0}),Mf=At(m0),g0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},y0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},v0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=v0[t])?!!e[t]:!1}function lh(){return _0}var w0=Ie({},$i,{key:function(t){if(t.key){var e=g0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Go(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?y0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lh,charCode:function(t){return t.type==="keypress"?Go(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Go(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),T0=At(w0),E0=Ie({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ff=At(E0),S0=Ie({},$i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lh}),I0=At(S0),P0=Ie({},gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),A0=At(P0),k0=Ie({},$a,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),C0=At(k0),x0=[9,13,27,32],uh=hn&&"CompositionEvent"in window,ii=null;hn&&"documentMode"in document&&(ii=document.documentMode);var N0=hn&&"TextEvent"in window&&!ii,Ag=hn&&(!uh||ii&&8<ii&&11>=ii),Uf=" ",Bf=!1;function kg(t,e){switch(t){case"keyup":return x0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var br=!1;function R0(t,e){switch(t){case"compositionend":return Cg(e);case"keypress":return e.which!==32?null:(Bf=!0,Uf);case"textInput":return t=e.data,t===Uf&&Bf?null:t;default:return null}}function D0(t,e){if(br)return t==="compositionend"||!uh&&kg(t,e)?(t=Pg(),qo=oh=kn=null,br=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ag&&e.locale!=="ko"?null:e.data;default:return null}}var V0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!V0[t.type]:e==="textarea"}function xg(t,e,n,r){og(r),e=da(e,"onChange"),0<e.length&&(n=new ah("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var oi=null,Ei=null;function j0(t){Ug(t,0)}function qa(t){var e=Mr(t);if(Zm(e))return t}function b0(t,e){if(t==="change")return e}var Ng=!1;if(hn){var eu;if(hn){var tu="oninput"in document;if(!tu){var Hf=document.createElement("div");Hf.setAttribute("oninput","return;"),tu=typeof Hf.oninput=="function"}eu=tu}else eu=!1;Ng=eu&&(!document.documentMode||9<document.documentMode)}function $f(){oi&&(oi.detachEvent("onpropertychange",Rg),Ei=oi=null)}function Rg(t){if(t.propertyName==="value"&&qa(Ei)){var e=[];xg(e,Ei,t,th(t)),cg(j0,e)}}function L0(t,e,n){t==="focusin"?($f(),oi=e,Ei=n,oi.attachEvent("onpropertychange",Rg)):t==="focusout"&&$f()}function O0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qa(Ei)}function M0(t,e){if(t==="click")return qa(e)}function F0(t,e){if(t==="input"||t==="change")return qa(e)}function U0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ht=typeof Object.is=="function"?Object.is:U0;function Si(t,e){if(Ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Au.call(e,s)||!Ht(t[s],e[s]))return!1}return!0}function qf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gf(t,e){var n=qf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qf(n)}}function Dg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Dg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Vg(){for(var t=window,e=ia();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ia(t.document)}return e}function ch(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function B0(t){var e=Vg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Dg(n.ownerDocument.documentElement,n)){if(r!==null&&ch(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Gf(n,i);var a=Gf(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var z0=hn&&"documentMode"in document&&11>=document.documentMode,Lr=null,qu=null,ai=null,Gu=!1;function Wf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gu||Lr==null||Lr!==ia(r)||(r=Lr,"selectionStart"in r&&ch(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ai&&Si(ai,r)||(ai=r,r=da(qu,"onSelect"),0<r.length&&(e=new ah("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Lr)))}function xo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Or={animationend:xo("Animation","AnimationEnd"),animationiteration:xo("Animation","AnimationIteration"),animationstart:xo("Animation","AnimationStart"),transitionend:xo("Transition","TransitionEnd")},nu={},jg={};hn&&(jg=document.createElement("div").style,"AnimationEvent"in window||(delete Or.animationend.animation,delete Or.animationiteration.animation,delete Or.animationstart.animation),"TransitionEvent"in window||delete Or.transitionend.transition);function Ga(t){if(nu[t])return nu[t];if(!Or[t])return t;var e=Or[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in jg)return nu[t]=e[n];return t}var bg=Ga("animationend"),Lg=Ga("animationiteration"),Og=Ga("animationstart"),Mg=Ga("transitionend"),Fg=new Map,Qf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wn(t,e){Fg.set(t,e),wr(e,[t])}for(var ru=0;ru<Qf.length;ru++){var su=Qf[ru],H0=su.toLowerCase(),$0=su[0].toUpperCase()+su.slice(1);Wn(H0,"on"+$0)}Wn(bg,"onAnimationEnd");Wn(Lg,"onAnimationIteration");Wn(Og,"onAnimationStart");Wn("dblclick","onDoubleClick");Wn("focusin","onFocus");Wn("focusout","onBlur");Wn(Mg,"onTransitionEnd");es("onMouseEnter",["mouseout","mouseover"]);es("onMouseLeave",["mouseout","mouseover"]);es("onPointerEnter",["pointerout","pointerover"]);es("onPointerLeave",["pointerout","pointerover"]);wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),q0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xs));function Kf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Hw(r,e,void 0,t),t.currentTarget=null}function Ug(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Kf(s,l,d),i=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Kf(s,l,d),i=u}}}if(aa)throw t=Bu,aa=!1,Bu=null,t}function ye(t,e){var n=e[Xu];n===void 0&&(n=e[Xu]=new Set);var r=t+"__bubble";n.has(r)||(Bg(e,t,2,!1),n.add(r))}function iu(t,e,n){var r=0;e&&(r|=4),Bg(n,t,r,e)}var No="_reactListening"+Math.random().toString(36).slice(2);function Ii(t){if(!t[No]){t[No]=!0,Qm.forEach(function(n){n!=="selectionchange"&&(q0.has(n)||iu(n,!1,t),iu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[No]||(e[No]=!0,iu("selectionchange",!1,e))}}function Bg(t,e,n,r){switch(Ig(e)){case 1:var s=i0;break;case 4:s=o0;break;default:s=ih}n=s.bind(null,e,n,t),s=void 0,!Uu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ou(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=sr(l),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}l=l.parentNode}}r=r.return}cg(function(){var d=i,p=th(n),v=[];e:{var y=Fg.get(t);if(y!==void 0){var T=ah,C=t;switch(t){case"keypress":if(Go(n)===0)break e;case"keydown":case"keyup":T=T0;break;case"focusin":C="focus",T=Zl;break;case"focusout":C="blur",T=Zl;break;case"beforeblur":case"afterblur":T=Zl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Of;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=u0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=I0;break;case bg:case Lg:case Og:T=d0;break;case Mg:T=A0;break;case"scroll":T=a0;break;case"wheel":T=C0;break;case"copy":case"cut":case"paste":T=p0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Ff}var R=(e&4)!==0,b=!R&&t==="scroll",S=R?y!==null?y+"Capture":null:y;R=[];for(var E=d,k;E!==null;){k=E;var j=k.stateNode;if(k.tag===5&&j!==null&&(k=j,S!==null&&(j=vi(E,S),j!=null&&R.push(Pi(E,j,k)))),b)break;E=E.return}0<R.length&&(y=new T(y,C,null,n,p),v.push({event:y,listeners:R}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",y&&n!==Mu&&(C=n.relatedTarget||n.fromElement)&&(sr(C)||C[dn]))break e;if((T||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,T?(C=n.relatedTarget||n.toElement,T=d,C=C?sr(C):null,C!==null&&(b=Tr(C),C!==b||C.tag!==5&&C.tag!==6)&&(C=null)):(T=null,C=d),T!==C)){if(R=Of,j="onMouseLeave",S="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(R=Ff,j="onPointerLeave",S="onPointerEnter",E="pointer"),b=T==null?y:Mr(T),k=C==null?y:Mr(C),y=new R(j,E+"leave",T,n,p),y.target=b,y.relatedTarget=k,j=null,sr(p)===d&&(R=new R(S,E+"enter",C,n,p),R.target=k,R.relatedTarget=b,j=R),b=j,T&&C)t:{for(R=T,S=C,E=0,k=R;k;k=xr(k))E++;for(k=0,j=S;j;j=xr(j))k++;for(;0<E-k;)R=xr(R),E--;for(;0<k-E;)S=xr(S),k--;for(;E--;){if(R===S||S!==null&&R===S.alternate)break t;R=xr(R),S=xr(S)}R=null}else R=null;T!==null&&Yf(v,y,T,R,!1),C!==null&&b!==null&&Yf(v,b,C,R,!0)}}e:{if(y=d?Mr(d):window,T=y.nodeName&&y.nodeName.toLowerCase(),T==="select"||T==="input"&&y.type==="file")var F=b0;else if(zf(y))if(Ng)F=F0;else{F=O0;var D=L0}else(T=y.nodeName)&&T.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(F=M0);if(F&&(F=F(t,d))){xg(v,F,n,p);break e}D&&D(t,y,d),t==="focusout"&&(D=y._wrapperState)&&D.controlled&&y.type==="number"&&Vu(y,"number",y.value)}switch(D=d?Mr(d):window,t){case"focusin":(zf(D)||D.contentEditable==="true")&&(Lr=D,qu=d,ai=null);break;case"focusout":ai=qu=Lr=null;break;case"mousedown":Gu=!0;break;case"contextmenu":case"mouseup":case"dragend":Gu=!1,Wf(v,n,p);break;case"selectionchange":if(z0)break;case"keydown":case"keyup":Wf(v,n,p)}var _;if(uh)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else br?kg(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(Ag&&n.locale!=="ko"&&(br||g!=="onCompositionStart"?g==="onCompositionEnd"&&br&&(_=Pg()):(kn=p,oh="value"in kn?kn.value:kn.textContent,br=!0)),D=da(d,g),0<D.length&&(g=new Mf(g,t,null,n,p),v.push({event:g,listeners:D}),_?g.data=_:(_=Cg(n),_!==null&&(g.data=_)))),(_=N0?R0(t,n):D0(t,n))&&(d=da(d,"onBeforeInput"),0<d.length&&(p=new Mf("onBeforeInput","beforeinput",null,n,p),v.push({event:p,listeners:d}),p.data=_))}Ug(v,e)})}function Pi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function da(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=vi(t,n),i!=null&&r.unshift(Pi(t,i,s)),i=vi(t,e),i!=null&&r.push(Pi(t,i,s))),t=t.return}return r}function xr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Yf(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=vi(n,i),u!=null&&a.unshift(Pi(n,u,l))):s||(u=vi(n,i),u!=null&&a.push(Pi(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var G0=/\r\n?/g,W0=/\u0000|\uFFFD/g;function Xf(t){return(typeof t=="string"?t:""+t).replace(G0,`
`).replace(W0,"")}function Ro(t,e,n){if(e=Xf(e),Xf(t)!==e&&n)throw Error(M(425))}function fa(){}var Wu=null,Qu=null;function Ku(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yu=typeof setTimeout=="function"?setTimeout:void 0,Q0=typeof clearTimeout=="function"?clearTimeout:void 0,Jf=typeof Promise=="function"?Promise:void 0,K0=typeof queueMicrotask=="function"?queueMicrotask:typeof Jf<"u"?function(t){return Jf.resolve(null).then(t).catch(Y0)}:Yu;function Y0(t){setTimeout(function(){throw t})}function au(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ti(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ti(e)}function Vn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Zf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ys=Math.random().toString(36).slice(2),Qt="__reactFiber$"+ys,Ai="__reactProps$"+ys,dn="__reactContainer$"+ys,Xu="__reactEvents$"+ys,X0="__reactListeners$"+ys,J0="__reactHandles$"+ys;function sr(t){var e=t[Qt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dn]||n[Qt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Zf(t);t!==null;){if(n=t[Qt])return n;t=Zf(t)}return e}t=n,n=t.parentNode}return null}function qi(t){return t=t[Qt]||t[dn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Mr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function Wa(t){return t[Ai]||null}var Ju=[],Fr=-1;function Qn(t){return{current:t}}function _e(t){0>Fr||(t.current=Ju[Fr],Ju[Fr]=null,Fr--)}function me(t,e){Fr++,Ju[Fr]=t.current,t.current=e}var Hn={},it=Qn(Hn),gt=Qn(!1),dr=Hn;function ts(t,e){var n=t.type.contextTypes;if(!n)return Hn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function yt(t){return t=t.childContextTypes,t!=null}function pa(){_e(gt),_e(it)}function ep(t,e,n){if(it.current!==Hn)throw Error(M(168));me(it,e),me(gt,n)}function zg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(M(108,Lw(t)||"Unknown",s));return Ie({},n,r)}function ma(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hn,dr=it.current,me(it,t),me(gt,gt.current),!0}function tp(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=zg(t,e,dr),r.__reactInternalMemoizedMergedChildContext=t,_e(gt),_e(it),me(it,t)):_e(gt),me(gt,n)}var an=null,Qa=!1,lu=!1;function Hg(t){an===null?an=[t]:an.push(t)}function Z0(t){Qa=!0,Hg(t)}function Kn(){if(!lu&&an!==null){lu=!0;var t=0,e=ue;try{var n=an;for(ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}an=null,Qa=!1}catch(s){throw an!==null&&(an=an.slice(t+1)),pg(nh,Kn),s}finally{ue=e,lu=!1}}return null}var Ur=[],Br=0,ga=null,ya=0,kt=[],Ct=0,fr=null,ln=1,un="";function tr(t,e){Ur[Br++]=ya,Ur[Br++]=ga,ga=t,ya=e}function $g(t,e,n){kt[Ct++]=ln,kt[Ct++]=un,kt[Ct++]=fr,fr=t;var r=ln;t=un;var s=32-Bt(r)-1;r&=~(1<<s),n+=1;var i=32-Bt(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,ln=1<<32-Bt(e)+s|n<<s|r,un=i+t}else ln=1<<i|n<<s|r,un=t}function hh(t){t.return!==null&&(tr(t,1),$g(t,1,0))}function dh(t){for(;t===ga;)ga=Ur[--Br],Ur[Br]=null,ya=Ur[--Br],Ur[Br]=null;for(;t===fr;)fr=kt[--Ct],kt[Ct]=null,un=kt[--Ct],kt[Ct]=null,ln=kt[--Ct],kt[Ct]=null}var St=null,Tt=null,we=!1,Mt=null;function qg(t,e){var n=xt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function np(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,St=t,Tt=Vn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,St=t,Tt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fr!==null?{id:ln,overflow:un}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,St=t,Tt=null,!0):!1;default:return!1}}function Zu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ec(t){if(we){var e=Tt;if(e){var n=e;if(!np(t,e)){if(Zu(t))throw Error(M(418));e=Vn(n.nextSibling);var r=St;e&&np(t,e)?qg(r,n):(t.flags=t.flags&-4097|2,we=!1,St=t)}}else{if(Zu(t))throw Error(M(418));t.flags=t.flags&-4097|2,we=!1,St=t}}}function rp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;St=t}function Do(t){if(t!==St)return!1;if(!we)return rp(t),we=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ku(t.type,t.memoizedProps)),e&&(e=Tt)){if(Zu(t))throw Gg(),Error(M(418));for(;e;)qg(t,e),e=Vn(e.nextSibling)}if(rp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Tt=Vn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Tt=null}}else Tt=St?Vn(t.stateNode.nextSibling):null;return!0}function Gg(){for(var t=Tt;t;)t=Vn(t.nextSibling)}function ns(){Tt=St=null,we=!1}function fh(t){Mt===null?Mt=[t]:Mt.push(t)}var eT=vn.ReactCurrentBatchConfig;function $s(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function Vo(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sp(t){var e=t._init;return e(t._payload)}function Wg(t){function e(S,E){if(t){var k=S.deletions;k===null?(S.deletions=[E],S.flags|=16):k.push(E)}}function n(S,E){if(!t)return null;for(;E!==null;)e(S,E),E=E.sibling;return null}function r(S,E){for(S=new Map;E!==null;)E.key!==null?S.set(E.key,E):S.set(E.index,E),E=E.sibling;return S}function s(S,E){return S=On(S,E),S.index=0,S.sibling=null,S}function i(S,E,k){return S.index=k,t?(k=S.alternate,k!==null?(k=k.index,k<E?(S.flags|=2,E):k):(S.flags|=2,E)):(S.flags|=1048576,E)}function a(S){return t&&S.alternate===null&&(S.flags|=2),S}function l(S,E,k,j){return E===null||E.tag!==6?(E=mu(k,S.mode,j),E.return=S,E):(E=s(E,k),E.return=S,E)}function u(S,E,k,j){var F=k.type;return F===jr?p(S,E,k.props.children,j,k.key):E!==null&&(E.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Sn&&sp(F)===E.type)?(j=s(E,k.props),j.ref=$s(S,E,k),j.return=S,j):(j=Zo(k.type,k.key,k.props,null,S.mode,j),j.ref=$s(S,E,k),j.return=S,j)}function d(S,E,k,j){return E===null||E.tag!==4||E.stateNode.containerInfo!==k.containerInfo||E.stateNode.implementation!==k.implementation?(E=gu(k,S.mode,j),E.return=S,E):(E=s(E,k.children||[]),E.return=S,E)}function p(S,E,k,j,F){return E===null||E.tag!==7?(E=ur(k,S.mode,j,F),E.return=S,E):(E=s(E,k),E.return=S,E)}function v(S,E,k){if(typeof E=="string"&&E!==""||typeof E=="number")return E=mu(""+E,S.mode,k),E.return=S,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Eo:return k=Zo(E.type,E.key,E.props,null,S.mode,k),k.ref=$s(S,null,E),k.return=S,k;case Vr:return E=gu(E,S.mode,k),E.return=S,E;case Sn:var j=E._init;return v(S,j(E._payload),k)}if(Ks(E)||Fs(E))return E=ur(E,S.mode,k,null),E.return=S,E;Vo(S,E)}return null}function y(S,E,k,j){var F=E!==null?E.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return F!==null?null:l(S,E,""+k,j);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Eo:return k.key===F?u(S,E,k,j):null;case Vr:return k.key===F?d(S,E,k,j):null;case Sn:return F=k._init,y(S,E,F(k._payload),j)}if(Ks(k)||Fs(k))return F!==null?null:p(S,E,k,j,null);Vo(S,k)}return null}function T(S,E,k,j,F){if(typeof j=="string"&&j!==""||typeof j=="number")return S=S.get(k)||null,l(E,S,""+j,F);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Eo:return S=S.get(j.key===null?k:j.key)||null,u(E,S,j,F);case Vr:return S=S.get(j.key===null?k:j.key)||null,d(E,S,j,F);case Sn:var D=j._init;return T(S,E,k,D(j._payload),F)}if(Ks(j)||Fs(j))return S=S.get(k)||null,p(E,S,j,F,null);Vo(E,j)}return null}function C(S,E,k,j){for(var F=null,D=null,_=E,g=E=0,w=null;_!==null&&g<k.length;g++){_.index>g?(w=_,_=null):w=_.sibling;var I=y(S,_,k[g],j);if(I===null){_===null&&(_=w);break}t&&_&&I.alternate===null&&e(S,_),E=i(I,E,g),D===null?F=I:D.sibling=I,D=I,_=w}if(g===k.length)return n(S,_),we&&tr(S,g),F;if(_===null){for(;g<k.length;g++)_=v(S,k[g],j),_!==null&&(E=i(_,E,g),D===null?F=_:D.sibling=_,D=_);return we&&tr(S,g),F}for(_=r(S,_);g<k.length;g++)w=T(_,S,g,k[g],j),w!==null&&(t&&w.alternate!==null&&_.delete(w.key===null?g:w.key),E=i(w,E,g),D===null?F=w:D.sibling=w,D=w);return t&&_.forEach(function(A){return e(S,A)}),we&&tr(S,g),F}function R(S,E,k,j){var F=Fs(k);if(typeof F!="function")throw Error(M(150));if(k=F.call(k),k==null)throw Error(M(151));for(var D=F=null,_=E,g=E=0,w=null,I=k.next();_!==null&&!I.done;g++,I=k.next()){_.index>g?(w=_,_=null):w=_.sibling;var A=y(S,_,I.value,j);if(A===null){_===null&&(_=w);break}t&&_&&A.alternate===null&&e(S,_),E=i(A,E,g),D===null?F=A:D.sibling=A,D=A,_=w}if(I.done)return n(S,_),we&&tr(S,g),F;if(_===null){for(;!I.done;g++,I=k.next())I=v(S,I.value,j),I!==null&&(E=i(I,E,g),D===null?F=I:D.sibling=I,D=I);return we&&tr(S,g),F}for(_=r(S,_);!I.done;g++,I=k.next())I=T(_,S,g,I.value,j),I!==null&&(t&&I.alternate!==null&&_.delete(I.key===null?g:I.key),E=i(I,E,g),D===null?F=I:D.sibling=I,D=I);return t&&_.forEach(function(x){return e(S,x)}),we&&tr(S,g),F}function b(S,E,k,j){if(typeof k=="object"&&k!==null&&k.type===jr&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Eo:e:{for(var F=k.key,D=E;D!==null;){if(D.key===F){if(F=k.type,F===jr){if(D.tag===7){n(S,D.sibling),E=s(D,k.props.children),E.return=S,S=E;break e}}else if(D.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Sn&&sp(F)===D.type){n(S,D.sibling),E=s(D,k.props),E.ref=$s(S,D,k),E.return=S,S=E;break e}n(S,D);break}else e(S,D);D=D.sibling}k.type===jr?(E=ur(k.props.children,S.mode,j,k.key),E.return=S,S=E):(j=Zo(k.type,k.key,k.props,null,S.mode,j),j.ref=$s(S,E,k),j.return=S,S=j)}return a(S);case Vr:e:{for(D=k.key;E!==null;){if(E.key===D)if(E.tag===4&&E.stateNode.containerInfo===k.containerInfo&&E.stateNode.implementation===k.implementation){n(S,E.sibling),E=s(E,k.children||[]),E.return=S,S=E;break e}else{n(S,E);break}else e(S,E);E=E.sibling}E=gu(k,S.mode,j),E.return=S,S=E}return a(S);case Sn:return D=k._init,b(S,E,D(k._payload),j)}if(Ks(k))return C(S,E,k,j);if(Fs(k))return R(S,E,k,j);Vo(S,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,E!==null&&E.tag===6?(n(S,E.sibling),E=s(E,k),E.return=S,S=E):(n(S,E),E=mu(k,S.mode,j),E.return=S,S=E),a(S)):n(S,E)}return b}var rs=Wg(!0),Qg=Wg(!1),va=Qn(null),_a=null,zr=null,ph=null;function mh(){ph=zr=_a=null}function gh(t){var e=va.current;_e(va),t._currentValue=e}function tc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Yr(t,e){_a=t,ph=zr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mt=!0),t.firstContext=null)}function Rt(t){var e=t._currentValue;if(ph!==t)if(t={context:t,memoizedValue:e,next:null},zr===null){if(_a===null)throw Error(M(308));zr=t,_a.dependencies={lanes:0,firstContext:t}}else zr=zr.next=t;return e}var ir=null;function yh(t){ir===null?ir=[t]:ir.push(t)}function Kg(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,yh(e)):(n.next=s.next,s.next=n),e.interleaved=n,fn(t,r)}function fn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var In=!1;function vh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,fn(t,n)}return s=r.interleaved,s===null?(e.next=e,yh(r)):(e.next=s.next,s.next=e),r.interleaved=e,fn(t,n)}function Wo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rh(t,n)}}function ip(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wa(t,e,n,r){var s=t.updateQueue;In=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=u))}if(i!==null){var v=s.baseState;a=0,p=d=u=null,l=i;do{var y=l.lane,T=l.eventTime;if((r&y)===y){p!==null&&(p=p.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var C=t,R=l;switch(y=e,T=n,R.tag){case 1:if(C=R.payload,typeof C=="function"){v=C.call(T,v,y);break e}v=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=R.payload,y=typeof C=="function"?C.call(T,v,y):C,y==null)break e;v=Ie({},v,y);break e;case 2:In=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=s.effects,y===null?s.effects=[l]:y.push(l))}else T={eventTime:T,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(d=p=T,u=v):p=p.next=T,a|=y;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;y=l,l=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(p===null&&(u=v),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);mr|=a,t.lanes=a,t.memoizedState=v}}function op(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(M(191,s));s.call(r)}}}var Gi={},Yt=Qn(Gi),ki=Qn(Gi),Ci=Qn(Gi);function or(t){if(t===Gi)throw Error(M(174));return t}function _h(t,e){switch(me(Ci,e),me(ki,t),me(Yt,Gi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=bu(e,t)}_e(Yt),me(Yt,e)}function ss(){_e(Yt),_e(ki),_e(Ci)}function Xg(t){or(Ci.current);var e=or(Yt.current),n=bu(e,t.type);e!==n&&(me(ki,t),me(Yt,n))}function wh(t){ki.current===t&&(_e(Yt),_e(ki))}var Ee=Qn(0);function Ta(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var uu=[];function Th(){for(var t=0;t<uu.length;t++)uu[t]._workInProgressVersionPrimary=null;uu.length=0}var Qo=vn.ReactCurrentDispatcher,cu=vn.ReactCurrentBatchConfig,pr=0,Se=null,Ve=null,Me=null,Ea=!1,li=!1,xi=0,tT=0;function Je(){throw Error(M(321))}function Eh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ht(t[n],e[n]))return!1;return!0}function Sh(t,e,n,r,s,i){if(pr=i,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qo.current=t===null||t.memoizedState===null?iT:oT,t=n(r,s),li){i=0;do{if(li=!1,xi=0,25<=i)throw Error(M(301));i+=1,Me=Ve=null,e.updateQueue=null,Qo.current=aT,t=n(r,s)}while(li)}if(Qo.current=Sa,e=Ve!==null&&Ve.next!==null,pr=0,Me=Ve=Se=null,Ea=!1,e)throw Error(M(300));return t}function Ih(){var t=xi!==0;return xi=0,t}function Gt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?Se.memoizedState=Me=t:Me=Me.next=t,Me}function Dt(){if(Ve===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=Ve.next;var e=Me===null?Se.memoizedState:Me.next;if(e!==null)Me=e,Ve=t;else{if(t===null)throw Error(M(310));Ve=t,t={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},Me===null?Se.memoizedState=Me=t:Me=Me.next=t}return Me}function Ni(t,e){return typeof e=="function"?e(t):e}function hu(t){var e=Dt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=Ve,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,u=null,d=i;do{var p=d.lane;if((pr&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var v={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=v,a=r):u=u.next=v,Se.lanes|=p,mr|=p}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=l,Ht(r,e.memoizedState)||(mt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Se.lanes|=i,mr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function du(t){var e=Dt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Ht(i,e.memoizedState)||(mt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Jg(){}function Zg(t,e){var n=Se,r=Dt(),s=e(),i=!Ht(r.memoizedState,s);if(i&&(r.memoizedState=s,mt=!0),r=r.queue,Ph(ny.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Me!==null&&Me.memoizedState.tag&1){if(n.flags|=2048,Ri(9,ty.bind(null,n,r,s,e),void 0,null),Fe===null)throw Error(M(349));pr&30||ey(n,e,s)}return s}function ey(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ty(t,e,n,r){e.value=n,e.getSnapshot=r,ry(e)&&sy(t)}function ny(t,e,n){return n(function(){ry(e)&&sy(t)})}function ry(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ht(t,n)}catch{return!0}}function sy(t){var e=fn(t,1);e!==null&&zt(e,t,1,-1)}function ap(t){var e=Gt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:t},e.queue=t,t=t.dispatch=sT.bind(null,Se,t),[e.memoizedState,t]}function Ri(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function iy(){return Dt().memoizedState}function Ko(t,e,n,r){var s=Gt();Se.flags|=t,s.memoizedState=Ri(1|e,n,void 0,r===void 0?null:r)}function Ka(t,e,n,r){var s=Dt();r=r===void 0?null:r;var i=void 0;if(Ve!==null){var a=Ve.memoizedState;if(i=a.destroy,r!==null&&Eh(r,a.deps)){s.memoizedState=Ri(e,n,i,r);return}}Se.flags|=t,s.memoizedState=Ri(1|e,n,i,r)}function lp(t,e){return Ko(8390656,8,t,e)}function Ph(t,e){return Ka(2048,8,t,e)}function oy(t,e){return Ka(4,2,t,e)}function ay(t,e){return Ka(4,4,t,e)}function ly(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function uy(t,e,n){return n=n!=null?n.concat([t]):null,Ka(4,4,ly.bind(null,e,t),n)}function Ah(){}function cy(t,e){var n=Dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Eh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function hy(t,e){var n=Dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Eh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function dy(t,e,n){return pr&21?(Ht(n,e)||(n=yg(),Se.lanes|=n,mr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mt=!0),t.memoizedState=n)}function nT(t,e){var n=ue;ue=n!==0&&4>n?n:4,t(!0);var r=cu.transition;cu.transition={};try{t(!1),e()}finally{ue=n,cu.transition=r}}function fy(){return Dt().memoizedState}function rT(t,e,n){var r=Ln(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},py(t))my(e,n);else if(n=Kg(t,e,n,r),n!==null){var s=ct();zt(n,t,r,s),gy(n,e,r)}}function sT(t,e,n){var r=Ln(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(py(t))my(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Ht(l,a)){var u=e.interleaved;u===null?(s.next=s,yh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Kg(t,e,s,r),n!==null&&(s=ct(),zt(n,t,r,s),gy(n,e,r))}}function py(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function my(t,e){li=Ea=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function gy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rh(t,n)}}var Sa={readContext:Rt,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},iT={readContext:Rt,useCallback:function(t,e){return Gt().memoizedState=[t,e===void 0?null:e],t},useContext:Rt,useEffect:lp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ko(4194308,4,ly.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ko(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ko(4,2,t,e)},useMemo:function(t,e){var n=Gt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=rT.bind(null,Se,t),[r.memoizedState,t]},useRef:function(t){var e=Gt();return t={current:t},e.memoizedState=t},useState:ap,useDebugValue:Ah,useDeferredValue:function(t){return Gt().memoizedState=t},useTransition:function(){var t=ap(!1),e=t[0];return t=nT.bind(null,t[1]),Gt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Se,s=Gt();if(we){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),Fe===null)throw Error(M(349));pr&30||ey(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,lp(ny.bind(null,r,i,t),[t]),r.flags|=2048,Ri(9,ty.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Gt(),e=Fe.identifierPrefix;if(we){var n=un,r=ln;n=(r&~(1<<32-Bt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=tT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},oT={readContext:Rt,useCallback:cy,useContext:Rt,useEffect:Ph,useImperativeHandle:uy,useInsertionEffect:oy,useLayoutEffect:ay,useMemo:hy,useReducer:hu,useRef:iy,useState:function(){return hu(Ni)},useDebugValue:Ah,useDeferredValue:function(t){var e=Dt();return dy(e,Ve.memoizedState,t)},useTransition:function(){var t=hu(Ni)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:Jg,useSyncExternalStore:Zg,useId:fy,unstable_isNewReconciler:!1},aT={readContext:Rt,useCallback:cy,useContext:Rt,useEffect:Ph,useImperativeHandle:uy,useInsertionEffect:oy,useLayoutEffect:ay,useMemo:hy,useReducer:du,useRef:iy,useState:function(){return du(Ni)},useDebugValue:Ah,useDeferredValue:function(t){var e=Dt();return Ve===null?e.memoizedState=t:dy(e,Ve.memoizedState,t)},useTransition:function(){var t=du(Ni)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:Jg,useSyncExternalStore:Zg,useId:fy,unstable_isNewReconciler:!1};function Lt(t,e){if(t&&t.defaultProps){e=Ie({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function nc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ie({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ya={isMounted:function(t){return(t=t._reactInternals)?Tr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ct(),s=Ln(t),i=cn(r,s);i.payload=e,n!=null&&(i.callback=n),e=jn(t,i,s),e!==null&&(zt(e,t,s,r),Wo(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ct(),s=Ln(t),i=cn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=jn(t,i,s),e!==null&&(zt(e,t,s,r),Wo(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ct(),r=Ln(t),s=cn(n,r);s.tag=2,e!=null&&(s.callback=e),e=jn(t,s,r),e!==null&&(zt(e,t,r,n),Wo(e,t,r))}};function up(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Si(n,r)||!Si(s,i):!0}function yy(t,e,n){var r=!1,s=Hn,i=e.contextType;return typeof i=="object"&&i!==null?i=Rt(i):(s=yt(e)?dr:it.current,r=e.contextTypes,i=(r=r!=null)?ts(t,s):Hn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ya,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function cp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ya.enqueueReplaceState(e,e.state,null)}function rc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},vh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Rt(i):(i=yt(e)?dr:it.current,s.context=ts(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(nc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ya.enqueueReplaceState(s,s.state,null),wa(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function is(t,e){try{var n="",r=e;do n+=bw(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function fu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var lT=typeof WeakMap=="function"?WeakMap:Map;function vy(t,e,n){n=cn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Pa||(Pa=!0,pc=r),sc(t,e)},n}function _y(t,e,n){n=cn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){sc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){sc(t,e),typeof r!="function"&&(bn===null?bn=new Set([this]):bn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function hp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new lT;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=ET.bind(null,t,e,n),e.then(t,t))}function dp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=cn(-1,1),e.tag=2,jn(n,e,1))),n.lanes|=1),t)}var uT=vn.ReactCurrentOwner,mt=!1;function ut(t,e,n,r){e.child=t===null?Qg(e,null,n,r):rs(e,t.child,n,r)}function pp(t,e,n,r,s){n=n.render;var i=e.ref;return Yr(e,s),r=Sh(t,e,n,r,i,s),n=Ih(),t!==null&&!mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pn(t,e,s)):(we&&n&&hh(e),e.flags|=1,ut(t,e,r,s),e.child)}function mp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!jh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,wy(t,e,i,r,s)):(t=Zo(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Si,n(a,r)&&t.ref===e.ref)return pn(t,e,s)}return e.flags|=1,t=On(i,r),t.ref=e.ref,t.return=e,e.child=t}function wy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Si(i,r)&&t.ref===e.ref)if(mt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(mt=!0);else return e.lanes=t.lanes,pn(t,e,s)}return ic(t,e,n,r,s)}function Ty(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},me($r,wt),wt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,me($r,wt),wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,me($r,wt),wt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,me($r,wt),wt|=r;return ut(t,e,s,n),e.child}function Ey(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ic(t,e,n,r,s){var i=yt(n)?dr:it.current;return i=ts(e,i),Yr(e,s),n=Sh(t,e,n,r,i,s),r=Ih(),t!==null&&!mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pn(t,e,s)):(we&&r&&hh(e),e.flags|=1,ut(t,e,n,s),e.child)}function gp(t,e,n,r,s){if(yt(n)){var i=!0;ma(e)}else i=!1;if(Yr(e,s),e.stateNode===null)Yo(t,e),yy(e,n,r),rc(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Rt(d):(d=yt(n)?dr:it.current,d=ts(e,d));var p=n.getDerivedStateFromProps,v=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";v||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==d)&&cp(e,a,r,d),In=!1;var y=e.memoizedState;a.state=y,wa(e,r,a,s),u=e.memoizedState,l!==r||y!==u||gt.current||In?(typeof p=="function"&&(nc(e,n,p,r),u=e.memoizedState),(l=In||up(e,n,l,r,y,u,d))?(v||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Yg(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Lt(e.type,l),a.props=d,v=e.pendingProps,y=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Rt(u):(u=yt(n)?dr:it.current,u=ts(e,u));var T=n.getDerivedStateFromProps;(p=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==v||y!==u)&&cp(e,a,r,u),In=!1,y=e.memoizedState,a.state=y,wa(e,r,a,s);var C=e.memoizedState;l!==v||y!==C||gt.current||In?(typeof T=="function"&&(nc(e,n,T,r),C=e.memoizedState),(d=In||up(e,n,d,r,y,C,u)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,C,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,C,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),a.props=r,a.state=C,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return oc(t,e,n,r,i,s)}function oc(t,e,n,r,s,i){Ey(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&tp(e,n,!1),pn(t,e,i);r=e.stateNode,uT.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=rs(e,t.child,null,i),e.child=rs(e,null,l,i)):ut(t,e,l,i),e.memoizedState=r.state,s&&tp(e,n,!0),e.child}function Sy(t){var e=t.stateNode;e.pendingContext?ep(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ep(t,e.context,!1),_h(t,e.containerInfo)}function yp(t,e,n,r,s){return ns(),fh(s),e.flags|=256,ut(t,e,n,r),e.child}var ac={dehydrated:null,treeContext:null,retryLane:0};function lc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Iy(t,e,n){var r=e.pendingProps,s=Ee.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),me(Ee,s&1),t===null)return ec(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Za(a,r,0,null),t=ur(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=lc(n),e.memoizedState=ac,t):kh(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return cT(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=On(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=On(l,i):(i=ur(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?lc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=ac,r}return i=t.child,t=i.sibling,r=On(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function kh(t,e){return e=Za({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function jo(t,e,n,r){return r!==null&&fh(r),rs(e,t.child,null,n),t=kh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function cT(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=fu(Error(M(422))),jo(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Za({mode:"visible",children:r.children},s,0,null),i=ur(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&rs(e,t.child,null,a),e.child.memoizedState=lc(a),e.memoizedState=ac,i);if(!(e.mode&1))return jo(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(M(419)),r=fu(i,r,void 0),jo(t,e,a,r)}if(l=(a&t.childLanes)!==0,mt||l){if(r=Fe,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,fn(t,s),zt(r,t,s,-1))}return Vh(),r=fu(Error(M(421))),jo(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=ST.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Tt=Vn(s.nextSibling),St=e,we=!0,Mt=null,t!==null&&(kt[Ct++]=ln,kt[Ct++]=un,kt[Ct++]=fr,ln=t.id,un=t.overflow,fr=e),e=kh(e,r.children),e.flags|=4096,e)}function vp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),tc(t.return,e,n)}function pu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Py(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ut(t,e,r.children,n),r=Ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vp(t,n,e);else if(t.tag===19)vp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(me(Ee,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ta(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),pu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ta(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}pu(e,!0,n,null,i);break;case"together":pu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),mr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=On(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=On(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function hT(t,e,n){switch(e.tag){case 3:Sy(e),ns();break;case 5:Xg(e);break;case 1:yt(e.type)&&ma(e);break;case 4:_h(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;me(va,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(me(Ee,Ee.current&1),e.flags|=128,null):n&e.child.childLanes?Iy(t,e,n):(me(Ee,Ee.current&1),t=pn(t,e,n),t!==null?t.sibling:null);me(Ee,Ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Py(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),me(Ee,Ee.current),r)break;return null;case 22:case 23:return e.lanes=0,Ty(t,e,n)}return pn(t,e,n)}var Ay,uc,ky,Cy;Ay=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uc=function(){};ky=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,or(Yt.current);var i=null;switch(n){case"input":s=Ru(t,s),r=Ru(t,r),i=[];break;case"select":s=Ie({},s,{value:void 0}),r=Ie({},r,{value:void 0}),i=[];break;case"textarea":s=ju(t,s),r=ju(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=fa)}Lu(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(gi.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(gi.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ye("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Cy=function(t,e,n,r){n!==r&&(e.flags|=4)};function qs(t,e){if(!we)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ze(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function dT(t,e,n){var r=e.pendingProps;switch(dh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(e),null;case 1:return yt(e.type)&&pa(),Ze(e),null;case 3:return r=e.stateNode,ss(),_e(gt),_e(it),Th(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Do(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mt!==null&&(yc(Mt),Mt=null))),uc(t,e),Ze(e),null;case 5:wh(e);var s=or(Ci.current);if(n=e.type,t!==null&&e.stateNode!=null)ky(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return Ze(e),null}if(t=or(Yt.current),Do(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Qt]=e,r[Ai]=i,t=(e.mode&1)!==0,n){case"dialog":ye("cancel",r),ye("close",r);break;case"iframe":case"object":case"embed":ye("load",r);break;case"video":case"audio":for(s=0;s<Xs.length;s++)ye(Xs[s],r);break;case"source":ye("error",r);break;case"img":case"image":case"link":ye("error",r),ye("load",r);break;case"details":ye("toggle",r);break;case"input":kf(r,i),ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ye("invalid",r);break;case"textarea":xf(r,i),ye("invalid",r)}Lu(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ro(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ro(r.textContent,l,t),s=["children",""+l]):gi.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&ye("scroll",r)}switch(n){case"input":So(r),Cf(r,i,!0);break;case"textarea":So(r),Nf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=fa)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ng(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Qt]=e,t[Ai]=r,Ay(t,e,!1,!1),e.stateNode=t;e:{switch(a=Ou(n,r),n){case"dialog":ye("cancel",t),ye("close",t),s=r;break;case"iframe":case"object":case"embed":ye("load",t),s=r;break;case"video":case"audio":for(s=0;s<Xs.length;s++)ye(Xs[s],t);s=r;break;case"source":ye("error",t),s=r;break;case"img":case"image":case"link":ye("error",t),ye("load",t),s=r;break;case"details":ye("toggle",t),s=r;break;case"input":kf(t,r),s=Ru(t,r),ye("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ie({},r,{value:void 0}),ye("invalid",t);break;case"textarea":xf(t,r),s=ju(t,r),ye("invalid",t);break;default:s=r}Lu(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?ig(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&rg(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&yi(t,u):typeof u=="number"&&yi(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(gi.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ye("scroll",t):u!=null&&Xc(t,i,u,a))}switch(n){case"input":So(t),Cf(t,r,!1);break;case"textarea":So(t),Nf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+zn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Gr(t,!!r.multiple,i,!1):r.defaultValue!=null&&Gr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=fa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ze(e),null;case 6:if(t&&e.stateNode!=null)Cy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=or(Ci.current),or(Yt.current),Do(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qt]=e,(i=r.nodeValue!==n)&&(t=St,t!==null))switch(t.tag){case 3:Ro(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ro(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qt]=e,e.stateNode=r}return Ze(e),null;case 13:if(_e(Ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(we&&Tt!==null&&e.mode&1&&!(e.flags&128))Gg(),ns(),e.flags|=98560,i=!1;else if(i=Do(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(M(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(M(317));i[Qt]=e}else ns(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ze(e),i=!1}else Mt!==null&&(yc(Mt),Mt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ee.current&1?je===0&&(je=3):Vh())),e.updateQueue!==null&&(e.flags|=4),Ze(e),null);case 4:return ss(),uc(t,e),t===null&&Ii(e.stateNode.containerInfo),Ze(e),null;case 10:return gh(e.type._context),Ze(e),null;case 17:return yt(e.type)&&pa(),Ze(e),null;case 19:if(_e(Ee),i=e.memoizedState,i===null)return Ze(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)qs(i,!1);else{if(je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ta(t),a!==null){for(e.flags|=128,qs(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return me(Ee,Ee.current&1|2),e.child}t=t.sibling}i.tail!==null&&xe()>os&&(e.flags|=128,r=!0,qs(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ta(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!we)return Ze(e),null}else 2*xe()-i.renderingStartTime>os&&n!==1073741824&&(e.flags|=128,r=!0,qs(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=xe(),e.sibling=null,n=Ee.current,me(Ee,r?n&1|2:n&1),e):(Ze(e),null);case 22:case 23:return Dh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wt&1073741824&&(Ze(e),e.subtreeFlags&6&&(e.flags|=8192)):Ze(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function fT(t,e){switch(dh(e),e.tag){case 1:return yt(e.type)&&pa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ss(),_e(gt),_e(it),Th(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wh(e),null;case 13:if(_e(Ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));ns()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _e(Ee),null;case 4:return ss(),null;case 10:return gh(e.type._context),null;case 22:case 23:return Dh(),null;case 24:return null;default:return null}}var bo=!1,nt=!1,pT=typeof WeakSet=="function"?WeakSet:Set,z=null;function Hr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ke(t,e,r)}else n.current=null}function cc(t,e,n){try{n()}catch(r){ke(t,e,r)}}var _p=!1;function mT(t,e){if(Wu=ca,t=Vg(),ch(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,d=0,p=0,v=t,y=null;t:for(;;){for(var T;v!==n||s!==0&&v.nodeType!==3||(l=a+s),v!==i||r!==0&&v.nodeType!==3||(u=a+r),v.nodeType===3&&(a+=v.nodeValue.length),(T=v.firstChild)!==null;)y=v,v=T;for(;;){if(v===t)break t;if(y===n&&++d===s&&(l=a),y===i&&++p===r&&(u=a),(T=v.nextSibling)!==null)break;v=y,y=v.parentNode}v=T}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qu={focusedElem:t,selectionRange:n},ca=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var R=C.memoizedProps,b=C.memoizedState,S=e.stateNode,E=S.getSnapshotBeforeUpdate(e.elementType===e.type?R:Lt(e.type,R),b);S.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(j){ke(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return C=_p,_p=!1,C}function ui(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&cc(e,n,i)}s=s.next}while(s!==r)}}function Xa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function hc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function xy(t){var e=t.alternate;e!==null&&(t.alternate=null,xy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qt],delete e[Ai],delete e[Xu],delete e[X0],delete e[J0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ny(t){return t.tag===5||t.tag===3||t.tag===4}function wp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ny(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function dc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=fa));else if(r!==4&&(t=t.child,t!==null))for(dc(t,e,n),t=t.sibling;t!==null;)dc(t,e,n),t=t.sibling}function fc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(fc(t,e,n),t=t.sibling;t!==null;)fc(t,e,n),t=t.sibling}var ze=null,Ot=!1;function En(t,e,n){for(n=n.child;n!==null;)Ry(t,e,n),n=n.sibling}function Ry(t,e,n){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Ha,n)}catch{}switch(n.tag){case 5:nt||Hr(n,e);case 6:var r=ze,s=Ot;ze=null,En(t,e,n),ze=r,Ot=s,ze!==null&&(Ot?(t=ze,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ze.removeChild(n.stateNode));break;case 18:ze!==null&&(Ot?(t=ze,n=n.stateNode,t.nodeType===8?au(t.parentNode,n):t.nodeType===1&&au(t,n),Ti(t)):au(ze,n.stateNode));break;case 4:r=ze,s=Ot,ze=n.stateNode.containerInfo,Ot=!0,En(t,e,n),ze=r,Ot=s;break;case 0:case 11:case 14:case 15:if(!nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&cc(n,e,a),s=s.next}while(s!==r)}En(t,e,n);break;case 1:if(!nt&&(Hr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ke(n,e,l)}En(t,e,n);break;case 21:En(t,e,n);break;case 22:n.mode&1?(nt=(r=nt)||n.memoizedState!==null,En(t,e,n),nt=r):En(t,e,n);break;default:En(t,e,n)}}function Tp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new pT),e.forEach(function(r){var s=IT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function bt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:ze=l.stateNode,Ot=!1;break e;case 3:ze=l.stateNode.containerInfo,Ot=!0;break e;case 4:ze=l.stateNode.containerInfo,Ot=!0;break e}l=l.return}if(ze===null)throw Error(M(160));Ry(i,a,s),ze=null,Ot=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){ke(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Dy(e,t),e=e.sibling}function Dy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(bt(e,t),qt(t),r&4){try{ui(3,t,t.return),Xa(3,t)}catch(R){ke(t,t.return,R)}try{ui(5,t,t.return)}catch(R){ke(t,t.return,R)}}break;case 1:bt(e,t),qt(t),r&512&&n!==null&&Hr(n,n.return);break;case 5:if(bt(e,t),qt(t),r&512&&n!==null&&Hr(n,n.return),t.flags&32){var s=t.stateNode;try{yi(s,"")}catch(R){ke(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&eg(s,i),Ou(l,a);var d=Ou(l,i);for(a=0;a<u.length;a+=2){var p=u[a],v=u[a+1];p==="style"?ig(s,v):p==="dangerouslySetInnerHTML"?rg(s,v):p==="children"?yi(s,v):Xc(s,p,v,d)}switch(l){case"input":Du(s,i);break;case"textarea":tg(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var T=i.value;T!=null?Gr(s,!!i.multiple,T,!1):y!==!!i.multiple&&(i.defaultValue!=null?Gr(s,!!i.multiple,i.defaultValue,!0):Gr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ai]=i}catch(R){ke(t,t.return,R)}}break;case 6:if(bt(e,t),qt(t),r&4){if(t.stateNode===null)throw Error(M(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){ke(t,t.return,R)}}break;case 3:if(bt(e,t),qt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ti(e.containerInfo)}catch(R){ke(t,t.return,R)}break;case 4:bt(e,t),qt(t);break;case 13:bt(e,t),qt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Nh=xe())),r&4&&Tp(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(nt=(d=nt)||p,bt(e,t),nt=d):bt(e,t),qt(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(z=t,p=t.child;p!==null;){for(v=z=p;z!==null;){switch(y=z,T=y.child,y.tag){case 0:case 11:case 14:case 15:ui(4,y,y.return);break;case 1:Hr(y,y.return);var C=y.stateNode;if(typeof C.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(R){ke(r,n,R)}}break;case 5:Hr(y,y.return);break;case 22:if(y.memoizedState!==null){Sp(v);continue}}T!==null?(T.return=y,z=T):Sp(v)}p=p.sibling}e:for(p=null,v=t;;){if(v.tag===5){if(p===null){p=v;try{s=v.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=v.stateNode,u=v.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=sg("display",a))}catch(R){ke(t,t.return,R)}}}else if(v.tag===6){if(p===null)try{v.stateNode.nodeValue=d?"":v.memoizedProps}catch(R){ke(t,t.return,R)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;p===v&&(p=null),v=v.return}p===v&&(p=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:bt(e,t),qt(t),r&4&&Tp(t);break;case 21:break;default:bt(e,t),qt(t)}}function qt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ny(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(yi(s,""),r.flags&=-33);var i=wp(t);fc(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=wp(t);dc(t,l,a);break;default:throw Error(M(161))}}catch(u){ke(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function gT(t,e,n){z=t,Vy(t)}function Vy(t,e,n){for(var r=(t.mode&1)!==0;z!==null;){var s=z,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||bo;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||nt;l=bo;var d=nt;if(bo=a,(nt=u)&&!d)for(z=s;z!==null;)a=z,u=a.child,a.tag===22&&a.memoizedState!==null?Ip(s):u!==null?(u.return=a,z=u):Ip(s);for(;i!==null;)z=i,Vy(i),i=i.sibling;z=s,bo=l,nt=d}Ep(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,z=i):Ep(t)}}function Ep(t){for(;z!==null;){var e=z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nt||Xa(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!nt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Lt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&op(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}op(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var v=p.dehydrated;v!==null&&Ti(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}nt||e.flags&512&&hc(e)}catch(y){ke(e,e.return,y)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function Sp(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function Ip(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Xa(4,e)}catch(u){ke(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){ke(e,s,u)}}var i=e.return;try{hc(e)}catch(u){ke(e,i,u)}break;case 5:var a=e.return;try{hc(e)}catch(u){ke(e,a,u)}}}catch(u){ke(e,e.return,u)}if(e===t){z=null;break}var l=e.sibling;if(l!==null){l.return=e.return,z=l;break}z=e.return}}var yT=Math.ceil,Ia=vn.ReactCurrentDispatcher,Ch=vn.ReactCurrentOwner,Nt=vn.ReactCurrentBatchConfig,oe=0,Fe=null,Re=null,qe=0,wt=0,$r=Qn(0),je=0,Di=null,mr=0,Ja=0,xh=0,ci=null,ft=null,Nh=0,os=1/0,on=null,Pa=!1,pc=null,bn=null,Lo=!1,Cn=null,Aa=0,hi=0,mc=null,Xo=-1,Jo=0;function ct(){return oe&6?xe():Xo!==-1?Xo:Xo=xe()}function Ln(t){return t.mode&1?oe&2&&qe!==0?qe&-qe:eT.transition!==null?(Jo===0&&(Jo=yg()),Jo):(t=ue,t!==0||(t=window.event,t=t===void 0?16:Ig(t.type)),t):1}function zt(t,e,n,r){if(50<hi)throw hi=0,mc=null,Error(M(185));Hi(t,n,r),(!(oe&2)||t!==Fe)&&(t===Fe&&(!(oe&2)&&(Ja|=n),je===4&&An(t,qe)),vt(t,r),n===1&&oe===0&&!(e.mode&1)&&(os=xe()+500,Qa&&Kn()))}function vt(t,e){var n=t.callbackNode;e0(t,e);var r=ua(t,t===Fe?qe:0);if(r===0)n!==null&&Vf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Vf(n),e===1)t.tag===0?Z0(Pp.bind(null,t)):Hg(Pp.bind(null,t)),K0(function(){!(oe&6)&&Kn()}),n=null;else{switch(vg(r)){case 1:n=nh;break;case 4:n=mg;break;case 16:n=la;break;case 536870912:n=gg;break;default:n=la}n=By(n,jy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function jy(t,e){if(Xo=-1,Jo=0,oe&6)throw Error(M(327));var n=t.callbackNode;if(Xr()&&t.callbackNode!==n)return null;var r=ua(t,t===Fe?qe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ka(t,r);else{e=r;var s=oe;oe|=2;var i=Ly();(Fe!==t||qe!==e)&&(on=null,os=xe()+500,lr(t,e));do try{wT();break}catch(l){by(t,l)}while(!0);mh(),Ia.current=i,oe=s,Re!==null?e=0:(Fe=null,qe=0,e=je)}if(e!==0){if(e===2&&(s=zu(t),s!==0&&(r=s,e=gc(t,s))),e===1)throw n=Di,lr(t,0),An(t,r),vt(t,xe()),n;if(e===6)An(t,r);else{if(s=t.current.alternate,!(r&30)&&!vT(s)&&(e=ka(t,r),e===2&&(i=zu(t),i!==0&&(r=i,e=gc(t,i))),e===1))throw n=Di,lr(t,0),An(t,r),vt(t,xe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:nr(t,ft,on);break;case 3:if(An(t,r),(r&130023424)===r&&(e=Nh+500-xe(),10<e)){if(ua(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ct(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Yu(nr.bind(null,t,ft,on),e);break}nr(t,ft,on);break;case 4:if(An(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Bt(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*yT(r/1960))-r,10<r){t.timeoutHandle=Yu(nr.bind(null,t,ft,on),r);break}nr(t,ft,on);break;case 5:nr(t,ft,on);break;default:throw Error(M(329))}}}return vt(t,xe()),t.callbackNode===n?jy.bind(null,t):null}function gc(t,e){var n=ci;return t.current.memoizedState.isDehydrated&&(lr(t,e).flags|=256),t=ka(t,e),t!==2&&(e=ft,ft=n,e!==null&&yc(e)),t}function yc(t){ft===null?ft=t:ft.push.apply(ft,t)}function vT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ht(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function An(t,e){for(e&=~xh,e&=~Ja,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Bt(e),r=1<<n;t[n]=-1,e&=~r}}function Pp(t){if(oe&6)throw Error(M(327));Xr();var e=ua(t,0);if(!(e&1))return vt(t,xe()),null;var n=ka(t,e);if(t.tag!==0&&n===2){var r=zu(t);r!==0&&(e=r,n=gc(t,r))}if(n===1)throw n=Di,lr(t,0),An(t,e),vt(t,xe()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,nr(t,ft,on),vt(t,xe()),null}function Rh(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(os=xe()+500,Qa&&Kn())}}function gr(t){Cn!==null&&Cn.tag===0&&!(oe&6)&&Xr();var e=oe;oe|=1;var n=Nt.transition,r=ue;try{if(Nt.transition=null,ue=1,t)return t()}finally{ue=r,Nt.transition=n,oe=e,!(oe&6)&&Kn()}}function Dh(){wt=$r.current,_e($r)}function lr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Q0(n)),Re!==null)for(n=Re.return;n!==null;){var r=n;switch(dh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pa();break;case 3:ss(),_e(gt),_e(it),Th();break;case 5:wh(r);break;case 4:ss();break;case 13:_e(Ee);break;case 19:_e(Ee);break;case 10:gh(r.type._context);break;case 22:case 23:Dh()}n=n.return}if(Fe=t,Re=t=On(t.current,null),qe=wt=e,je=0,Di=null,xh=Ja=mr=0,ft=ci=null,ir!==null){for(e=0;e<ir.length;e++)if(n=ir[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}ir=null}return t}function by(t,e){do{var n=Re;try{if(mh(),Qo.current=Sa,Ea){for(var r=Se.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ea=!1}if(pr=0,Me=Ve=Se=null,li=!1,xi=0,Ch.current=null,n===null||n.return===null){je=1,Di=e,Re=null;break}e:{var i=t,a=n.return,l=n,u=e;if(e=qe,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=l,v=p.tag;if(!(p.mode&1)&&(v===0||v===11||v===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var T=dp(a);if(T!==null){T.flags&=-257,fp(T,a,l,i,e),T.mode&1&&hp(i,d,e),e=T,u=d;var C=e.updateQueue;if(C===null){var R=new Set;R.add(u),e.updateQueue=R}else C.add(u);break e}else{if(!(e&1)){hp(i,d,e),Vh();break e}u=Error(M(426))}}else if(we&&l.mode&1){var b=dp(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),fp(b,a,l,i,e),fh(is(u,l));break e}}i=u=is(u,l),je!==4&&(je=2),ci===null?ci=[i]:ci.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=vy(i,u,e);ip(i,S);break e;case 1:l=u;var E=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(bn===null||!bn.has(k)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=_y(i,l,e);ip(i,j);break e}}i=i.return}while(i!==null)}My(n)}catch(F){e=F,Re===n&&n!==null&&(Re=n=n.return);continue}break}while(!0)}function Ly(){var t=Ia.current;return Ia.current=Sa,t===null?Sa:t}function Vh(){(je===0||je===3||je===2)&&(je=4),Fe===null||!(mr&268435455)&&!(Ja&268435455)||An(Fe,qe)}function ka(t,e){var n=oe;oe|=2;var r=Ly();(Fe!==t||qe!==e)&&(on=null,lr(t,e));do try{_T();break}catch(s){by(t,s)}while(!0);if(mh(),oe=n,Ia.current=r,Re!==null)throw Error(M(261));return Fe=null,qe=0,je}function _T(){for(;Re!==null;)Oy(Re)}function wT(){for(;Re!==null&&!qw();)Oy(Re)}function Oy(t){var e=Uy(t.alternate,t,wt);t.memoizedProps=t.pendingProps,e===null?My(t):Re=e,Ch.current=null}function My(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=fT(n,e),n!==null){n.flags&=32767,Re=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{je=6,Re=null;return}}else if(n=dT(n,e,wt),n!==null){Re=n;return}if(e=e.sibling,e!==null){Re=e;return}Re=e=t}while(e!==null);je===0&&(je=5)}function nr(t,e,n){var r=ue,s=Nt.transition;try{Nt.transition=null,ue=1,TT(t,e,n,r)}finally{Nt.transition=s,ue=r}return null}function TT(t,e,n,r){do Xr();while(Cn!==null);if(oe&6)throw Error(M(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(t0(t,i),t===Fe&&(Re=Fe=null,qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Lo||(Lo=!0,By(la,function(){return Xr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Nt.transition,Nt.transition=null;var a=ue;ue=1;var l=oe;oe|=4,Ch.current=null,mT(t,n),Dy(n,t),B0(Qu),ca=!!Wu,Qu=Wu=null,t.current=n,gT(n),Gw(),oe=l,ue=a,Nt.transition=i}else t.current=n;if(Lo&&(Lo=!1,Cn=t,Aa=s),i=t.pendingLanes,i===0&&(bn=null),Kw(n.stateNode),vt(t,xe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Pa)throw Pa=!1,t=pc,pc=null,t;return Aa&1&&t.tag!==0&&Xr(),i=t.pendingLanes,i&1?t===mc?hi++:(hi=0,mc=t):hi=0,Kn(),null}function Xr(){if(Cn!==null){var t=vg(Aa),e=Nt.transition,n=ue;try{if(Nt.transition=null,ue=16>t?16:t,Cn===null)var r=!1;else{if(t=Cn,Cn=null,Aa=0,oe&6)throw Error(M(331));var s=oe;for(oe|=4,z=t.current;z!==null;){var i=z,a=i.child;if(z.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(z=d;z!==null;){var p=z;switch(p.tag){case 0:case 11:case 15:ui(8,p,i)}var v=p.child;if(v!==null)v.return=p,z=v;else for(;z!==null;){p=z;var y=p.sibling,T=p.return;if(xy(p),p===d){z=null;break}if(y!==null){y.return=T,z=y;break}z=T}}}var C=i.alternate;if(C!==null){var R=C.child;if(R!==null){C.child=null;do{var b=R.sibling;R.sibling=null,R=b}while(R!==null)}}z=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,z=a;else e:for(;z!==null;){if(i=z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ui(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,z=S;break e}z=i.return}}var E=t.current;for(z=E;z!==null;){a=z;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,z=k;else e:for(a=E;z!==null;){if(l=z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Xa(9,l)}}catch(F){ke(l,l.return,F)}if(l===a){z=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,z=j;break e}z=l.return}}if(oe=s,Kn(),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Ha,t)}catch{}r=!0}return r}finally{ue=n,Nt.transition=e}}return!1}function Ap(t,e,n){e=is(n,e),e=vy(t,e,1),t=jn(t,e,1),e=ct(),t!==null&&(Hi(t,1,e),vt(t,e))}function ke(t,e,n){if(t.tag===3)Ap(t,t,n);else for(;e!==null;){if(e.tag===3){Ap(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(bn===null||!bn.has(r))){t=is(n,t),t=_y(e,t,1),e=jn(e,t,1),t=ct(),e!==null&&(Hi(e,1,t),vt(e,t));break}}e=e.return}}function ET(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ct(),t.pingedLanes|=t.suspendedLanes&n,Fe===t&&(qe&n)===n&&(je===4||je===3&&(qe&130023424)===qe&&500>xe()-Nh?lr(t,0):xh|=n),vt(t,e)}function Fy(t,e){e===0&&(t.mode&1?(e=Ao,Ao<<=1,!(Ao&130023424)&&(Ao=4194304)):e=1);var n=ct();t=fn(t,e),t!==null&&(Hi(t,e,n),vt(t,n))}function ST(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Fy(t,n)}function IT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),Fy(t,n)}var Uy;Uy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||gt.current)mt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mt=!1,hT(t,e,n);mt=!!(t.flags&131072)}else mt=!1,we&&e.flags&1048576&&$g(e,ya,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Yo(t,e),t=e.pendingProps;var s=ts(e,it.current);Yr(e,n),s=Sh(null,e,r,t,s,n);var i=Ih();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yt(r)?(i=!0,ma(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,vh(e),s.updater=Ya,e.stateNode=s,s._reactInternals=e,rc(e,r,t,n),e=oc(null,e,r,!0,i,n)):(e.tag=0,we&&i&&hh(e),ut(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Yo(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=AT(r),t=Lt(r,t),s){case 0:e=ic(null,e,r,t,n);break e;case 1:e=gp(null,e,r,t,n);break e;case 11:e=pp(null,e,r,t,n);break e;case 14:e=mp(null,e,r,Lt(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Lt(r,s),ic(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Lt(r,s),gp(t,e,r,s,n);case 3:e:{if(Sy(e),t===null)throw Error(M(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Yg(t,e),wa(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=is(Error(M(423)),e),e=yp(t,e,r,n,s);break e}else if(r!==s){s=is(Error(M(424)),e),e=yp(t,e,r,n,s);break e}else for(Tt=Vn(e.stateNode.containerInfo.firstChild),St=e,we=!0,Mt=null,n=Qg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ns(),r===s){e=pn(t,e,n);break e}ut(t,e,r,n)}e=e.child}return e;case 5:return Xg(e),t===null&&ec(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Ku(r,s)?a=null:i!==null&&Ku(r,i)&&(e.flags|=32),Ey(t,e),ut(t,e,a,n),e.child;case 6:return t===null&&ec(e),null;case 13:return Iy(t,e,n);case 4:return _h(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=rs(e,null,r,n):ut(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Lt(r,s),pp(t,e,r,s,n);case 7:return ut(t,e,e.pendingProps,n),e.child;case 8:return ut(t,e,e.pendingProps.children,n),e.child;case 12:return ut(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,me(va,r._currentValue),r._currentValue=a,i!==null)if(Ht(i.value,a)){if(i.children===s.children&&!gt.current){e=pn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=cn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),tc(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(M(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),tc(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}ut(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Yr(e,n),s=Rt(s),r=r(s),e.flags|=1,ut(t,e,r,n),e.child;case 14:return r=e.type,s=Lt(r,e.pendingProps),s=Lt(r.type,s),mp(t,e,r,s,n);case 15:return wy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Lt(r,s),Yo(t,e),e.tag=1,yt(r)?(t=!0,ma(e)):t=!1,Yr(e,n),yy(e,r,s),rc(e,r,s,n),oc(null,e,r,!0,t,n);case 19:return Py(t,e,n);case 22:return Ty(t,e,n)}throw Error(M(156,e.tag))};function By(t,e){return pg(t,e)}function PT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xt(t,e,n,r){return new PT(t,e,n,r)}function jh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function AT(t){if(typeof t=="function")return jh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zc)return 11;if(t===eh)return 14}return 2}function On(t,e){var n=t.alternate;return n===null?(n=xt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Zo(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")jh(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case jr:return ur(n.children,s,i,e);case Jc:a=8,s|=8;break;case ku:return t=xt(12,n,e,s|2),t.elementType=ku,t.lanes=i,t;case Cu:return t=xt(13,n,e,s),t.elementType=Cu,t.lanes=i,t;case xu:return t=xt(19,n,e,s),t.elementType=xu,t.lanes=i,t;case Xm:return Za(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Km:a=10;break e;case Ym:a=9;break e;case Zc:a=11;break e;case eh:a=14;break e;case Sn:a=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=xt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ur(t,e,n,r){return t=xt(7,t,r,e),t.lanes=n,t}function Za(t,e,n,r){return t=xt(22,t,r,e),t.elementType=Xm,t.lanes=n,t.stateNode={isHidden:!1},t}function mu(t,e,n){return t=xt(6,t,null,e),t.lanes=n,t}function gu(t,e,n){return e=xt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yl(0),this.expirationTimes=Yl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yl(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function bh(t,e,n,r,s,i,a,l,u){return t=new kT(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=xt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vh(i),t}function CT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function zy(t){if(!t)return Hn;t=t._reactInternals;e:{if(Tr(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(yt(n))return zg(t,n,e)}return e}function Hy(t,e,n,r,s,i,a,l,u){return t=bh(n,r,!0,t,s,i,a,l,u),t.context=zy(null),n=t.current,r=ct(),s=Ln(n),i=cn(r,s),i.callback=e??null,jn(n,i,s),t.current.lanes=s,Hi(t,s,r),vt(t,r),t}function el(t,e,n,r){var s=e.current,i=ct(),a=Ln(s);return n=zy(n),e.context===null?e.context=n:e.pendingContext=n,e=cn(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=jn(s,e,a),t!==null&&(zt(t,s,a,i),Wo(t,s,a)),a}function Ca(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function kp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Lh(t,e){kp(t,e),(t=t.alternate)&&kp(t,e)}function xT(){return null}var $y=typeof reportError=="function"?reportError:function(t){console.error(t)};function Oh(t){this._internalRoot=t}tl.prototype.render=Oh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));el(t,e,null,null)};tl.prototype.unmount=Oh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gr(function(){el(null,t,null,null)}),e[dn]=null}};function tl(t){this._internalRoot=t}tl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Tg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Pn.length&&e!==0&&e<Pn[n].priority;n++);Pn.splice(n,0,t),n===0&&Sg(t)}};function Mh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Cp(){}function NT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Ca(a);i.call(d)}}var a=Hy(e,r,t,0,null,!1,!1,"",Cp);return t._reactRootContainer=a,t[dn]=a.current,Ii(t.nodeType===8?t.parentNode:t),gr(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Ca(u);l.call(d)}}var u=bh(t,0,!1,null,null,!1,!1,"",Cp);return t._reactRootContainer=u,t[dn]=u.current,Ii(t.nodeType===8?t.parentNode:t),gr(function(){el(e,u,n,r)}),u}function rl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var u=Ca(a);l.call(u)}}el(e,a,t,s)}else a=NT(n,e,t,s,r);return Ca(a)}_g=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ys(e.pendingLanes);n!==0&&(rh(e,n|1),vt(e,xe()),!(oe&6)&&(os=xe()+500,Kn()))}break;case 13:gr(function(){var r=fn(t,1);if(r!==null){var s=ct();zt(r,t,1,s)}}),Lh(t,1)}};sh=function(t){if(t.tag===13){var e=fn(t,134217728);if(e!==null){var n=ct();zt(e,t,134217728,n)}Lh(t,134217728)}};wg=function(t){if(t.tag===13){var e=Ln(t),n=fn(t,e);if(n!==null){var r=ct();zt(n,t,e,r)}Lh(t,e)}};Tg=function(){return ue};Eg=function(t,e){var n=ue;try{return ue=t,e()}finally{ue=n}};Fu=function(t,e,n){switch(e){case"input":if(Du(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Wa(r);if(!s)throw Error(M(90));Zm(r),Du(r,s)}}}break;case"textarea":tg(t,n);break;case"select":e=n.value,e!=null&&Gr(t,!!n.multiple,e,!1)}};lg=Rh;ug=gr;var RT={usingClientEntryPoint:!1,Events:[qi,Mr,Wa,og,ag,Rh]},Gs={findFiberByHostInstance:sr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DT={bundleType:Gs.bundleType,version:Gs.version,rendererPackageName:Gs.rendererPackageName,rendererConfig:Gs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=dg(t),t===null?null:t.stateNode},findFiberByHostInstance:Gs.findFiberByHostInstance||xT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oo.isDisabled&&Oo.supportsFiber)try{Ha=Oo.inject(DT),Kt=Oo}catch{}}Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RT;Pt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mh(e))throw Error(M(200));return CT(t,e,null,n)};Pt.createRoot=function(t,e){if(!Mh(t))throw Error(M(299));var n=!1,r="",s=$y;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=bh(t,1,!1,null,null,n,!1,r,s),t[dn]=e.current,Ii(t.nodeType===8?t.parentNode:t),new Oh(e)};Pt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=dg(e),t=t===null?null:t.stateNode,t};Pt.flushSync=function(t){return gr(t)};Pt.hydrate=function(t,e,n){if(!nl(e))throw Error(M(200));return rl(null,t,e,!0,n)};Pt.hydrateRoot=function(t,e,n){if(!Mh(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=$y;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Hy(e,null,t,1,n??null,s,!1,i,a),t[dn]=e.current,Ii(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new tl(e)};Pt.render=function(t,e,n){if(!nl(e))throw Error(M(200));return rl(null,t,e,!1,n)};Pt.unmountComponentAtNode=function(t){if(!nl(t))throw Error(M(40));return t._reactRootContainer?(gr(function(){rl(null,null,t,!1,function(){t._reactRootContainer=null,t[dn]=null})}),!0):!1};Pt.unstable_batchedUpdates=Rh;Pt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!nl(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return rl(t,e,n,!1,r)};Pt.version="18.3.1-next-f1338f8080-20240426";function qy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qy)}catch(t){console.error(t)}}qy(),qm.exports=Pt;var VT=qm.exports,xp=VT;Pu.createRoot=xp.createRoot,Pu.hydrateRoot=xp.hydrateRoot;const cr={cryptography:[{id:"crypto-1",title:"Caesar Cipher Basics",difficulty:"Easy",points:10,description:"Julius Caesar used a simple cipher to protect his messages. In a Caesar cipher, each letter is shifted by a fixed number of positions in the alphabet.",learningObjective:"Understand how substitution ciphers work and practice decryption techniques.",vocabularyTerms:["caesar-cipher","cipher","encryption","decryption","plaintext","ciphertext"],prompt:`The following message was encrypted with a Caesar cipher using a shift of 3:

FBEHU UDQJH LV IXQ!

Decrypt the message to find the flag.`,hints:["Each letter is shifted 3 positions forward in the alphabet","To decrypt, shift each letter 3 positions backward","A becomes D, B becomes E, C becomes F, etc.","The flag format is: FLAG{...}"],answer:"CYBER RANGE IS FUN!",flag:"FLAG{CYBER_RANGE_IS_FUN}",explanation:"In a Caesar cipher with shift 3, FC, BY, EB, HE, UR, and so on. By shifting each letter back 3 positions, we decrypt the message."},{id:"crypto-2",title:"Base64 Encoding",difficulty:"Easy",points:15,description:"Base64 is an encoding scheme that converts binary data into ASCII text. It's commonly used to transmit data over text-based protocols.",learningObjective:"Learn to recognize and decode Base64-encoded data.",vocabularyTerms:["base64","encryption","plaintext"],prompt:`You intercepted this encoded message:

RkxBR3tCQVNFNjRfSVNfTk9UX0VOQ1JZUFRJT059

Decode it to retrieve the flag. Remember: Base64 is encoding, not encryption!`,hints:["This is Base64 encoding, not encryption","Base64 strings often end with = or == for padding","Use a Base64 decoder tool or write a decoder","The decoded text will be readable"],answer:"FLAG{BASE64_IS_NOT_ENCRYPTION}",flag:"FLAG{BASE64_IS_NOT_ENCRYPTION}",explanation:"Base64 is an encoding scheme, not encryption. It converts binary data to text but provides no security. Anyone can easily decode it."},{id:"crypto-3",title:"Hex Decoder",difficulty:"Easy",points:15,description:"Hexadecimal (hex) is a base-16 number system often used to represent binary data in a readable format.",learningObjective:"Learn to convert hexadecimal data to ASCII text.",vocabularyTerms:["encryption","plaintext","ciphertext"],prompt:`Convert this hexadecimal string to ASCII to find the flag:

464c41477b4845585f54305f415343494960207d

Hint: Each pair of hex digits represents one ASCII character.`,hints:["Hex uses digits 0-9 and letters A-F","Each pair of hex characters represents one byte",'46 in hex = 70 in decimal = "F" in ASCII',"Convert each pair to get the full message"],answer:"FLAG{HEX_T0_ASCII!}",flag:"FLAG{HEX_T0_ASCII!}",explanation:"Hexadecimal is often used to represent data. By converting each hex pair to its ASCII equivalent, we reveal the hidden message."},{id:"crypto-4",title:"ROT13 Message",difficulty:"Medium",points:20,description:"ROT13 is a special case of the Caesar cipher with a shift of 13. It's interesting because applying it twice returns the original text.",learningObjective:"Understand ROT13 and why it's symmetric.",vocabularyTerms:["caesar-cipher","cipher","encryption","decryption"],prompt:`Decrypt this ROT13 message:

SYNT{EBG13_VF_FLZZRGEVP}

ROT13 shifts each letter 13 positions. What makes this cipher special?`,hints:["ROT13 shifts each letter exactly 13 positions","Since the alphabet has 26 letters, ROT13 is its own inverse","Applying ROT13 twice gives you back the original text","AN, BO, CP, etc."],answer:"FLAG{ROT13_IS_SYMMETRIC}",flag:"FLAG{ROT13_IS_SYMMETRIC}",explanation:"ROT13 is symmetric because the alphabet has 26 letters. Shifting 13 positions twice (13+13=26) brings you back to the start."},{id:"crypto-5",title:"Hash Detective",difficulty:"Medium",points:25,description:"Cryptographic hash functions create a unique fingerprint of data. They are one-way functions, meaning you can't reverse them.",learningObjective:"Understand hashing and learn to identify different hash types.",vocabularyTerms:["hash","encryption"],prompt:`You found these hashes in a database. Identify which hash algorithm was likely used:

1. 5d41402abc4b2a76b9719d911017c592
2. 356a192b7913b04c54574d18c28d46e6395428ab
3. 8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918

Hash lengths: MD5=32, SHA-1=40, SHA-256=64 characters`,hints:["Count the characters in each hash","MD5 hashes are 32 hex characters long","SHA-1 hashes are 40 hex characters long","SHA-256 hashes are 64 hex characters long","The flag format is: FLAG{ALGO1_ALGO2_ALGO3}"],answer:"FLAG{MD5_SHA1_SHA256}",flag:"FLAG{MD5_SHA1_SHA256}",explanation:"Hash functions produce fixed-length outputs. By counting characters, you can identify: 32=MD5, 40=SHA-1, 64=SHA-256. MD5 and SHA-1 are now considered insecure."}],network:[{id:"network-1",title:"Common Ports",difficulty:"Easy",points:10,description:"Network services communicate through ports. Knowing common port numbers helps identify services and potential vulnerabilities.",learningObjective:"Learn common network ports and their associated services.",vocabularyTerms:["port","protocol","firewall"],prompt:`Match these port numbers to their services:

Port 80: ?
Port 443: ?
Port 22: ?
Port 21: ?

Services: SSH, HTTP, HTTPS, FTP

Enter the flag: FLAG{SERVICE_80_443_22_21}`,hints:["Port 80 is for unencrypted web traffic","Port 443 is for encrypted web traffic","Port 22 is for secure shell access","Port 21 is for file transfer","Format: FLAG{HTTP_HTTPS_SSH_FTP}"],answer:"FLAG{HTTP_HTTPS_SSH_FTP}",flag:"FLAG{HTTP_HTTPS_SSH_FTP}",explanation:"Common ports: HTTP=80, HTTPS=443, SSH=22, FTP=21. Knowing these helps identify services running on a network and potential security issues."},{id:"network-2",title:"IP Address Classes",difficulty:"Medium",points:20,description:"IP addresses are divided into classes based on their range. Understanding IP addressing is fundamental to networking.",learningObjective:"Understand IP address structure and private IP ranges.",vocabularyTerms:["ip-address","protocol"],prompt:`Which of these IP addresses is a private (non-routable) IP address?

A) 8.8.8.8
B) 192.168.1.1
C) 74.125.224.72
D) 151.101.1.140

Private IP ranges:
- 10.0.0.0 to 10.255.255.255
- 172.16.0.0 to 172.31.255.255
- 192.168.0.0 to 192.168.255.255`,hints:["Private IPs cannot be accessed from the internet","192.168.x.x is a common private IP range","Your home router likely uses 192.168.1.1","The flag is FLAG{B}"],answer:"B",flag:"FLAG{B}",explanation:"192.168.1.1 is a private IP address used within local networks. Private IPs are not routable on the internet, providing an extra layer of security."},{id:"network-3",title:"Protocol Detective",difficulty:"Medium",points:25,description:"Different protocols serve different purposes in network communication. Understanding them is key to network security.",learningObjective:"Identify network protocols and understand their security implications.",vocabularyTerms:["protocol","port","encryption"],prompt:`Analyze this network traffic log:

Connection 1: Port 23 - Telnet session
Connection 2: Port 22 - SSH session
Connection 3: Port 80 - HTTP session
Connection 4: Port 443 - HTTPS session

Which connections transmit data in PLAINTEXT (unencrypted)?
Enter as FLAG{PORT_PORT_PORT} in ascending order`,hints:["Telnet (23) sends data unencrypted","SSH (22) encrypts all data","HTTP (80) is unencrypted","HTTPS (443) is encrypted with SSL/TLS","List the unencrypted ports: 23, 80"],answer:"FLAG{23_80}",flag:"FLAG{23_80}",explanation:"Telnet and HTTP transmit data in plaintext, making them vulnerable to eavesdropping. Always use encrypted alternatives: SSH instead of Telnet, HTTPS instead of HTTP."},{id:"network-4",title:"Firewall Rules",difficulty:"Hard",points:30,description:"Firewalls use rules to control network traffic. Understanding firewall rules helps protect networks from threats.",learningObjective:"Learn how firewall rules work to protect networks.",vocabularyTerms:["firewall","port","protocol","ip-address"],prompt:`A firewall has these rules (processed in order):

1. ALLOW: Source 192.168.1.0/24, Port ANY
2. DENY: Port 23
3. ALLOW: Port 80
4. ALLOW: Port 443
5. DENY: ALL

Can a computer at 192.168.1.50 access Telnet (port 23)?
Can a computer at 10.0.0.5 access HTTP (port 80)?`,hints:["Firewall rules are processed top to bottom","192.168.1.50 matches rule 1 (allow all ports from that subnet)","Rule 1 comes before rule 2, so it takes precedence","10.0.0.5 doesn't match rule 1, so it continues to other rules","Answer: FLAG{YES_YES} or FLAG{YES_NO} or FLAG{NO_YES} or FLAG{NO_NO}"],answer:"FLAG{YES_YES}",flag:"FLAG{YES_YES}",explanation:"Firewalls process rules in order. 192.168.1.50 matches rule 1 (ALLOW all ports) first. 10.0.0.5 skips rule 1, but matches rule 3 (ALLOW port 80)."}],password:[{id:"password-1",title:"Password Strength 101",difficulty:"Easy",points:10,description:"Strong passwords are your first line of defense. Learn what makes a password secure.",learningObjective:"Understand the characteristics of strong passwords.",vocabularyTerms:["password-strength","brute-force","authentication"],prompt:`Which password is the STRONGEST?

A) password123
B) P@ssw0rd!
C) Tr0ub4dor&3
D) correct-horse-battery-staple-2024

Consider: length, complexity, predictability, and entropy.`,hints:["Length is one of the most important factors","Option A is too common and simple","Option B is a common pattern (letter substitution)","Option C is medium strength but short","Option D is long and uses random words (passphrase)","The flag is FLAG{D}"],answer:"D",flag:"FLAG{D}",explanation:'Long passphrases with random words are stronger than short complex passwords. "correct-horse-battery-staple-2024" has high entropy and is harder to crack than "P@ssw0rd!".'},{id:"password-2",title:"Brute Force Math",difficulty:"Medium",points:20,description:"Understanding password combination math helps you create stronger passwords.",learningObjective:"Calculate password strength and understand brute force attacks.",vocabularyTerms:["brute-force","password-strength"],prompt:`A 4-digit PIN has how many possible combinations?

Digits available: 0-9 (10 digits)
PIN length: 4 digits

Calculate: 10  10  10  10 = ?

If a brute force attack tries 1000 PINs per second, how many seconds to try all combinations?`,hints:["10 choices for each of 4 positions","10^4 = 10,000 possible combinations","10,000 combinations  1000 per second = 10 seconds","The flag is FLAG{10000_10}"],answer:"FLAG{10000_10}",flag:"FLAG{10000_10}",explanation:"4-digit PINs have only 10,000 combinations (10^4). At 1000 guesses/second, all combinations can be tried in 10 seconds. This shows why longer passwords are crucial!"},{id:"password-3",title:"Common Password Patterns",difficulty:"Medium",points:20,description:"Attackers use dictionaries of common passwords. Avoid predictable patterns!",learningObjective:"Recognize and avoid common password patterns.",vocabularyTerms:["brute-force","password-strength"],prompt:`These passwords were found in a breach. Identify the pattern:

- Password1
- Welcome1
- Qwerty123
- Letmein1
- Admin2024

What do they have in common? The flag describes the pattern: FLAG{PATTERN_TYPE}`,hints:["Look at the structure of each password","They all use common words","They all end with numbers",'This is "word + digits" pattern',"The flag is FLAG{COMMON_WORD_PLUS_DIGITS}"],answer:"FLAG{COMMON_WORD_PLUS_DIGITS}",flag:"FLAG{COMMON_WORD_PLUS_DIGITS}",explanation:"These passwords follow the pattern: common word + digits. Attackers know this pattern and include it in their attacks. Avoid predictable patterns!"},{id:"password-4",title:"Password Hashing",difficulty:"Hard",points:30,description:"Systems store password hashes, not plaintext passwords. Understanding hashing is crucial for security.",learningObjective:"Understand how password hashing protects credentials.",vocabularyTerms:["hash","encryption","authentication"],prompt:`A database stores these password hashes:

User1: 5f4dcc3b5aa765d61d8327deb882cf99
User2: 5f4dcc3b5aa765d61d8327deb882cf99
User3: 098f6bcd4621d373cade4e832627b4f6

What does it mean that User1 and User2 have the SAME hash?

A) They have the same username
B) They have the same password
C) Their accounts are linked
D) The database is corrupted`,hints:["Hash functions are deterministic","Same input always produces same output","If two hashes match, the passwords match","This is why salting is important","The flag is FLAG{B}"],answer:"B",flag:"FLAG{B}",explanation:'Identical hashes mean identical passwords. This is why modern systems use "salting" - adding random data before hashing so identical passwords produce different hashes.'}],web:[{id:"web-1",title:"URL Analysis",difficulty:"Easy",points:10,description:"URLs can reveal a lot about a website and potential security issues. Learn to analyze them critically.",learningObjective:"Identify suspicious URLs and understand URL structure.",vocabularyTerms:["phishing","protocol"],prompt:`Which URL is most likely a PHISHING attempt?

A) https://www.google.com/search
B) http://goog1e.com/signin
C) https://mail.google.com/mail
D) https://drive.google.com/drive

Look carefully at each domain name!`,hints:["Check the spelling of the domain name","Look for character substitution (1 instead of l)",'goog1e.com uses the number "1" instead of letter "l"',"Also note: it uses HTTP not HTTPS","The flag is FLAG{B}"],answer:"B",flag:"FLAG{B}",explanation:'goog1e.com uses "1" instead of "l" (typosquatting). Also uses HTTP instead of HTTPS. Always check domain spelling and use HTTPS for sensitive sites!'},{id:"web-2",title:"SQL Injection Basics",difficulty:"Medium",points:25,description:"SQL injection is a common web vulnerability where attackers insert malicious SQL code into input fields.",learningObjective:"Understand how SQL injection attacks work and how to prevent them.",vocabularyTerms:["sql-injection","vulnerability","exploit"],prompt:`A login form uses this SQL query:

SELECT * FROM users WHERE username='USER_INPUT' AND password='PASS_INPUT'

An attacker enters:
Username: admin'--
Password: anything

What does the query become? Will the attacker bypass login?

(-- is a SQL comment)`,hints:["Substitute the inputs into the query","The query becomes: SELECT * FROM users WHERE username='admin'--' AND password='anything'","Everything after -- is commented out","The password check is bypassed!","The flag is FLAG{YES_BYPASSED}"],answer:"FLAG{YES_BYPASSED}",flag:"FLAG{YES_BYPASSED}",explanation:"The ' closes the username string, and -- comments out the rest. The query becomes: SELECT * FROM users WHERE username='admin' (password check ignored). Always use parameterized queries!"},{id:"web-3",title:"XSS Detection",difficulty:"Medium",points:25,description:"Cross-Site Scripting (XSS) allows attackers to inject malicious scripts into web pages viewed by other users.",learningObjective:"Identify XSS vulnerabilities and understand their impact.",vocabularyTerms:["xss","vulnerability","exploit"],prompt:`A website displays user comments without sanitization:

<div>USER_COMMENT</div>

An attacker posts this comment:
<script>alert("XSS")<\/script>

What happens when other users view the page?

A) The script tag is displayed as text
B) The script executes in users' browsers
C) The comment is blocked
D) Nothing happens`,hints:["Without sanitization, HTML/JavaScript is executed","The browser sees <script> and runs it","This is a stored XSS vulnerability","The script runs in every visitor's browser","The flag is FLAG{B}"],answer:"B",flag:"FLAG{B}",explanation:"Without input sanitization, the browser executes the script tag. This is XSS. Attackers can steal cookies, redirect users, or deface pages. Always sanitize user input!"},{id:"web-4",title:"HTTPS vs HTTP",difficulty:"Easy",points:15,description:"HTTPS encrypts communication between browsers and servers, protecting against eavesdropping.",learningObjective:"Understand the importance of HTTPS for web security.",vocabularyTerms:["protocol","encryption"],prompt:`You're logging into your bank account. The URL is:

http://www.mybank.com/login

What's the security risk?

A) No risk, HTTP is fine
B) Password is sent in plaintext, visible to eavesdroppers
C) The bank might be fake
D) Both B and C`,hints:["HTTP sends all data unencrypted","Anyone monitoring the network can see your password","Legitimate banks always use HTTPS for login","HTTP also means no authentication of the server","The flag is FLAG{D}"],answer:"D",flag:"FLAG{D}",explanation:"HTTP sends data in plaintext (including passwords), and doesn't authenticate the server. Real banks use HTTPS. Always check for HTTPS and the padlock icon!"}],social:[{id:"social-1",title:"Phishing Email Detection",difficulty:"Easy",points:10,description:"Phishing emails try to trick you into revealing sensitive information. Learn to spot the red flags.",learningObjective:"Identify common phishing email indicators.",vocabularyTerms:["phishing","social-engineering"],prompt:`You receive this email:

From: security@amaz0n-support.com
Subject: URGENT: Your account will be closed!

"Dear Customer,
Your Amazon account has suspicious activity. Click here immediately to verify your identity or your account will be permanently closed within 24 hours!

Click: http://amaz0n-verify.tk/account"

How many red flags can you identify?`,hints:["Check the sender domain: amaz0n (with a zero)","Creates urgency and fear","Suspicious URL (amaz0n-verify.tk)",'Generic greeting ("Dear Customer")',"There are at least 4 red flags","Flag format: FLAG{NUMBER_OF_RED_FLAGS}"],answer:"FLAG{4}",flag:"FLAG{4}",explanation:"Red flags: (1) Fake domain (amaz0n), (2) Creates urgency, (3) Suspicious URL, (4) Generic greeting. Legitimate companies don't threaten account closure via email."},{id:"social-2",title:"Pretexting Scenario",difficulty:"Medium",points:20,description:"Pretexting is creating a false scenario to trick people into revealing information.",learningObjective:"Recognize pretexting attacks and social engineering tactics.",vocabularyTerms:["social-engineering","phishing"],prompt:`You receive a call:

"Hi, this is Jake from IT. We're upgrading the network and need to verify user accounts. Can you confirm your username and password so I can update your profile?"

What should you do?

A) Provide the information to be helpful
B) Ask for a call-back number and verify with IT
C) Hang up immediately
D) Give username but not password`,hints:["IT should never ask for your password","Verify the identity before sharing any info","Call back through official channels","This is a pretexting attack","The flag is FLAG{B}"],answer:"B",flag:"FLAG{B}",explanation:"Never give credentials over the phone. Ask for a callback number and verify through official IT channels. Legitimate IT staff never ask for passwords."},{id:"social-3",title:"Tailgating Attack",difficulty:"Medium",points:20,description:"Tailgating is when unauthorized people follow authorized personnel into restricted areas.",learningObjective:"Understand physical security and social engineering in the real world.",vocabularyTerms:["social-engineering","authentication","authorization"],prompt:`You're entering your office building with your badge. Someone behind you says:

"Oh, I forgot my badge! Can you hold the door? I work in accounting."

What's the best response?

A) Hold the door to be polite
B) Tell them to use the visitor entrance
C) Let them in if they seem trustworthy
D) Ignore them and let the door close`,hints:["Security protocols exist for a reason","Attackers exploit politeness","This is called tailgating or piggybacking","Visitor entrance provides proper verification","The flag is FLAG{B}"],answer:"B",flag:"FLAG{B}",explanation:"Politely direct them to the visitor entrance where they can get a temporary badge. Tailgating is a common physical security breach. Don't let politeness override security."},{id:"social-4",title:"USB Baiting",difficulty:"Hard",points:25,description:"Attackers sometimes leave infected USB drives in public places, hoping curious people will plug them in.",learningObjective:"Understand the risks of unknown physical media and social engineering tactics.",vocabularyTerms:["social-engineering","malware","exploit"],prompt:`You find a USB drive in the parking lot labeled "Executive Salaries 2024".

What should you do?

A) Plug it into your work computer to find the owner
B) Plug it into your personal computer to check contents
C) Take it to IT/Security without plugging it in
D) Throw it away`,hints:["USB drives can contain malware","The label is designed to make you curious","Never plug unknown devices into any computer","IT/Security has safe ways to examine it","Options C and D are both safe, but C is most helpful","The flag is FLAG{C}"],answer:"C",flag:"FLAG{C}",explanation:'This is "USB baiting". The label exploits curiosity. Never plug unknown USB drives into any computer. Report to IT/Security who can safely examine it in an isolated environment.'}]},jT=()=>Object.values(cr).flat(),bT=t=>jT().find(e=>e.id===t),Js={encryption:{term:"Encryption",definition:"The process of converting plaintext into ciphertext to protect data from unauthorized access.",category:"Cryptography"},decryption:{term:"Decryption",definition:"The process of converting ciphertext back into plaintext using a key or algorithm.",category:"Cryptography"},cipher:{term:"Cipher",definition:"An algorithm used to perform encryption or decryption.",category:"Cryptography"},plaintext:{term:"Plaintext",definition:"Unencrypted, readable data.",category:"Cryptography"},ciphertext:{term:"Ciphertext",definition:"Encrypted data that appears as random text.",category:"Cryptography"},"caesar-cipher":{term:"Caesar Cipher",definition:"A substitution cipher where each letter is shifted by a fixed number of positions in the alphabet.",category:"Cryptography"},base64:{term:"Base64",definition:"An encoding scheme that converts binary data into ASCII text format.",category:"Cryptography"},hash:{term:"Hash",definition:"A one-way function that converts data into a fixed-size string of characters.",category:"Cryptography"},firewall:{term:"Firewall",definition:"A security system that monitors and controls incoming and outgoing network traffic.",category:"Network Security"},port:{term:"Port",definition:"A virtual endpoint for network communications, identified by a number (0-65535).",category:"Network Security"},"ip-address":{term:"IP Address",definition:"A unique numerical label assigned to each device on a network.",category:"Network Security"},packet:{term:"Packet",definition:"A unit of data transmitted over a network.",category:"Network Security"},protocol:{term:"Protocol",definition:"A set of rules governing how data is transmitted between devices.",category:"Network Security"},phishing:{term:"Phishing",definition:"A social engineering attack that tricks users into revealing sensitive information.",category:"Social Engineering"},"social-engineering":{term:"Social Engineering",definition:"Manipulating people into divulging confidential information or performing actions.",category:"Social Engineering"},"brute-force":{term:"Brute Force Attack",definition:"A trial-and-error method to guess passwords or encryption keys by trying all possibilities.",category:"Password Security"},"password-strength":{term:"Password Strength",definition:"A measure of how resistant a password is to guessing and brute-force attacks.",category:"Password Security"},"sql-injection":{term:"SQL Injection",definition:"A web security vulnerability that allows attackers to interfere with database queries.",category:"Web Security"},xss:{term:"Cross-Site Scripting (XSS)",definition:"A vulnerability that allows attackers to inject malicious scripts into web pages.",category:"Web Security"},vulnerability:{term:"Vulnerability",definition:"A weakness in a system that can be exploited by attackers.",category:"General"},exploit:{term:"Exploit",definition:"Code or technique that takes advantage of a vulnerability.",category:"General"},malware:{term:"Malware",definition:"Malicious software designed to damage, disrupt, or gain unauthorized access to systems.",category:"General"},authentication:{term:"Authentication",definition:"The process of verifying the identity of a user or system.",category:"General"},authorization:{term:"Authorization",definition:"The process of determining what resources a user can access.",category:"General"},"zero-day":{term:"Zero-Day Vulnerability",definition:"A previously unknown security flaw that has no available patch.",category:"General"},"port-scan":{term:"Port Scan",definition:"A technique used to discover open ports and services on a network by probing multiple ports systematically.",category:"Network Security"},ddos:{term:"DDoS (Distributed Denial of Service)",definition:"An attack that overwhelms a target system with traffic from multiple sources, making it unavailable to legitimate users.",category:"Network Security"},ids:{term:"IDS (Intrusion Detection System)",definition:"A security system that monitors network traffic for suspicious activity and alerts administrators.",category:"Network Security"},ips:{term:"IPS (Intrusion Prevention System)",definition:"A security system that monitors network traffic and can automatically block detected threats.",category:"Network Security"},tcp:{term:"TCP (Transmission Control Protocol)",definition:"A connection-oriented protocol that ensures reliable, ordered delivery of data between applications.",category:"Network Security"},udp:{term:"UDP (User Datagram Protocol)",definition:"A connectionless protocol that provides fast but unreliable data transmission.",category:"Network Security"},"syn-flood":{term:"SYN Flood",definition:"A denial-of-service attack that exploits the TCP handshake by sending many SYN requests without completing connections.",category:"Network Security"},"data-exfiltration":{term:"Data Exfiltration",definition:"The unauthorized transfer of data from a computer or network, often by malware or attackers.",category:"Network Security"},"dns-tunneling":{term:"DNS Tunneling",definition:"A technique that encodes data within DNS queries and responses to bypass security controls or exfiltrate data.",category:"Network Security"},"network-traffic":{term:"Network Traffic",definition:"The data that moves across a network at any given time, including all packets sent and received.",category:"Network Security"},"packet-capture":{term:"Packet Capture",definition:"The process of intercepting and logging network packets for analysis and troubleshooting.",category:"Network Security"},"tcp-flags":{term:"TCP Flags",definition:"Control bits in TCP headers (SYN, ACK, FIN, RST, PSH, URG) that manage connection states and data flow.",category:"Network Security"},"threat-detection":{term:"Threat Detection",definition:"The process of identifying potential security threats through monitoring and analysis of system or network activity.",category:"Network Security"},"incident-response":{term:"Incident Response",definition:"The organized approach to addressing and managing security breaches or attacks.",category:"Network Security"}},LT={cryptography:["Understand the difference between encryption and encoding","Learn common classical ciphers and how to break them","Recognize various encoding schemes like Base64 and hexadecimal","Understand the purpose of cryptographic hashing","Learn about symmetric vs asymmetric encryption"],network:["Identify common network ports and their associated services","Understand how firewalls protect networks","Learn about network protocols (HTTP, HTTPS, FTP, SSH)","Recognize suspicious network traffic patterns","Understand IP addresses and network addressing"],password:["Learn what makes a strong password","Understand common password attacks (brute force, dictionary)","Recognize password patterns and weaknesses","Learn about password managers and two-factor authentication","Understand password hashing and salting"],web:["Identify common web vulnerabilities (XSS, SQL injection)","Understand how to sanitize user input","Learn about secure coding practices","Recognize malicious URLs and phishing attempts","Understand HTTPS and SSL/TLS"],social:["Recognize social engineering tactics","Understand phishing email indicators","Learn about pretexting and manipulation techniques","Develop critical thinking for security awareness","Understand the human element in cybersecurity"],"network-monitor":["Analyze network traffic patterns in real-time","Identify malicious packets and suspicious activity","Recognize common attack signatures (port scans, brute force, SQL injection)","Understand defensive actions like IP blocking and firewall rules","Practice incident detection and response procedures"]},de={PORT_SCAN:"port-scan",BRUTE_FORCE_SSH:"brute-force-ssh",SQL_INJECTION:"sql-injection",DATA_EXFILTRATION:"data-exfiltration",DDOS:"ddos",DNS_TUNNELING:"dns-tunneling"},Gy={[de.PORT_SCAN]:{name:"Port Scan",description:"An attacker is scanning multiple ports on your system to find open services.",severity:"medium",indicators:["Single source IP connecting to many different ports","Sequential or rapid port probing","SYN packets without completing handshake"],mitigation:"Block the scanning IP address"},[de.BRUTE_FORCE_SSH]:{name:"SSH Brute Force",description:"An attacker is attempting to guess SSH credentials through repeated login attempts.",severity:"high",indicators:["Multiple failed SSH authentication attempts","Same source IP with repeated connections to port 22","Various username attempts (root, admin, user)"],mitigation:"Block the attacking IP and implement rate limiting"},[de.SQL_INJECTION]:{name:"SQL Injection",description:"An attacker is attempting to inject malicious SQL code through web requests.",severity:"critical",indicators:["HTTP requests containing SQL keywords (SELECT, UNION, DROP)","Special characters in URL parameters (', --, ;)","Attempts to manipulate database queries"],mitigation:"Block the source IP and review web application security"},[de.DATA_EXFILTRATION]:{name:"Data Exfiltration",description:"Large amounts of data are being transferred to an external IP address.",severity:"critical",indicators:["Unusually large outbound data transfers","Data sent to unfamiliar external IPs","Sustained high-bandwidth connections"],mitigation:"Block the external IP and investigate compromised system"},[de.DDOS]:{name:"DDoS Attack",description:"Multiple sources are flooding the network with traffic to overwhelm services.",severity:"high",indicators:["High volume of traffic from many sources","Repeated requests to same destination","Network bandwidth saturation"],mitigation:"Enable rate limiting and block attacking IPs"},[de.DNS_TUNNELING]:{name:"DNS Tunneling",description:"Data is being exfiltrated through encoded DNS queries.",severity:"high",indicators:["Unusual DNS query patterns","Long subdomain names with encoded data","High volume of TXT record queries"],mitigation:"Block suspicious DNS queries and investigate endpoint"}},OT={[de.PORT_SCAN]:{windowSeconds:10,thresholds:{uniquePortsFromSameSource:5,packetsPerSecond:3},check:(t,e=1e4)=>{const n=Date.now(),r=t.filter(i=>new Date(i.timestamp).getTime()>n-e),s={};r.forEach(i=>{s[i.sourceIP]||(s[i.sourceIP]=new Set),s[i.sourceIP].add(i.destPort)});for(const[i,a]of Object.entries(s))if(a.size>=5)return{detected:!0,attackerIP:i,evidence:`${a.size} ports scanned`};return{detected:!1}}},[de.BRUTE_FORCE_SSH]:{windowSeconds:30,thresholds:{failedAttemptsFromSameSource:5},check:(t,e=3e4)=>{const n=Date.now(),r=t.filter(i=>new Date(i.timestamp).getTime()>n-e&&i.protocol==="SSH"&&i.info.toLowerCase().includes("failed")),s={};r.forEach(i=>{s[i.sourceIP]=(s[i.sourceIP]||0)+1});for(const[i,a]of Object.entries(s))if(a>=5)return{detected:!0,attackerIP:i,evidence:`${a} failed SSH attempts`};return{detected:!1}}},[de.SQL_INJECTION]:{patterns:[/('|"|;|--|\/\*|\*\/|union|select|insert|update|delete|drop|exec|execute)/i,/(or|and)\s+['"]?\d+['"]?\s*=\s*['"]?\d+/i,/'\s*(or|and)\s*'[^']*'\s*=\s*'/i],check:t=>{const e=t.filter(n=>n.protocol==="HTTP"&&n.isMalicious&&n.attackType===de.SQL_INJECTION);return e.length>=3?{detected:!0,attackerIP:e[0].sourceIP,evidence:`${e.length} SQL injection attempts`}:{detected:!1}}},[de.DATA_EXFILTRATION]:{thresholds:{bytesPerWindow:1e5,windowSeconds:30},check:(t,e=3e4)=>{const n=Date.now(),r=t.filter(i=>new Date(i.timestamp).getTime()>n-e),s={};r.forEach(i=>{!i.destIP.startsWith("192.168.")&&!i.destIP.startsWith("10.")&&!i.destIP.startsWith("172.16.")&&(s[i.destIP]=(s[i.destIP]||0)+i.length)});for(const[i,a]of Object.entries(s))if(a>=1e5)return{detected:!0,attackerIP:i,evidence:`${Math.round(a/1024)}KB exfiltrated`};return{detected:!1}}},[de.DNS_TUNNELING]:{check:t=>{const e=t.filter(n=>n.protocol==="DNS"&&n.isMalicious&&n.attackType===de.DNS_TUNNELING);return e.length>=3?{detected:!0,attackerIP:e[0].sourceIP,evidence:`${e.length} suspicious DNS queries`}:{detected:!1}}}},Ut=[{id:"port-scan-basic",name:"Port Scan Detection",difficulty:"Easy",points:25,description:"A suspicious IP address is probing your network, scanning multiple ports to find vulnerable services. Identify and block the attacker.",learningObjective:"Learn to recognize port scanning behavior by observing sequential port connections from a single source.",attackType:de.PORT_SCAN,duration:60,successCriteria:{mustBlockAttacker:!0,mustIdentifyAttackType:!0,minMaliciousPacketsFlagged:3},hints:["Look for a single IP connecting to many different ports","Port scanners often use sequential port numbers","The attacker IP will have connections to ports like 21, 22, 23, 80, 443, etc."],backgroundTraffic:{packetsPerSecond:2,protocols:["HTTP","HTTPS","DNS"]},attackConfig:{startDelay:5,packetsPerSecond:3,attackerIP:"185.220.101.42",targetPorts:[21,22,23,25,80,110,143,443,445,3389,8080,8443]}},{id:"ssh-brute-force",name:"SSH Brute Force Attack",difficulty:"Medium",points:35,description:"An attacker is attempting to gain unauthorized access by guessing SSH credentials. Multiple failed login attempts indicate a brute force attack in progress.",learningObjective:"Understand how brute force attacks work and learn to identify repeated authentication failures.",attackType:de.BRUTE_FORCE_SSH,duration:90,successCriteria:{mustBlockAttacker:!0,mustIdentifyAttackType:!0,minMaliciousPacketsFlagged:5},hints:["Watch for repeated SSH connections from the same IP","Failed authentication messages are a key indicator","Brute force attacks try common usernames: root, admin, user"],backgroundTraffic:{packetsPerSecond:3,protocols:["HTTP","HTTPS","DNS","TCP"]},attackConfig:{startDelay:8,packetsPerSecond:2,attackerIP:"198.51.100.77",targetPort:22,usernames:["root","admin","administrator","user","guest","test"]}},{id:"sql-injection-probe",name:"SQL Injection Probing",difficulty:"Medium",points:40,description:"Malicious HTTP requests containing SQL injection payloads are targeting your web application. These attacks attempt to manipulate database queries.",learningObjective:"Learn to identify SQL injection patterns in HTTP requests and understand common injection techniques.",attackType:de.SQL_INJECTION,duration:90,successCriteria:{mustBlockAttacker:!0,mustIdentifyAttackType:!0,minMaliciousPacketsFlagged:4},hints:[`Look for special characters in HTTP requests: ' " ; --`,"SQL keywords like UNION, SELECT, DROP are red flags","Check URL parameters and POST data for suspicious patterns"],backgroundTraffic:{packetsPerSecond:4,protocols:["HTTP","HTTPS","DNS"]},attackConfig:{startDelay:6,packetsPerSecond:1.5,attackerIP:"203.0.113.99",targetPort:80}},{id:"data-exfiltration",name:"Data Exfiltration",difficulty:"Medium",points:40,description:"A compromised internal system is sending large amounts of data to an external IP. This could indicate stolen data being transferred out of the network.",learningObjective:"Learn to detect unusual outbound traffic patterns that may indicate data theft.",attackType:de.DATA_EXFILTRATION,duration:120,successCriteria:{mustBlockAttacker:!0,mustIdentifyAttackType:!0,minMaliciousPacketsFlagged:5},hints:["Watch for unusually large packet sizes going outbound","The destination IP will be external (not 192.168.x.x or 10.x.x.x)","Look for sustained transfers to the same external destination"],backgroundTraffic:{packetsPerSecond:3,protocols:["HTTP","HTTPS","DNS","TCP"]},attackConfig:{startDelay:10,packetsPerSecond:2,attackerIP:"45.33.32.156",sourceIP:"192.168.1.105",minPacketSize:5e3,maxPacketSize:15e3}}],MT=()=>Ut.reduce((t,e)=>t+e.points,0),FT=()=>({total:Ut.length,easy:Ut.filter(t=>t.difficulty==="Easy").length,medium:Ut.filter(t=>t.difficulty==="Medium").length,hard:Ut.filter(t=>t.difficulty==="Hard").length,totalPoints:MT()}),UT=({completedChallenges:t,completedScenarios:e=[],onSelectCategory:n,onSelectNetworkMonitor:r})=>{const s=Object.values(cr).flat().length,i=t.reduce((u,d)=>{const p=Object.values(cr).flat().find(v=>v.id===d);return u+((p==null?void 0:p.points)||0)},0),a=[{id:"cryptography",name:"Cryptography",icon:"",description:"Learn about encryption, ciphers, and secure communication",color:"#4caf50"},{id:"network",name:"Network Security",icon:"",description:"Understand network protocols, ports, and traffic analysis",color:"#2196f3"},{id:"password",name:"Password Security",icon:"",description:"Master password strength, hashing, and authentication",color:"#ff9800"},{id:"web",name:"Web Security",icon:"",description:"Explore web vulnerabilities and secure coding practices",color:"#9c27b0"},{id:"social",name:"Social Engineering",icon:"",description:"Recognize manipulation tactics and security awareness",color:"#f44336"}],l=u=>{const d=cr[u]||[],p=d.filter(v=>t.includes(v.id)).length;return{completed:p,total:d.length,percentage:d.length>0?p/d.length*100:0}};return h.jsxs("div",{className:"dashboard",children:[h.jsxs("div",{className:"welcome-section",children:[h.jsx("h1",{children:"Welcome to CyberEd Range"}),h.jsx("p",{children:"Master cybersecurity concepts through hands-on challenges! This platform is designed for high school students to learn essential security skills in a safe, educational environment."})]}),h.jsxs("div",{className:"stats",children:[h.jsxs("div",{className:"stat-card",children:[h.jsx("span",{className:"stat-value",children:t.length}),h.jsx("span",{className:"stat-label",children:"Challenges Completed"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("span",{className:"stat-value",children:s}),h.jsx("span",{className:"stat-label",children:"Total Challenges"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("span",{className:"stat-value",children:i}),h.jsx("span",{className:"stat-label",children:"Points Earned"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsxs("span",{className:"stat-value",children:[s>0?Math.round(t.length/s*100):0,"%"]}),h.jsx("span",{className:"stat-label",children:"Overall Progress"})]})]}),h.jsx("h2",{style:{color:"#00ff88",marginTop:"2rem",marginBottom:"1rem"},children:"Challenge Categories"}),h.jsx("div",{className:"categories",children:a.map(u=>{const d=l(u.id);return h.jsxs("div",{className:"category-card",onClick:()=>n(u.id),children:[h.jsx("div",{className:"category-icon",children:u.icon}),h.jsx("h3",{children:u.name}),h.jsx("p",{style:{color:"#b0b0b0",marginBottom:"1rem"},children:u.description}),h.jsxs("p",{style:{fontSize:"0.9rem",color:"#e0e0e0"},children:[d.completed," / ",d.total," challenges completed"]}),h.jsx("div",{className:"category-progress",children:h.jsx("div",{className:"category-progress-bar",style:{width:`${d.percentage}%`}})})]},u.id)})}),h.jsx("h2",{style:{color:"#00ff88",marginTop:"2rem",marginBottom:"1rem"},children:"Interactive Labs"}),h.jsx("div",{className:"categories",children:h.jsxs("div",{className:"category-card",onClick:r,style:{borderColor:"rgba(0, 255, 136, 0.3)"},children:[h.jsx("div",{className:"category-icon",children:""}),h.jsx("h3",{children:"Network Monitor"}),h.jsx("p",{style:{color:"#b0b0b0",marginBottom:"1rem"},children:"Analyze simulated network traffic, detect cyber attacks in real-time, and practice defensive actions like a security analyst"}),h.jsxs("p",{style:{fontSize:"0.9rem",color:"#e0e0e0"},children:[e.length," / ",Ut.length," scenarios completed"]}),h.jsx("div",{className:"category-progress",children:h.jsx("div",{className:"category-progress-bar",style:{width:`${Ut.length>0?e.length/Ut.length*100:0}%`}})})]})}),h.jsxs("div",{className:"learning-objectives",style:{marginTop:"2rem"},children:[h.jsx("h3",{children:"What You'll Learn"}),h.jsxs("ul",{children:[h.jsx("li",{children:"Fundamental cybersecurity concepts and terminology"}),h.jsx("li",{children:"Common attack vectors and how to defend against them"}),h.jsx("li",{children:"Cryptography basics and secure communication"}),h.jsx("li",{children:"Web security vulnerabilities and secure coding practices"}),h.jsx("li",{children:"Social engineering tactics and security awareness"}),h.jsx("li",{children:"Network security and protocol analysis"})]})]})]})},BT=({category:t,completedChallenges:e,onSelectChallenge:n})=>{const r={cryptography:"Cryptography",network:"Network Security",password:"Password Security",web:"Web Security",social:"Social Engineering"},s=cr[t]||[];return h.jsxs("div",{children:[h.jsxs("h2",{style:{color:"#00ff88",marginBottom:"1rem"},children:[r[t]," Challenges"]}),h.jsxs("div",{className:"learning-objectives",children:[h.jsx("h3",{children:"Learning Objectives"}),h.jsx("ul",{children:(LT[t]||[]).map((i,a)=>h.jsx("li",{children:i},a))})]}),h.jsx("div",{className:"challenge-list",children:s.map(i=>{const a=e.includes(i.id);return h.jsxs("div",{className:`challenge-item ${a?"completed":""}`,onClick:()=>n(i.id),children:[h.jsxs("div",{className:"challenge-info",children:[h.jsx("h3",{children:i.title}),h.jsxs("p",{style:{color:"#b0b0b0",margin:"0.5rem 0"},children:[i.description.substring(0,120),"..."]}),h.jsxs("div",{className:"challenge-meta",children:[h.jsx("span",{className:`difficulty ${i.difficulty}`,children:i.difficulty}),h.jsxs("span",{className:"points",children:[i.points," points"]})]})]}),h.jsx("div",{className:"challenge-status",children:a?"":""})]},i.id)})})]})},zT=({challengeId:t,onComplete:e,onBack:n,isCompleted:r})=>{const[s,i]=$.useState(""),[a,l]=$.useState(!1),[u,d]=$.useState(null),[p,v]=$.useState(r),[y,T]=$.useState(null),C=bT(t);if(!C)return h.jsx("div",{children:"Challenge not found"});const R=()=>{var j,F;const S=s.trim().toUpperCase();[(j=C.answer)==null?void 0:j.toUpperCase(),(F=C.flag)==null?void 0:F.toUpperCase()].filter(Boolean).some(D=>S===D||S.includes(D))?(d({type:"success",message:"Correct! Well done!"}),v(!0),e(t,C.points)):d({type:"error",message:"Incorrect. Try again or check the hints!"})},b=S=>{T(y===S?null:S)};return h.jsxs("div",{className:"challenge-detail",children:[h.jsxs("div",{className:"challenge-header",children:[h.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:h.jsxs("div",{children:[h.jsx("h2",{children:C.title}),h.jsxs("div",{className:"challenge-meta",style:{marginTop:"1rem"},children:[h.jsx("span",{className:`difficulty ${C.difficulty}`,children:C.difficulty}),h.jsxs("span",{className:"points",children:[C.points," points"]}),r&&h.jsx("span",{style:{color:"#4caf50",fontWeight:"bold"},children:" Completed"})]})]})}),h.jsxs("div",{className:"learning-objective",children:[h.jsx("strong",{children:"Learning Objective:"})," ",C.learningObjective]}),h.jsx("p",{style:{marginTop:"1rem",lineHeight:"1.6"},children:C.description})]}),C.vocabularyTerms&&C.vocabularyTerms.length>0&&h.jsxs("div",{className:"vocabulary-section",children:[h.jsx("h3",{style:{color:"#00ff88",marginBottom:"0.5rem"},children:"Key Vocabulary"}),h.jsx("div",{className:"vocabulary-tags",children:C.vocabularyTerms.map(S=>{const E=Js[S];return E?h.jsx("div",{className:"vocab-tag",onClick:()=>b(S),style:{borderColor:y===S?"#00ff88":"transparent"},children:E.term},S):null})}),y&&Js[y]&&h.jsxs("div",{style:{background:"rgba(0, 255, 136, 0.1)",padding:"1rem",borderRadius:"5px",marginTop:"1rem",borderLeft:"4px solid #00ff88"},children:[h.jsx("strong",{style:{color:"#00ff88"},children:Js[y].term}),h.jsx("p",{style:{marginTop:"0.5rem"},children:Js[y].definition})]})]}),h.jsxs("div",{children:[h.jsx("h3",{style:{color:"#00ff88",marginBottom:"1rem"},children:"Challenge"}),h.jsx("div",{className:"challenge-prompt",children:C.prompt})]}),C.hints&&C.hints.length>0&&h.jsxs("div",{className:"hints-section",children:[h.jsx("button",{className:"hints-toggle",onClick:()=>l(!a),children:a?" Hide Hints":" Show Hints"}),a&&h.jsx("ul",{className:"hints-list",children:C.hints.map((S,E)=>h.jsxs("li",{className:"hint-item",children:["Hint ",E+1,": ",S]},E))})]}),!r&&h.jsxs("div",{className:"answer-section",children:[h.jsx("h3",{style:{color:"#00ff88",marginBottom:"1rem"},children:"Submit Your Answer"}),h.jsx("input",{type:"text",className:"answer-input",placeholder:"Enter your answer or flag here...",value:s,onChange:S=>i(S.target.value),onKeyPress:S=>S.key==="Enter"&&R()}),h.jsx("button",{className:"submit-btn",onClick:R,disabled:!s.trim(),children:"Submit Answer"})]}),u&&h.jsx("div",{className:`feedback ${u.type}`,children:u.message}),p&&C.explanation&&h.jsxs("div",{className:"explanation",children:[h.jsx("h3",{style:{color:"#00ff88",marginBottom:"0.5rem"},children:"Explanation"}),h.jsx("p",{children:C.explanation})]}),h.jsx("button",{className:"back-btn",onClick:n,children:" Back to Challenges"})]})},HT=()=>{const[t,e]=$.useState("all"),n=["all","Cryptography","Network Security","Password Security","Web Security","Social Engineering","General"],r=Object.values(Js).filter(s=>t==="all"?!0:s.category===t);return h.jsxs("div",{className:"vocabulary-page",children:[h.jsx("h2",{style:{color:"#00ff88",marginBottom:"1rem"},children:"Cybersecurity Vocabulary"}),h.jsx("p",{style:{marginBottom:"2rem",color:"#b0b0b0"},children:"Build your cybersecurity knowledge by learning these key terms and concepts."}),h.jsx("div",{className:"vocab-categories",children:n.map(s=>h.jsx("button",{className:`vocab-category-btn ${t===s?"active":""}`,onClick:()=>e(s),children:s==="all"?"All Terms":s},s))}),h.jsxs("div",{style:{marginTop:"1rem",color:"#b0b0b0"},children:["Showing ",r.length," term",r.length!==1?"s":""]}),h.jsx("div",{className:"vocab-list",children:r.map((s,i)=>h.jsxs("div",{className:"vocab-card",children:[h.jsx("span",{className:"vocab-category",children:s.category}),h.jsx("h3",{children:s.term}),h.jsx("p",{style:{color:"#e0e0e0",marginTop:"0.5rem"},children:s.definition})]},i))}),r.length===0&&h.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"#b0b0b0"},children:"No vocabulary terms found for this category."})]})},Wy={TCP:{name:"TCP",color:"#4fc3f7",port:null},UDP:{name:"UDP",color:"#81c784",port:null},HTTP:{name:"HTTP",color:"#64b5f6",port:80},HTTPS:{name:"HTTPS",color:"#7986cb",port:443},SSH:{name:"SSH",color:"#ffb74d",port:22},DNS:{name:"DNS",color:"#ba68c8",port:53},FTP:{name:"FTP",color:"#f06292",port:21},SMTP:{name:"SMTP",color:"#4db6ac",port:25},ICMP:{name:"ICMP",color:"#90a4ae",port:null}},Wt={SYN:"SYN",ACK:"ACK",PSH:"PSH","SYN-ACK":"SYN-ACK"},Np=[{prefix:"192.168.1.",range:[1,254]},{prefix:"10.0.0.",range:[1,254]},{prefix:"172.16.0.",range:[1,254]}],Rp=["203.0.113.","198.51.100.","185.220.101.","45.33.32.","104.21.35.","8.8.8."],Dp=[80,443,53,22,21,25,3389,8080,3306,5432],xa={normal:["GET /index.html HTTP/1.1","GET /api/users HTTP/1.1","POST /api/login HTTP/1.1","GET /images/logo.png HTTP/1.1","GET /css/styles.css HTTP/1.1","GET /js/app.js HTTP/1.1","GET /api/products HTTP/1.1","POST /api/cart HTTP/1.1","GET /favicon.ico HTTP/1.1","GET /api/status HTTP/1.1"],sqlInjection:["GET /api/users?id=1' OR '1'='1 HTTP/1.1","POST /login?user=admin'-- HTTP/1.1","GET /search?q='; DROP TABLE users;-- HTTP/1.1","GET /api/product?id=1 UNION SELECT * FROM passwords HTTP/1.1","POST /api/auth?username=admin' OR 1=1-- HTTP/1.1","GET /page?id=1; SELECT * FROM users HTTP/1.1","GET /api/data?filter=' OR ''=' HTTP/1.1"]},Na={normal:["A google.com","A microsoft.com","A github.com","AAAA cloudflare.com","MX company.com","A cdn.example.com","A api.service.com","A www.example.org"],tunneling:["TXT aGVsbG8gd29ybGQ.evil.com","TXT ZGF0YWV4ZmlsdHJhdGlvbg.malware.net","TXT c2VjcmV0LWRhdGE.suspicious.io","A cmd-exec-001.c2server.com","TXT YmFzZTY0ZW5jb2RlZA.tunnel.net"]},Vp={normal:["SSH-2.0-OpenSSH_8.4 connection established","Key exchange: ECDH SHA256","User authentication successful","Session opened for user admin"]},jp={tcp:{min:40,max:1500},udp:{min:28,max:65535},http:{min:200,max:8e3},dns:{min:28,max:512},ssh:{min:40,max:2e3},icmp:{min:28,max:1500}},vs=(t={})=>({id:Math.random().toString(36).substr(2,9),timestamp:new Date().toISOString(),sourceIP:"0.0.0.0",destIP:"0.0.0.0",sourcePort:0,destPort:0,protocol:"TCP",length:0,flags:"",info:"",payload:"",isMalicious:!1,attackType:null,flaggedByUser:!1,...t}),vc=()=>{const t=Np[Math.floor(Math.random()*Np.length)],e=Math.floor(Math.random()*(t.range[1]-t.range[0]))+t.range[0];return t.prefix+e},$T=()=>{const t=Rp[Math.floor(Math.random()*Rp.length)],e=Math.floor(Math.random()*254)+1;return t+e},Ft=(t=!0)=>t?Dp[Math.floor(Math.random()*Dp.length)]:Math.floor(Math.random()*65535)+1,Wi=(t="tcp")=>{const e=jp[t.toLowerCase()]||jp.tcp;return Math.floor(Math.random()*(e.max-e.min))+e.min};let bp=0;const _s=()=>(bp++,`pkt-${Date.now()}-${bp}`),qT=(t=["HTTP","HTTPS","DNS","TCP"])=>{const e=t[Math.floor(Math.random()*t.length)],n=vc(),r=Math.random()>.3?$T():vc();let s,i,a,l;switch(e){case"HTTP":s=80,i=Ft(!1),a=xa.normal[Math.floor(Math.random()*xa.normal.length)],l=Wt.ACK;break;case"HTTPS":s=443,i=Ft(!1),a="TLS Application Data",l=Wt.ACK;break;case"DNS":s=53,i=Ft(!1),a=Na.normal[Math.floor(Math.random()*Na.normal.length)],l="";break;case"SSH":s=22,i=Ft(!1),a=Vp.normal[Math.floor(Math.random()*Vp.normal.length)],l=Wt.ACK;break;default:s=Ft(!0),i=Ft(!1),a="TCP segment",l=[Wt.ACK,Wt.PSH,Wt["SYN-ACK"]][Math.floor(Math.random()*3)]}return vs({id:_s(),timestamp:new Date().toISOString(),sourceIP:n,destIP:r,sourcePort:i,destPort:s,protocol:e,length:Wi(e.toLowerCase()),flags:l,info:a,payload:"",isMalicious:!1,attackType:null})},GT=(t,e,n)=>vs({id:_s(),timestamp:new Date().toISOString(),sourceIP:t,destIP:e,sourcePort:Ft(!1),destPort:n,protocol:"TCP",length:Wi("tcp"),flags:Wt.SYN,info:`SYN scan to port ${n}`,payload:"",isMalicious:!0,attackType:de.PORT_SCAN}),WT=(t,e,n)=>{const r=[`Authentication failed for ${n}`,`Invalid password for ${n}`,`Failed password for ${n} from ${t}`],s=r[Math.floor(Math.random()*r.length)];return vs({id:_s(),timestamp:new Date().toISOString(),sourceIP:t,destIP:e,sourcePort:Ft(!1),destPort:22,protocol:"SSH",length:Wi("ssh"),flags:Wt.ACK,info:s,payload:`SSH-2.0-OpenSSH_7.9 [AUTH FAIL: ${n}]`,isMalicious:!0,attackType:de.BRUTE_FORCE_SSH})},QT=(t,e)=>{const n=xa.sqlInjection[Math.floor(Math.random()*xa.sqlInjection.length)];return vs({id:_s(),timestamp:new Date().toISOString(),sourceIP:t,destIP:e,sourcePort:Ft(!1),destPort:80,protocol:"HTTP",length:Wi("http"),flags:Wt.PSH,info:n,payload:n,isMalicious:!0,attackType:de.SQL_INJECTION})},KT=(t,e,n=5e3,r=15e3)=>{const s=Math.floor(Math.random()*(r-n))+n;return vs({id:_s(),timestamp:new Date().toISOString(),sourceIP:t,destIP:e,sourcePort:Ft(!1),destPort:443,protocol:"HTTPS",length:s,flags:Wt.PSH,info:`Large outbound transfer (${Math.round(s/1024)}KB)`,payload:`[Encrypted data: ${s} bytes]`,isMalicious:!0,attackType:de.DATA_EXFILTRATION})},YT=(t,e)=>{const n=Na.tunneling[Math.floor(Math.random()*Na.tunneling.length)];return vs({id:_s(),timestamp:new Date().toISOString(),sourceIP:t,destIP:e,sourcePort:Ft(!1),destPort:53,protocol:"DNS",length:Wi("dns"),flags:"",info:n,payload:n,isMalicious:!0,attackType:de.DNS_TUNNELING})};class XT{constructor(e){this.scenario=e,this.isRunning=!1,this.attackStarted=!1,this.attackPortIndex=0,this.attackUsernameIndex=0,this.elapsedTime=0,this.targetIP=vc(),this.blockedIPs=new Set}start(){this.isRunning=!0,this.attackStarted=!1,this.elapsedTime=0}stop(){this.isRunning=!1}blockIP(e){this.blockedIPs.add(e)}unblockIP(e){this.blockedIPs.delete(e)}isIPBlocked(e){return this.blockedIPs.has(e)}generatePackets(e){if(!this.isRunning)return[];this.elapsedTime+=e;const n=[],{backgroundTraffic:r,attackConfig:s}=this.scenario,i=Math.round(r.packetsPerSecond*e);for(let a=0;a<i;a++)n.push(qT(r.protocols));if(this.elapsedTime>=s.startDelay&&(this.attackStarted=!0),this.attackStarted&&!this.isIPBlocked(s.attackerIP)){const a=Math.round(s.packetsPerSecond*e);for(let l=0;l<a;l++){const u=this.generateAttackPacket();u&&n.push(u)}}return n}generateAttackPacket(){const{attackType:e,attackConfig:n}=this.scenario;switch(e){case de.PORT_SCAN:{const r=n.targetPorts[this.attackPortIndex%n.targetPorts.length];return this.attackPortIndex++,GT(n.attackerIP,this.targetIP,r)}case de.BRUTE_FORCE_SSH:{const r=n.usernames[this.attackUsernameIndex%n.usernames.length];return this.attackUsernameIndex++,WT(n.attackerIP,this.targetIP,r)}case de.SQL_INJECTION:return QT(n.attackerIP,this.targetIP);case de.DATA_EXFILTRATION:return KT(n.sourceIP,n.attackerIP,n.minPacketSize,n.maxPacketSize);case de.DNS_TUNNELING:return YT(n.sourceIP||this.targetIP,"8.8.8.8");default:return null}}getAttackerIP(){return this.scenario.attackConfig.attackerIP}}const JT=(t,e=3e4)=>{const n=[];for(const[r,s]of Object.entries(OT))if(s.check){const i=s.check(t,e);i.detected&&n.push({type:r,attackerIP:i.attackerIP,evidence:i.evidence,timestamp:new Date().toISOString(),...Gy[r]})}return n},ZT=(t,e)=>{let n=0;const r=[],s=t.flaggedPackets.filter(d=>d.isMalicious),i=t.flaggedPackets.filter(d=>!d.isMalicious);if(s.length>0){const d=s.length*5;n+=d,r.push({action:"Correctly flagged malicious packets",count:s.length,points:d})}if(i.length>0){const d=i.length*2;n-=d,r.push({action:"False positive flags (penalty)",count:i.length,points:-d})}t.identifiedAttackType===e.attackType&&(n+=15,r.push({action:"Correctly identified attack type",count:1,points:15}));const a=e.attackConfig.attackerIP,l=t.blockedIPs.includes(a),u=t.blockedIPs.filter(d=>d!==a);if(l&&(n+=10,r.push({action:"Blocked attacker IP",count:1,points:10})),u.length>0){const d=u.length*5;n-=d,r.push({action:"Incorrectly blocked innocent IP (penalty)",count:u.length,points:-d})}return t.completedUnderTimeLimit&&n>0&&(n+=5,r.push({action:"Completed under time limit",count:1,points:5})),{total:Math.max(0,n),maxPossible:e.points,breakdown:r,passed:n>=e.points*.6}},eE=(t,e,n)=>{const r=e.successCriteria,s={allMet:!0,details:[]};if(r.mustBlockAttacker){const i=t.blockedIPs.includes(e.attackConfig.attackerIP);s.details.push({criterion:"Block attacker IP",met:i,description:i?"Attacker IP blocked":"Attacker IP not blocked"}),i||(s.allMet=!1)}if(r.mustIdentifyAttackType){const i=t.identifiedAttackType===e.attackType;s.details.push({criterion:"Identify attack type",met:i,description:i?"Attack type correctly identified":"Attack type not identified"}),i||(s.allMet=!1)}if(r.minMaliciousPacketsFlagged){const i=t.flaggedPackets.filter(l=>l.isMalicious).length,a=i>=r.minMaliciousPacketsFlagged;s.details.push({criterion:`Flag at least ${r.minMaliciousPacketsFlagged} malicious packets`,met:a,description:`Flagged ${i} malicious packets`}),a||(s.allMet=!1)}return s},Lp=t=>{switch(t){case"critical":return"#f44336";case"high":return"#ff9800";case"medium":return"#ffeb3b";case"low":return"#4caf50";default:return"#90a4ae"}},_c=t=>{var e;return((e=Gy[t])==null?void 0:e.name)||t},tE=({scenarios:t,completedScenarios:e,onSelectScenario:n})=>{const r=FT(),s=l=>e.includes(l),i=l=>l.toLowerCase(),a=()=>t.filter(l=>e.includes(l.id)).reduce((l,u)=>l+u.points,0);return h.jsxs("div",{className:"scenario-selector",children:[h.jsxs("div",{className:"scenario-stats",children:[h.jsxs("div",{className:"scenario-stat",children:[h.jsx("span",{className:"stat-value",children:e.length}),h.jsx("span",{className:"stat-label",children:"Completed"})]}),h.jsxs("div",{className:"scenario-stat",children:[h.jsx("span",{className:"stat-value",children:r.total}),h.jsx("span",{className:"stat-label",children:"Total Scenarios"})]}),h.jsxs("div",{className:"scenario-stat",children:[h.jsx("span",{className:"stat-value",children:a()}),h.jsx("span",{className:"stat-label",children:"Points Earned"})]}),h.jsxs("div",{className:"scenario-stat",children:[h.jsx("span",{className:"stat-value",children:r.totalPoints}),h.jsx("span",{className:"stat-label",children:"Total Points"})]})]}),h.jsx("div",{className:"scenario-grid",children:t.map(l=>{const u=s(l.id);return h.jsxs("div",{className:`scenario-card ${u?"completed":""}`,onClick:()=>n(l),children:[u&&h.jsxs("div",{className:"completed-badge",children:[h.jsx("span",{className:"checkmark",children:""}),"Completed"]}),h.jsxs("div",{className:"scenario-header",children:[h.jsx("h3",{children:l.name}),h.jsx("span",{className:`difficulty ${i(l.difficulty)}`,children:l.difficulty})]}),h.jsx("p",{className:"scenario-description",children:l.description}),h.jsxs("div",{className:"scenario-meta",children:[h.jsxs("div",{className:"meta-item",children:[h.jsx("span",{className:"meta-icon",children:""}),h.jsxs("span",{children:[l.points," points"]})]}),h.jsxs("div",{className:"meta-item",children:[h.jsx("span",{className:"meta-icon",children:""}),h.jsxs("span",{children:[l.duration,"s"]})]})]}),h.jsxs("div",{className:"scenario-objective",children:[h.jsx("strong",{children:"Learning Objective:"}),h.jsx("p",{children:l.learningObjective})]}),h.jsx("button",{className:"btn-start",children:u?"Play Again":"Start Scenario"})]},l.id)})})]})},nE=({packets:t,selectedPacket:e,flaggedPackets:n,onSelectPacket:r,onFlagPacket:s})=>{const i=$.useRef(null),a=$.useRef(!0);$.useEffect(()=>{i.current&&a.current&&(i.current.scrollTop=i.current.scrollHeight)},[t]);const l=()=>{if(i.current){const{scrollTop:T,scrollHeight:C,clientHeight:R}=i.current;a.current=T+R>=C-50}},u=T=>new Date(T).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:2}),d=T=>{var C;return((C=Wy[T])==null?void 0:C.color)||"#90a4ae"},p=T=>n.some(C=>C.id===T.id),v=T=>{r(T)},y=(T,C)=>{T.stopPropagation(),s(C)};return h.jsxs("div",{className:"packet-list-container",children:[h.jsxs("div",{className:"packet-list-header",children:[h.jsx("h3",{children:"Live Traffic"}),h.jsxs("span",{className:"packet-count",children:[t.length," packets"]})]}),h.jsxs("div",{className:"packet-table-header",children:[h.jsx("div",{className:"col-flag"}),h.jsx("div",{className:"col-time",children:"Time"}),h.jsx("div",{className:"col-src",children:"Source"}),h.jsx("div",{className:"col-dst",children:"Destination"}),h.jsx("div",{className:"col-proto",children:"Protocol"}),h.jsx("div",{className:"col-len",children:"Length"}),h.jsx("div",{className:"col-info",children:"Info"})]}),h.jsxs("div",{className:"packet-list",ref:i,onScroll:l,children:[t.map(T=>h.jsxs("div",{className:`packet-row
              ${(e==null?void 0:e.id)===T.id?"selected":""}
              ${T.isMalicious?"malicious":""}
              ${p(T)?"flagged":""}
            `,onClick:()=>v(T),children:[h.jsx("div",{className:"col-flag",children:h.jsx("button",{className:`flag-btn ${p(T)?"flagged":""}`,onClick:C=>y(C,T),title:p(T)?"Unflag packet":"Flag as suspicious",children:p(T)?"":""})}),h.jsx("div",{className:"col-time",children:u(T.timestamp)}),h.jsxs("div",{className:"col-src",children:[h.jsx("span",{className:"ip",children:T.sourceIP}),h.jsxs("span",{className:"port",children:[":",T.sourcePort]})]}),h.jsxs("div",{className:"col-dst",children:[h.jsx("span",{className:"ip",children:T.destIP}),h.jsxs("span",{className:"port",children:[":",T.destPort]})]}),h.jsx("div",{className:"col-proto",children:h.jsx("span",{className:"protocol-badge",style:{backgroundColor:d(T.protocol)},children:T.protocol})}),h.jsx("div",{className:"col-len",children:T.length}),h.jsx("div",{className:"col-info",title:T.info,children:T.info})]},T.id)),t.length===0&&h.jsx("div",{className:"packet-list-empty",children:"Waiting for network traffic..."})]})]})},rE=({packet:t,onFlagPacket:e})=>{if(!t)return h.jsx("div",{className:"packet-detail",children:h.jsx("div",{className:"packet-detail-empty",children:"Select a packet to view details"})});const n=s=>new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,hour12:!1}),r=s=>{var i;return((i=Wy[s])==null?void 0:i.color)||"#90a4ae"};return h.jsxs("div",{className:"packet-detail",children:[h.jsxs("div",{className:"packet-detail-header",children:[h.jsx("h4",{children:"Packet Details"}),h.jsx("div",{className:"packet-detail-actions",children:h.jsx("button",{className:`flag-btn-lg ${t.flaggedByUser?"flagged":""}`,onClick:()=>e(t),children:t.flaggedByUser?" Flagged":" Flag as Suspicious"})})]}),h.jsxs("div",{className:"packet-detail-content",children:[h.jsxs("div",{className:"detail-section",children:[h.jsx("h5",{children:"General"}),h.jsxs("div",{className:"detail-grid",children:[h.jsxs("div",{className:"detail-item",children:[h.jsx("span",{className:"detail-label",children:"Packet ID"}),h.jsx("span",{className:"detail-value mono",children:t.id})]}),h.jsxs("div",{className:"detail-item",children:[h.jsx("span",{className:"detail-label",children:"Timestamp"}),h.jsx("span",{className:"detail-value",children:n(t.timestamp)})]}),h.jsxs("div",{className:"detail-item",children:[h.jsx("span",{className:"detail-label",children:"Protocol"}),h.jsx("span",{className:"detail-value protocol-badge",style:{backgroundColor:r(t.protocol)},children:t.protocol})]}),h.jsxs("div",{className:"detail-item",children:[h.jsx("span",{className:"detail-label",children:"Length"}),h.jsxs("span",{className:"detail-value",children:[t.length," bytes"]})]})]})]}),h.jsxs("div",{className:"detail-section",children:[h.jsx("h5",{children:"Source"}),h.jsxs("div",{className:"detail-grid",children:[h.jsxs("div",{className:"detail-item",children:[h.jsx("span",{className:"detail-label",children:"IP Address"}),h.jsx("span",{className:"detail-value mono",children:t.sourceIP})]}),h.jsxs("div",{className:"detail-item",children:[h.jsx("span",{className:"detail-label",children:"Port"}),h.jsx("span",{className:"detail-value",children:t.sourcePort})]})]})]}),h.jsxs("div",{className:"detail-section",children:[h.jsx("h5",{children:"Destination"}),h.jsxs("div",{className:"detail-grid",children:[h.jsxs("div",{className:"detail-item",children:[h.jsx("span",{className:"detail-label",children:"IP Address"}),h.jsx("span",{className:"detail-value mono",children:t.destIP})]}),h.jsxs("div",{className:"detail-item",children:[h.jsx("span",{className:"detail-label",children:"Port"}),h.jsx("span",{className:"detail-value",children:t.destPort})]})]})]}),t.flags&&h.jsxs("div",{className:"detail-section",children:[h.jsx("h5",{children:"TCP Flags"}),h.jsx("div",{className:"detail-item",children:h.jsx("span",{className:"detail-value mono",children:t.flags})})]}),h.jsxs("div",{className:"detail-section",children:[h.jsx("h5",{children:"Info"}),h.jsx("div",{className:"detail-item full-width",children:h.jsx("span",{className:"detail-value info-box mono",children:t.info})})]}),t.payload&&h.jsxs("div",{className:"detail-section",children:[h.jsx("h5",{children:"Payload"}),h.jsx("div",{className:"detail-item full-width",children:h.jsx("pre",{className:"payload-box",children:t.payload})})]}),t.isMalicious&&h.jsxs("div",{className:"detail-section malicious-warning",children:[h.jsx("h5",{children:"Warning"}),h.jsxs("div",{className:"warning-content",children:[h.jsx("span",{className:"warning-icon",children:""}),h.jsxs("div",{children:[h.jsx("strong",{children:"Potentially Malicious Traffic"}),t.attackType&&h.jsxs("p",{children:["Attack Type: ",_c(t.attackType)]})]})]})]})]})]})},sE=({alerts:t,onBlockIP:e})=>{const n=r=>new Date(r).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"});return h.jsxs("div",{className:"alert-panel",children:[h.jsxs("div",{className:"alert-panel-header",children:[h.jsx("h4",{children:"Threat Alerts"}),t.length>0&&h.jsx("span",{className:"alert-count",children:t.length})]}),h.jsx("div",{className:"alert-list",children:t.length===0?h.jsxs("div",{className:"alert-empty",children:[h.jsx("span",{className:"alert-empty-icon",children:""}),h.jsx("p",{children:"No threats detected yet"}),h.jsx("p",{className:"alert-empty-hint",children:"Monitoring network traffic..."})]}):t.map((r,s)=>h.jsxs("div",{className:"alert-item",style:{borderLeftColor:Lp(r.severity)},children:[h.jsxs("div",{className:"alert-header",children:[h.jsx("span",{className:"alert-severity",style:{backgroundColor:Lp(r.severity)},children:r.severity.toUpperCase()}),h.jsx("span",{className:"alert-time",children:n(r.timestamp)})]}),h.jsx("div",{className:"alert-title",children:r.name}),h.jsx("div",{className:"alert-description",children:r.description}),h.jsxs("div",{className:"alert-details",children:[h.jsxs("div",{className:"alert-evidence",children:[h.jsx("strong",{children:"Evidence:"})," ",r.evidence]}),h.jsxs("div",{className:"alert-ip",children:[h.jsx("strong",{children:"Source IP:"}),h.jsx("span",{className:"mono",children:r.attackerIP})]})]}),h.jsxs("div",{className:"alert-indicators",children:[h.jsx("strong",{children:"Indicators:"}),h.jsx("ul",{children:r.indicators.slice(0,2).map((i,a)=>h.jsx("li",{children:i},a))})]}),h.jsx("div",{className:"alert-actions",children:h.jsxs("button",{className:"btn-block",onClick:()=>e(r.attackerIP),children:["Block ",r.attackerIP]})})]},`${r.type}-${r.attackerIP}-${s}`))})]})},iE=({blockedIPs:t,attackTypes:e,identifiedAttackType:n,onBlockIP:r,onUnblockIP:s,onIdentifyAttack:i,hints:a})=>{const[l,u]=$.useState(""),[d,p]=$.useState(!1),v=y=>{y.preventDefault();const T=l.trim();T&&/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(T)&&(r(T),u(""))};return h.jsxs("div",{className:"action-panel",children:[h.jsxs("div",{className:"action-section",children:[h.jsx("h4",{children:"Identify Attack Type"}),h.jsx("p",{className:"action-hint",children:"What type of attack is occurring?"}),h.jsx("div",{className:"attack-type-grid",children:e.map(y=>h.jsx("button",{className:`attack-type-btn ${n===y?"selected":""}`,onClick:()=>i(y),children:_c(y)},y))}),n&&h.jsxs("div",{className:"selected-attack",children:["Selected: ",h.jsx("strong",{children:_c(n)})]})]}),h.jsxs("div",{className:"action-section",children:[h.jsx("h4",{children:"Firewall Rules"}),h.jsxs("form",{onSubmit:v,className:"block-ip-form",children:[h.jsx("input",{type:"text",placeholder:"Enter IP to block (e.g., 192.168.1.100)",value:l,onChange:y=>u(y.target.value),className:"ip-input"}),h.jsx("button",{type:"submit",className:"btn-block-submit",children:"Block IP"})]}),h.jsxs("div",{className:"blocked-ips",children:[h.jsxs("h5",{children:["Blocked IPs (",t.length,")"]}),t.length===0?h.jsx("p",{className:"no-blocked",children:"No IPs blocked yet"}):h.jsx("ul",{className:"blocked-ip-list",children:t.map(y=>h.jsxs("li",{className:"blocked-ip-item",children:[h.jsx("span",{className:"mono",children:y}),h.jsx("button",{className:"btn-unblock",onClick:()=>s(y),title:"Unblock this IP",children:""})]},y))})]})]}),h.jsxs("div",{className:"action-section hints-section",children:[h.jsxs("button",{className:"hints-toggle",onClick:()=>p(!d),children:[d?"Hide Hints":"Show Hints"," "]}),d&&a&&a.length>0&&h.jsx("div",{className:"hints-list",children:a.map((y,T)=>h.jsxs("div",{className:"hint-item",children:[h.jsx("span",{className:"hint-number",children:T+1}),h.jsx("span",{className:"hint-text",children:y})]},T))})]})]})},oE=({completedScenarios:t,onCompleteScenario:e,onBack:n})=>{const[r,s]=$.useState(null),[i,a]=$.useState(!1),[l,u]=$.useState(0),[d,p]=$.useState(!1),[v,y]=$.useState([]),[T,C]=$.useState(null),[R,b]=$.useState({total:0,perSecond:0,bytes:0}),[S,E]=$.useState([]),[k,j]=$.useState([]),[F,D]=$.useState(null),[_,g]=$.useState([]),[w,I]=$.useState(null),A=$.useRef(null),x=$.useRef(null),P=$.useRef(Date.now()),Ue=$.useCallback(H=>{s(H),u(H.duration),y([]),E([]),j([]),D(null),g([]),C(null),I(null),p(!1),A.current=new XT(H),A.current.start(),a(!0),P.current=Date.now()},[]),X=$.useCallback(()=>{a(!1),A.current&&A.current.stop(),x.current&&clearInterval(x.current)},[]),re=$.useCallback(()=>{if(X(),p(!0),!r)return;const H={flaggedPackets:S,blockedIPs:k,identifiedAttackType:F,completedUnderTimeLimit:l>0},Q=ZT(H,r),he=eE(H,r);I({score:Q,criteria:he,passed:Q.passed&&he.allMet}),Q.passed&&he.allMet&&e(r.id,Q.total)},[r,S,k,F,l,v,X,e]);$.useEffect(()=>{if(!(!i||!A.current))return x.current=setInterval(()=>{const H=Date.now(),Q=(H-P.current)/1e3;P.current=H;const he=A.current.generatePackets(Q);y(Te=>[...Te,...he].slice(-200)),u(Te=>{const Le=Math.max(0,Te-Q);return Le<=0&&re(),Le}),b(Te=>({total:Te.total+he.length,perSecond:Math.round(he.length/Q),bytes:Te.bytes+he.reduce((Le,Vt)=>Le+Vt.length,0)}))},200),()=>{x.current&&clearInterval(x.current)}},[i,re]),$.useEffect(()=>{if(!i||v.length<5)return;const H=JT(v,3e4);H.length>0&&g(Q=>{const he=H.filter(Te=>!Q.some(Le=>Le.type===Te.type&&Le.attackerIP===Te.attackerIP));return[...Q,...he]})},[v,i]);const ot=$.useCallback(H=>{E(Q=>Q.some(Te=>Te.id===H.id)?Q.filter(Te=>Te.id!==H.id):[...Q,H]),y(Q=>Q.map(he=>he.id===H.id?{...he,flaggedByUser:!he.flaggedByUser}:he))},[]),B=$.useCallback(H=>{A.current&&A.current.blockIP(H),j(Q=>Q.includes(H)?Q:[...Q,H])},[]),K=$.useCallback(H=>{A.current&&A.current.unblockIP(H),j(Q=>Q.filter(he=>he!==H))},[]),ee=$.useCallback(H=>{D(H)},[]),pe=$.useCallback(()=>{X(),s(null),y([]),I(null),p(!1)},[X]);return r?d&&w?h.jsxs("div",{className:"network-monitor",children:[h.jsxs("div",{className:"nm-header",children:[h.jsx("h2",{children:"Scenario Complete"}),h.jsx("h3",{children:r.name})]}),h.jsxs("div",{className:"nm-results",children:[h.jsxs("div",{className:`results-summary ${w.passed?"passed":"failed"}`,children:[h.jsx("div",{className:"result-icon",children:w.passed?"":""}),h.jsx("h3",{children:w.passed?"Mission Accomplished!":"Mission Failed"}),h.jsxs("div",{className:"result-score",children:["Score: ",w.score.total," / ",w.score.maxPossible," points"]})]}),h.jsxs("div",{className:"results-breakdown",children:[h.jsx("h4",{children:"Score Breakdown"}),w.score.breakdown.map((H,Q)=>h.jsxs("div",{className:`breakdown-item ${H.points>=0?"positive":"negative"}`,children:[h.jsx("span",{children:H.action}),h.jsxs("span",{className:"breakdown-count",children:["x",H.count]}),h.jsxs("span",{className:"breakdown-points",children:[H.points>=0?"+":"",H.points]})]},Q))]}),h.jsxs("div",{className:"results-criteria",children:[h.jsx("h4",{children:"Success Criteria"}),w.criteria.details.map((H,Q)=>h.jsxs("div",{className:`criteria-item ${H.met?"met":"not-met"}`,children:[h.jsx("span",{className:"criteria-icon",children:H.met?"":""}),h.jsx("span",{children:H.criterion}),h.jsx("span",{className:"criteria-desc",children:H.description})]},Q))]}),h.jsxs("div",{className:"results-actions",children:[h.jsx("button",{className:"btn-primary",onClick:()=>Ue(r),children:"Try Again"}),h.jsx("button",{className:"btn-secondary",onClick:pe,children:"Choose Another Scenario"})]})]})]}):h.jsxs("div",{className:"network-monitor",children:[h.jsxs("div",{className:"nm-header",children:[h.jsx("button",{className:"back-btn",onClick:pe,children:" Back"}),h.jsxs("div",{className:"nm-title-section",children:[h.jsx("h2",{children:r.name}),h.jsx("span",{className:`difficulty ${r.difficulty}`,children:r.difficulty})]}),h.jsxs("div",{className:"nm-stats",children:[h.jsxs("div",{className:"stat",children:[h.jsx("span",{className:"stat-value",children:Math.ceil(l)}),h.jsx("span",{className:"stat-label",children:"Time Left"})]}),h.jsxs("div",{className:"stat",children:[h.jsx("span",{className:"stat-value",children:R.total}),h.jsx("span",{className:"stat-label",children:"Packets"})]}),h.jsxs("div",{className:"stat",children:[h.jsxs("span",{className:"stat-value",children:[R.perSecond,"/s"]}),h.jsx("span",{className:"stat-label",children:"Rate"})]}),h.jsxs("div",{className:"stat",children:[h.jsxs("span",{className:"stat-value",children:[Math.round(R.bytes/1024),"KB"]}),h.jsx("span",{className:"stat-label",children:"Data"})]})]}),h.jsx("button",{className:"btn-complete",onClick:re,children:"Complete Mission"})]}),h.jsxs("div",{className:"nm-objective",children:[h.jsx("strong",{children:"Objective:"})," ",r.description]}),h.jsxs("div",{className:"nm-main-content",children:[h.jsx("div",{className:"nm-left-panel",children:h.jsx(nE,{packets:v,selectedPacket:T,flaggedPackets:S,onSelectPacket:C,onFlagPacket:ot})}),h.jsxs("div",{className:"nm-right-panel",children:[h.jsx(sE,{alerts:_,onBlockIP:B}),h.jsx(iE,{blockedIPs:k,attackTypes:Object.values(de),identifiedAttackType:F,onBlockIP:B,onUnblockIP:K,onIdentifyAttack:ee,hints:r.hints})]})]}),h.jsx("div",{className:"nm-bottom-panel",children:h.jsx(rE,{packet:T,onFlagPacket:ot})})]}):h.jsxs("div",{className:"network-monitor",children:[h.jsxs("div",{className:"nm-header",children:[h.jsx("button",{className:"back-btn",onClick:n,children:" Back to Dashboard"}),h.jsx("h2",{children:"Network Monitor"}),h.jsx("p",{className:"nm-subtitle",children:"Learn to detect and respond to cyber attacks in real-time"})]}),h.jsx(tE,{scenarios:Ut,completedScenarios:t,onSelectScenario:Ue})]})};var Op={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},aE=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Ky={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,p=i>>2,v=(i&3)<<4|l>>4;let y=(l&15)<<2|d>>6,T=d&63;u||(T=64,a||(y=64)),r.push(n[p],n[v],n[y],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Qy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const v=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||v==null)throw new lE;const y=i<<2|l>>4;if(r.push(y),d!==64){const T=l<<4&240|d>>2;if(r.push(T),v!==64){const C=d<<6&192|v;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uE=function(t){const e=Qy(t);return Ky.encodeByteArray(e,!0)},Ra=function(t){return uE(t).replace(/\./g,"")},cE=function(t){try{return Ky.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE=()=>hE().__FIREBASE_DEFAULTS__,fE=()=>{if(typeof process>"u"||typeof Op>"u")return;const t=Op.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&cE(t[1]);return e&&JSON.parse(e)},Fh=()=>{try{return dE()||fE()||pE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mE=t=>{var e,n;return(n=(e=Fh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},gE=t=>{const e=mE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Yy=()=>{var t;return(t=Fh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ra(JSON.stringify(n)),Ra(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wE(){var t;const e=(t=Fh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TE(){return!wE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function EE(){try{return typeof indexedDB=="object"}catch{return!1}}function SE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="FirebaseError";class ws extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=IE,Object.setPrototypeOf(this,ws.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xy.prototype.create)}}class Xy{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?PE(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new ws(s,l,r)}}function PE(t,e){return t.replace(AE,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const AE=/\{\$([^}]+)}/g;function wc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Mp(i)&&Mp(a)){if(!wc(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Mp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t){return t&&t._delegate?t._delegate:t}class Vi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yE;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xE(e))try{this.getOrInitializeService({instanceIdentifier:rr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=rr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rr){return this.instances.has(e)}getOptions(e=rr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:CE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=rr){return this.component?this.component.multipleInstances?e:rr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CE(t){return t===rr?void 0:t}function xE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const RE={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},DE=ie.INFO,VE={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},jE=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=VE[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jy{constructor(e){this.name=e,this._logLevel=DE,this._logHandler=jE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const bE=(t,e)=>e.some(n=>t instanceof n);let Fp,Up;function LE(){return Fp||(Fp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OE(){return Up||(Up=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Zy=new WeakMap,Tc=new WeakMap,ev=new WeakMap,yu=new WeakMap,Uh=new WeakMap;function ME(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Mn(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Zy.set(n,t)}).catch(()=>{}),Uh.set(e,t),e}function FE(t){if(Tc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Tc.set(t,e)}let Ec={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ev.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UE(t){Ec=t(Ec)}function BE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(vu(this),e,...n);return ev.set(r,e.sort?e.sort():[e]),Mn(r)}:OE().includes(t)?function(...e){return t.apply(vu(this),e),Mn(Zy.get(this))}:function(...e){return Mn(t.apply(vu(this),e))}}function zE(t){return typeof t=="function"?BE(t):(t instanceof IDBTransaction&&FE(t),bE(t,LE())?new Proxy(t,Ec):t)}function Mn(t){if(t instanceof IDBRequest)return ME(t);if(yu.has(t))return yu.get(t);const e=zE(t);return e!==t&&(yu.set(t,e),Uh.set(e,t)),e}const vu=t=>Uh.get(t);function HE(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Mn(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Mn(a.result),u.oldVersion,u.newVersion,Mn(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const $E=["get","getKey","getAll","getAllKeys","count"],qE=["put","add","delete","clear"],_u=new Map;function Bp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_u.get(e))return _u.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=qE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||$E.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return _u.set(e,i),i}UE(t=>({...t,get:(e,n,r)=>Bp(e,n)||t.get(e,n,r),has:(e,n)=>!!Bp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(WE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function WE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sc="@firebase/app",zp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn=new Jy("@firebase/app"),QE="@firebase/app-compat",KE="@firebase/analytics-compat",YE="@firebase/analytics",XE="@firebase/app-check-compat",JE="@firebase/app-check",ZE="@firebase/auth",eS="@firebase/auth-compat",tS="@firebase/database",nS="@firebase/data-connect",rS="@firebase/database-compat",sS="@firebase/functions",iS="@firebase/functions-compat",oS="@firebase/installations",aS="@firebase/installations-compat",lS="@firebase/messaging",uS="@firebase/messaging-compat",cS="@firebase/performance",hS="@firebase/performance-compat",dS="@firebase/remote-config",fS="@firebase/remote-config-compat",pS="@firebase/storage",mS="@firebase/storage-compat",gS="@firebase/firestore",yS="@firebase/vertexai-preview",vS="@firebase/firestore-compat",_S="firebase",wS="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic="[DEFAULT]",TS={[Sc]:"fire-core",[QE]:"fire-core-compat",[YE]:"fire-analytics",[KE]:"fire-analytics-compat",[JE]:"fire-app-check",[XE]:"fire-app-check-compat",[ZE]:"fire-auth",[eS]:"fire-auth-compat",[tS]:"fire-rtdb",[nS]:"fire-data-connect",[rS]:"fire-rtdb-compat",[sS]:"fire-fn",[iS]:"fire-fn-compat",[oS]:"fire-iid",[aS]:"fire-iid-compat",[lS]:"fire-fcm",[uS]:"fire-fcm-compat",[cS]:"fire-perf",[hS]:"fire-perf-compat",[dS]:"fire-rc",[fS]:"fire-rc-compat",[pS]:"fire-gcs",[mS]:"fire-gcs-compat",[gS]:"fire-fst",[vS]:"fire-fst-compat",[yS]:"fire-vertex","fire-js":"fire-js",[_S]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=new Map,ES=new Map,Pc=new Map;function Hp(t,e){try{t.container.addComponent(e)}catch(n){mn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Va(t){const e=t.name;if(Pc.has(e))return mn.debug(`There were multiple attempts to register component ${e}.`),!1;Pc.set(e,t);for(const n of Da.values())Hp(n,t);for(const n of ES.values())Hp(n,t);return!0}function SS(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fn=new Xy("app","Firebase",IS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=wS;function tv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ic,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Fn.create("bad-app-name",{appName:String(s)});if(n||(n=Yy()),!n)throw Fn.create("no-options");const i=Da.get(s);if(i){if(wc(n,i.options)&&wc(r,i.config))return i;throw Fn.create("duplicate-app",{appName:s})}const a=new NE(s);for(const u of Pc.values())a.addComponent(u);const l=new PS(n,r,a);return Da.set(s,l),l}function kS(t=Ic){const e=Da.get(t);if(!e&&t===Ic&&Yy())return tv();if(!e)throw Fn.create("no-app",{appName:t});return e}function Jr(t,e,n){var r;let s=(r=TS[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mn.warn(l.join(" "));return}Va(new Vi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="firebase-heartbeat-database",xS=1,ji="firebase-heartbeat-store";let wu=null;function nv(){return wu||(wu=HE(CS,xS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ji)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fn.create("idb-open",{originalErrorMessage:t.message})})),wu}async function NS(t){try{const n=(await nv()).transaction(ji),r=await n.objectStore(ji).get(rv(t));return await n.done,r}catch(e){if(e instanceof ws)mn.warn(e.message);else{const n=Fn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mn.warn(n.message)}}}async function $p(t,e){try{const r=(await nv()).transaction(ji,"readwrite");await r.objectStore(ji).put(e,rv(t)),await r.done}catch(n){if(n instanceof ws)mn.warn(n.message);else{const r=Fn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});mn.warn(r.message)}}}function rv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=1024,DS=30*24*60*60*1e3;class VS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=qp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=DS}),this._storage.overwrite(this._heartbeatsCache))}catch(r){mn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qp(),{heartbeatsToSend:r,unsentEntries:s}=jS(this._heartbeatsCache.heartbeats),i=Ra(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return mn.warn(n),""}}}function qp(){return new Date().toISOString().substring(0,10)}function jS(t,e=RS){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Gp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Gp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class bS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EE()?SE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await NS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return $p(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return $p(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Gp(t){return Ra(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t){Va(new Vi("platform-logger",e=>new GE(e),"PRIVATE")),Va(new Vi("heartbeat",e=>new VS(e),"PRIVATE")),Jr(Sc,zp,t),Jr(Sc,zp,"esm2017"),Jr("fire-js","")}LS("");var OS="firebase",MS="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jr(OS,MS,"app");var Wp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hr,sv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,g){function w(){}w.prototype=g.prototype,_.D=g.prototype,_.prototype=new w,_.prototype.constructor=_,_.C=function(I,A,x){for(var P=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)P[Ue-2]=arguments[Ue];return g.prototype[A].apply(I,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,g,w){w||(w=0);var I=Array(16);if(typeof g=="string")for(var A=0;16>A;++A)I[A]=g.charCodeAt(w++)|g.charCodeAt(w++)<<8|g.charCodeAt(w++)<<16|g.charCodeAt(w++)<<24;else for(A=0;16>A;++A)I[A]=g[w++]|g[w++]<<8|g[w++]<<16|g[w++]<<24;g=_.g[0],w=_.g[1],A=_.g[2];var x=_.g[3],P=g+(x^w&(A^x))+I[0]+3614090360&4294967295;g=w+(P<<7&4294967295|P>>>25),P=x+(A^g&(w^A))+I[1]+3905402710&4294967295,x=g+(P<<12&4294967295|P>>>20),P=A+(w^x&(g^w))+I[2]+606105819&4294967295,A=x+(P<<17&4294967295|P>>>15),P=w+(g^A&(x^g))+I[3]+3250441966&4294967295,w=A+(P<<22&4294967295|P>>>10),P=g+(x^w&(A^x))+I[4]+4118548399&4294967295,g=w+(P<<7&4294967295|P>>>25),P=x+(A^g&(w^A))+I[5]+1200080426&4294967295,x=g+(P<<12&4294967295|P>>>20),P=A+(w^x&(g^w))+I[6]+2821735955&4294967295,A=x+(P<<17&4294967295|P>>>15),P=w+(g^A&(x^g))+I[7]+4249261313&4294967295,w=A+(P<<22&4294967295|P>>>10),P=g+(x^w&(A^x))+I[8]+1770035416&4294967295,g=w+(P<<7&4294967295|P>>>25),P=x+(A^g&(w^A))+I[9]+2336552879&4294967295,x=g+(P<<12&4294967295|P>>>20),P=A+(w^x&(g^w))+I[10]+4294925233&4294967295,A=x+(P<<17&4294967295|P>>>15),P=w+(g^A&(x^g))+I[11]+2304563134&4294967295,w=A+(P<<22&4294967295|P>>>10),P=g+(x^w&(A^x))+I[12]+1804603682&4294967295,g=w+(P<<7&4294967295|P>>>25),P=x+(A^g&(w^A))+I[13]+4254626195&4294967295,x=g+(P<<12&4294967295|P>>>20),P=A+(w^x&(g^w))+I[14]+2792965006&4294967295,A=x+(P<<17&4294967295|P>>>15),P=w+(g^A&(x^g))+I[15]+1236535329&4294967295,w=A+(P<<22&4294967295|P>>>10),P=g+(A^x&(w^A))+I[1]+4129170786&4294967295,g=w+(P<<5&4294967295|P>>>27),P=x+(w^A&(g^w))+I[6]+3225465664&4294967295,x=g+(P<<9&4294967295|P>>>23),P=A+(g^w&(x^g))+I[11]+643717713&4294967295,A=x+(P<<14&4294967295|P>>>18),P=w+(x^g&(A^x))+I[0]+3921069994&4294967295,w=A+(P<<20&4294967295|P>>>12),P=g+(A^x&(w^A))+I[5]+3593408605&4294967295,g=w+(P<<5&4294967295|P>>>27),P=x+(w^A&(g^w))+I[10]+38016083&4294967295,x=g+(P<<9&4294967295|P>>>23),P=A+(g^w&(x^g))+I[15]+3634488961&4294967295,A=x+(P<<14&4294967295|P>>>18),P=w+(x^g&(A^x))+I[4]+3889429448&4294967295,w=A+(P<<20&4294967295|P>>>12),P=g+(A^x&(w^A))+I[9]+568446438&4294967295,g=w+(P<<5&4294967295|P>>>27),P=x+(w^A&(g^w))+I[14]+3275163606&4294967295,x=g+(P<<9&4294967295|P>>>23),P=A+(g^w&(x^g))+I[3]+4107603335&4294967295,A=x+(P<<14&4294967295|P>>>18),P=w+(x^g&(A^x))+I[8]+1163531501&4294967295,w=A+(P<<20&4294967295|P>>>12),P=g+(A^x&(w^A))+I[13]+2850285829&4294967295,g=w+(P<<5&4294967295|P>>>27),P=x+(w^A&(g^w))+I[2]+4243563512&4294967295,x=g+(P<<9&4294967295|P>>>23),P=A+(g^w&(x^g))+I[7]+1735328473&4294967295,A=x+(P<<14&4294967295|P>>>18),P=w+(x^g&(A^x))+I[12]+2368359562&4294967295,w=A+(P<<20&4294967295|P>>>12),P=g+(w^A^x)+I[5]+4294588738&4294967295,g=w+(P<<4&4294967295|P>>>28),P=x+(g^w^A)+I[8]+2272392833&4294967295,x=g+(P<<11&4294967295|P>>>21),P=A+(x^g^w)+I[11]+1839030562&4294967295,A=x+(P<<16&4294967295|P>>>16),P=w+(A^x^g)+I[14]+4259657740&4294967295,w=A+(P<<23&4294967295|P>>>9),P=g+(w^A^x)+I[1]+2763975236&4294967295,g=w+(P<<4&4294967295|P>>>28),P=x+(g^w^A)+I[4]+1272893353&4294967295,x=g+(P<<11&4294967295|P>>>21),P=A+(x^g^w)+I[7]+4139469664&4294967295,A=x+(P<<16&4294967295|P>>>16),P=w+(A^x^g)+I[10]+3200236656&4294967295,w=A+(P<<23&4294967295|P>>>9),P=g+(w^A^x)+I[13]+681279174&4294967295,g=w+(P<<4&4294967295|P>>>28),P=x+(g^w^A)+I[0]+3936430074&4294967295,x=g+(P<<11&4294967295|P>>>21),P=A+(x^g^w)+I[3]+3572445317&4294967295,A=x+(P<<16&4294967295|P>>>16),P=w+(A^x^g)+I[6]+76029189&4294967295,w=A+(P<<23&4294967295|P>>>9),P=g+(w^A^x)+I[9]+3654602809&4294967295,g=w+(P<<4&4294967295|P>>>28),P=x+(g^w^A)+I[12]+3873151461&4294967295,x=g+(P<<11&4294967295|P>>>21),P=A+(x^g^w)+I[15]+530742520&4294967295,A=x+(P<<16&4294967295|P>>>16),P=w+(A^x^g)+I[2]+3299628645&4294967295,w=A+(P<<23&4294967295|P>>>9),P=g+(A^(w|~x))+I[0]+4096336452&4294967295,g=w+(P<<6&4294967295|P>>>26),P=x+(w^(g|~A))+I[7]+1126891415&4294967295,x=g+(P<<10&4294967295|P>>>22),P=A+(g^(x|~w))+I[14]+2878612391&4294967295,A=x+(P<<15&4294967295|P>>>17),P=w+(x^(A|~g))+I[5]+4237533241&4294967295,w=A+(P<<21&4294967295|P>>>11),P=g+(A^(w|~x))+I[12]+1700485571&4294967295,g=w+(P<<6&4294967295|P>>>26),P=x+(w^(g|~A))+I[3]+2399980690&4294967295,x=g+(P<<10&4294967295|P>>>22),P=A+(g^(x|~w))+I[10]+4293915773&4294967295,A=x+(P<<15&4294967295|P>>>17),P=w+(x^(A|~g))+I[1]+2240044497&4294967295,w=A+(P<<21&4294967295|P>>>11),P=g+(A^(w|~x))+I[8]+1873313359&4294967295,g=w+(P<<6&4294967295|P>>>26),P=x+(w^(g|~A))+I[15]+4264355552&4294967295,x=g+(P<<10&4294967295|P>>>22),P=A+(g^(x|~w))+I[6]+2734768916&4294967295,A=x+(P<<15&4294967295|P>>>17),P=w+(x^(A|~g))+I[13]+1309151649&4294967295,w=A+(P<<21&4294967295|P>>>11),P=g+(A^(w|~x))+I[4]+4149444226&4294967295,g=w+(P<<6&4294967295|P>>>26),P=x+(w^(g|~A))+I[11]+3174756917&4294967295,x=g+(P<<10&4294967295|P>>>22),P=A+(g^(x|~w))+I[2]+718787259&4294967295,A=x+(P<<15&4294967295|P>>>17),P=w+(x^(A|~g))+I[9]+3951481745&4294967295,_.g[0]=_.g[0]+g&4294967295,_.g[1]=_.g[1]+(A+(P<<21&4294967295|P>>>11))&4294967295,_.g[2]=_.g[2]+A&4294967295,_.g[3]=_.g[3]+x&4294967295}r.prototype.u=function(_,g){g===void 0&&(g=_.length);for(var w=g-this.blockSize,I=this.B,A=this.h,x=0;x<g;){if(A==0)for(;x<=w;)s(this,_,x),x+=this.blockSize;if(typeof _=="string"){for(;x<g;)if(I[A++]=_.charCodeAt(x++),A==this.blockSize){s(this,I),A=0;break}}else for(;x<g;)if(I[A++]=_[x++],A==this.blockSize){s(this,I),A=0;break}}this.h=A,this.o+=g},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var g=1;g<_.length-8;++g)_[g]=0;var w=8*this.o;for(g=_.length-8;g<_.length;++g)_[g]=w&255,w/=256;for(this.u(_),_=Array(16),g=w=0;4>g;++g)for(var I=0;32>I;I+=8)_[w++]=this.g[g]>>>I&255;return _};function i(_,g){var w=l;return Object.prototype.hasOwnProperty.call(w,_)?w[_]:w[_]=g(_)}function a(_,g){this.h=g;for(var w=[],I=!0,A=_.length-1;0<=A;A--){var x=_[A]|0;I&&x==g||(w[A]=x,I=!1)}this.g=w}var l={};function u(_){return-128<=_&&128>_?i(_,function(g){return new a([g|0],0>g?-1:0)}):new a([_|0],0>_?-1:0)}function d(_){if(isNaN(_)||!isFinite(_))return v;if(0>_)return b(d(-_));for(var g=[],w=1,I=0;_>=w;I++)g[I]=_/w|0,w*=4294967296;return new a(g,0)}function p(_,g){if(_.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(_.charAt(0)=="-")return b(p(_.substring(1),g));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=d(Math.pow(g,8)),I=v,A=0;A<_.length;A+=8){var x=Math.min(8,_.length-A),P=parseInt(_.substring(A,A+x),g);8>x?(x=d(Math.pow(g,x)),I=I.j(x).add(d(P))):(I=I.j(w),I=I.add(d(P)))}return I}var v=u(0),y=u(1),T=u(16777216);t=a.prototype,t.m=function(){if(R(this))return-b(this).m();for(var _=0,g=1,w=0;w<this.g.length;w++){var I=this.i(w);_+=(0<=I?I:4294967296+I)*g,g*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(C(this))return"0";if(R(this))return"-"+b(this).toString(_);for(var g=d(Math.pow(_,6)),w=this,I="";;){var A=j(w,g).g;w=S(w,A.j(g));var x=((0<w.g.length?w.g[0]:w.h)>>>0).toString(_);if(w=A,C(w))return x+I;for(;6>x.length;)x="0"+x;I=x+I}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function C(_){if(_.h!=0)return!1;for(var g=0;g<_.g.length;g++)if(_.g[g]!=0)return!1;return!0}function R(_){return _.h==-1}t.l=function(_){return _=S(this,_),R(_)?-1:C(_)?0:1};function b(_){for(var g=_.g.length,w=[],I=0;I<g;I++)w[I]=~_.g[I];return new a(w,~_.h).add(y)}t.abs=function(){return R(this)?b(this):this},t.add=function(_){for(var g=Math.max(this.g.length,_.g.length),w=[],I=0,A=0;A<=g;A++){var x=I+(this.i(A)&65535)+(_.i(A)&65535),P=(x>>>16)+(this.i(A)>>>16)+(_.i(A)>>>16);I=P>>>16,x&=65535,P&=65535,w[A]=P<<16|x}return new a(w,w[w.length-1]&-2147483648?-1:0)};function S(_,g){return _.add(b(g))}t.j=function(_){if(C(this)||C(_))return v;if(R(this))return R(_)?b(this).j(b(_)):b(b(this).j(_));if(R(_))return b(this.j(b(_)));if(0>this.l(T)&&0>_.l(T))return d(this.m()*_.m());for(var g=this.g.length+_.g.length,w=[],I=0;I<2*g;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var A=0;A<_.g.length;A++){var x=this.i(I)>>>16,P=this.i(I)&65535,Ue=_.i(A)>>>16,X=_.i(A)&65535;w[2*I+2*A]+=P*X,E(w,2*I+2*A),w[2*I+2*A+1]+=x*X,E(w,2*I+2*A+1),w[2*I+2*A+1]+=P*Ue,E(w,2*I+2*A+1),w[2*I+2*A+2]+=x*Ue,E(w,2*I+2*A+2)}for(I=0;I<g;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=g;I<2*g;I++)w[I]=0;return new a(w,0)};function E(_,g){for(;(_[g]&65535)!=_[g];)_[g+1]+=_[g]>>>16,_[g]&=65535,g++}function k(_,g){this.g=_,this.h=g}function j(_,g){if(C(g))throw Error("division by zero");if(C(_))return new k(v,v);if(R(_))return g=j(b(_),g),new k(b(g.g),b(g.h));if(R(g))return g=j(_,b(g)),new k(b(g.g),g.h);if(30<_.g.length){if(R(_)||R(g))throw Error("slowDivide_ only works with positive integers.");for(var w=y,I=g;0>=I.l(_);)w=F(w),I=F(I);var A=D(w,1),x=D(I,1);for(I=D(I,2),w=D(w,2);!C(I);){var P=x.add(I);0>=P.l(_)&&(A=A.add(w),x=P),I=D(I,1),w=D(w,1)}return g=S(_,A.j(g)),new k(A,g)}for(A=v;0<=_.l(g);){for(w=Math.max(1,Math.floor(_.m()/g.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),x=d(w),P=x.j(g);R(P)||0<P.l(_);)w-=I,x=d(w),P=x.j(g);C(x)&&(x=y),A=A.add(x),_=S(_,P)}return new k(A,_)}t.A=function(_){return j(this,_).h},t.and=function(_){for(var g=Math.max(this.g.length,_.g.length),w=[],I=0;I<g;I++)w[I]=this.i(I)&_.i(I);return new a(w,this.h&_.h)},t.or=function(_){for(var g=Math.max(this.g.length,_.g.length),w=[],I=0;I<g;I++)w[I]=this.i(I)|_.i(I);return new a(w,this.h|_.h)},t.xor=function(_){for(var g=Math.max(this.g.length,_.g.length),w=[],I=0;I<g;I++)w[I]=this.i(I)^_.i(I);return new a(w,this.h^_.h)};function F(_){for(var g=_.g.length+1,w=[],I=0;I<g;I++)w[I]=_.i(I)<<1|_.i(I-1)>>>31;return new a(w,_.h)}function D(_,g){var w=g>>5;g%=32;for(var I=_.g.length-w,A=[],x=0;x<I;x++)A[x]=0<g?_.i(x+w)>>>g|_.i(x+w+1)<<32-g:_.i(x+w);return new a(A,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sv=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,hr=a}).apply(typeof Wp<"u"?Wp:typeof self<"u"?self:typeof window<"u"?window:{});var Mo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iv,Zs,ov,ea,Ac,av,lv,uv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mo=="object"&&Mo];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(o,c){if(c)e:{var f=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var N=o[m];if(!(N in f))break e;f=f[N]}o=o[o.length-1],m=f[o],c=c(m),c!=m&&c!=null&&e(f,o,{configurable:!0,writable:!0,value:c})}}function i(o,c){o instanceof String&&(o+="");var f=0,m=!1,N={next:function(){if(!m&&f<o.length){var V=f++;return{value:c(V,o[V]),done:!1}}return m=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}s("Array.prototype.values",function(o){return o||function(){return i(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function d(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function p(o,c,f){return o.call.apply(o.bind,arguments)}function v(o,c,f){if(!o)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,m),o.apply(c,N)}}return function(){return o.apply(c,arguments)}}function y(o,c,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:v,y.apply(null,arguments)}function T(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function C(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(m,N,V){for(var U=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)U[fe-2]=arguments[fe];return c.prototype[N].apply(m,U)}}function R(o){const c=o.length;if(0<c){const f=Array(c);for(let m=0;m<c;m++)f[m]=o[m];return f}return[]}function b(o,c){for(let f=1;f<arguments.length;f++){const m=arguments[f];if(u(m)){const N=o.length||0,V=m.length||0;o.length=N+V;for(let U=0;U<V;U++)o[N+U]=m[U]}else o.push(m)}}class S{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function E(o){return/^[\s\xa0]*$/.test(o)}function k(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function j(o){return j[" "](o),o}j[" "]=function(){};var F=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function D(o,c,f){for(const m in o)c.call(f,o[m],m,o)}function _(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function g(o){const c={};for(const f in o)c[f]=o[f];return c}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(o,c){let f,m;for(let N=1;N<arguments.length;N++){m=arguments[N];for(f in m)o[f]=m[f];for(let V=0;V<w.length;V++)f=w[V],Object.prototype.hasOwnProperty.call(m,f)&&(o[f]=m[f])}}function A(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function x(o){l.setTimeout(()=>{throw o},0)}function P(){var o=K;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class Ue{constructor(){this.h=this.g=null}add(c,f){const m=X.get();m.set(c,f),this.h?this.h.next=m:this.g=m,this.h=m}}var X=new S(()=>new re,o=>o.reset());class re{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ot,B=!1,K=new Ue,ee=()=>{const o=l.Promise.resolve(void 0);ot=()=>{o.then(pe)}};var pe=()=>{for(var o;o=P();){try{o.h.call(o.g)}catch(f){x(f)}var c=X;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}B=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var he=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function Te(o,c){if(Q.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(F){e:{try{j(c.nodeName);var N=!0;break e}catch{}N=!1}N||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Le[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Te.aa.h.call(this)}}C(Te,Q);var Le={2:"touch",3:"pen",4:"mouse"};Te.prototype.h=function(){Te.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Vt="closure_listenable_"+(1e6*Math.random()|0),x_=0;function N_(o,c,f,m,N){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!m,this.ha=N,this.key=++x_,this.da=this.fa=!1}function no(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function ro(o){this.src=o,this.g={},this.h=0}ro.prototype.add=function(o,c,f,m,N){var V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);var U=Sl(o,c,m,N);return-1<U?(c=o[U],f||(c.fa=!1)):(c=new N_(c,this.src,V,!!m,N),c.fa=f,o.push(c)),c};function El(o,c){var f=c.type;if(f in o.g){var m=o.g[f],N=Array.prototype.indexOf.call(m,c,void 0),V;(V=0<=N)&&Array.prototype.splice.call(m,N,1),V&&(no(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function Sl(o,c,f,m){for(var N=0;N<o.length;++N){var V=o[N];if(!V.da&&V.listener==c&&V.capture==!!f&&V.ha==m)return N}return-1}var Il="closure_lm_"+(1e6*Math.random()|0),Pl={};function Td(o,c,f,m,N){if(Array.isArray(c)){for(var V=0;V<c.length;V++)Td(o,c[V],f,m,N);return null}return f=Id(f),o&&o[Vt]?o.K(c,f,d(m)?!!m.capture:!1,N):R_(o,c,f,!1,m,N)}function R_(o,c,f,m,N,V){if(!c)throw Error("Invalid event type");var U=d(N)?!!N.capture:!!N,fe=kl(o);if(fe||(o[Il]=fe=new ro(o)),f=fe.add(c,f,m,U,V),f.proxy)return f;if(m=D_(),f.proxy=m,m.src=o,m.listener=f,o.addEventListener)he||(N=U),N===void 0&&(N=!1),o.addEventListener(c.toString(),m,N);else if(o.attachEvent)o.attachEvent(Sd(c.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function D_(){function o(f){return c.call(o.src,o.listener,f)}const c=V_;return o}function Ed(o,c,f,m,N){if(Array.isArray(c))for(var V=0;V<c.length;V++)Ed(o,c[V],f,m,N);else m=d(m)?!!m.capture:!!m,f=Id(f),o&&o[Vt]?(o=o.i,c=String(c).toString(),c in o.g&&(V=o.g[c],f=Sl(V,f,m,N),-1<f&&(no(V[f]),Array.prototype.splice.call(V,f,1),V.length==0&&(delete o.g[c],o.h--)))):o&&(o=kl(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Sl(c,f,m,N)),(f=-1<o?c[o]:null)&&Al(f))}function Al(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Vt])El(c.i,o);else{var f=o.type,m=o.proxy;c.removeEventListener?c.removeEventListener(f,m,o.capture):c.detachEvent?c.detachEvent(Sd(f),m):c.addListener&&c.removeListener&&c.removeListener(m),(f=kl(c))?(El(f,o),f.h==0&&(f.src=null,c[Il]=null)):no(o)}}}function Sd(o){return o in Pl?Pl[o]:Pl[o]="on"+o}function V_(o,c){if(o.da)o=!0;else{c=new Te(c,this);var f=o.listener,m=o.ha||o.src;o.fa&&Al(o),o=f.call(m,c)}return o}function kl(o){return o=o[Il],o instanceof ro?o:null}var Cl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Id(o){return typeof o=="function"?o:(o[Cl]||(o[Cl]=function(c){return o.handleEvent(c)}),o[Cl])}function Ke(){H.call(this),this.i=new ro(this),this.M=this,this.F=null}C(Ke,H),Ke.prototype[Vt]=!0,Ke.prototype.removeEventListener=function(o,c,f,m){Ed(this,o,c,f,m)};function at(o,c){var f,m=o.F;if(m)for(f=[];m;m=m.F)f.push(m);if(o=o.M,m=c.type||c,typeof c=="string")c=new Q(c,o);else if(c instanceof Q)c.target=c.target||o;else{var N=c;c=new Q(m,o),I(c,N)}if(N=!0,f)for(var V=f.length-1;0<=V;V--){var U=c.g=f[V];N=so(U,m,!0,c)&&N}if(U=c.g=o,N=so(U,m,!0,c)&&N,N=so(U,m,!1,c)&&N,f)for(V=0;V<f.length;V++)U=c.g=f[V],N=so(U,m,!1,c)&&N}Ke.prototype.N=function(){if(Ke.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],m=0;m<f.length;m++)no(f[m]);delete o.g[c],o.h--}}this.F=null},Ke.prototype.K=function(o,c,f,m){return this.i.add(String(o),c,!1,f,m)},Ke.prototype.L=function(o,c,f,m){return this.i.add(String(o),c,!0,f,m)};function so(o,c,f,m){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,V=0;V<c.length;++V){var U=c[V];if(U&&!U.da&&U.capture==f){var fe=U.listener,Be=U.ha||U.src;U.fa&&El(o.i,U),N=fe.call(Be,m)!==!1&&N}}return N&&!m.defaultPrevented}function Pd(o,c,f){if(typeof o=="function")f&&(o=y(o,f));else if(o&&typeof o.handleEvent=="function")o=y(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Ad(o){o.g=Pd(()=>{o.g=null,o.i&&(o.i=!1,Ad(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class j_ extends H{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Ad(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function As(o){H.call(this),this.h=o,this.g={}}C(As,H);var kd=[];function Cd(o){D(o.g,function(c,f){this.g.hasOwnProperty(f)&&Al(c)},o),o.g={}}As.prototype.N=function(){As.aa.N.call(this),Cd(this)},As.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xl=l.JSON.stringify,b_=l.JSON.parse,L_=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Nl(){}Nl.prototype.h=null;function xd(o){return o.h||(o.h=o.i())}function Nd(){}var ks={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rl(){Q.call(this,"d")}C(Rl,Q);function Dl(){Q.call(this,"c")}C(Dl,Q);var Xn={},Rd=null;function io(){return Rd=Rd||new Ke}Xn.La="serverreachability";function Dd(o){Q.call(this,Xn.La,o)}C(Dd,Q);function Cs(o){const c=io();at(c,new Dd(c))}Xn.STAT_EVENT="statevent";function Vd(o,c){Q.call(this,Xn.STAT_EVENT,o),this.stat=c}C(Vd,Q);function lt(o){const c=io();at(c,new Vd(c,o))}Xn.Ma="timingevent";function jd(o,c){Q.call(this,Xn.Ma,o),this.size=c}C(jd,Q);function xs(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Ns(){this.g=!0}Ns.prototype.xa=function(){this.g=!1};function O_(o,c,f,m,N,V){o.info(function(){if(o.g)if(V)for(var U="",fe=V.split("&"),Be=0;Be<fe.length;Be++){var ae=fe[Be].split("=");if(1<ae.length){var Ye=ae[0];ae=ae[1];var Xe=Ye.split("_");U=2<=Xe.length&&Xe[1]=="type"?U+(Ye+"="+ae+"&"):U+(Ye+"=redacted&")}}else U=null;else U=V;return"XMLHTTP REQ ("+m+") [attempt "+N+"]: "+c+`
`+f+`
`+U})}function M_(o,c,f,m,N,V,U){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+N+"]: "+c+`
`+f+`
`+V+" "+U})}function Pr(o,c,f,m){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+U_(o,f)+(m?" "+m:"")})}function F_(o,c){o.info(function(){return"TIMEOUT: "+c})}Ns.prototype.info=function(){};function U_(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var m=f[o];if(!(2>m.length)){var N=m[1];if(Array.isArray(N)&&!(1>N.length)){var V=N[0];if(V!="noop"&&V!="stop"&&V!="close")for(var U=1;U<N.length;U++)N[U]=""}}}}return xl(f)}catch{return c}}var oo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vl;function ao(){}C(ao,Nl),ao.prototype.g=function(){return new XMLHttpRequest},ao.prototype.i=function(){return{}},Vl=new ao;function _n(o,c,f,m){this.j=o,this.i=c,this.l=f,this.R=m||1,this.U=new As(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ld}function Ld(){this.i=null,this.g="",this.h=!1}var Od={},jl={};function bl(o,c,f){o.L=1,o.v=ho(rn(c)),o.m=f,o.P=!0,Md(o,null)}function Md(o,c){o.F=Date.now(),lo(o),o.A=rn(o.v);var f=o.A,m=o.R;Array.isArray(m)||(m=[String(m)]),Jd(f.i,"t",m),o.C=0,f=o.j.J,o.h=new Ld,o.g=yf(o.j,f?c:null,!o.m),0<o.O&&(o.M=new j_(y(o.Y,o,o.g),o.O)),c=o.U,f=o.g,m=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(kd[0]=N.toString()),N=kd);for(var V=0;V<N.length;V++){var U=Td(f,N[V],m||c.handleEvent,!1,c.h||c);if(!U)break;c.g[U.key]=U}c=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Cs(),O_(o.i,o.u,o.A,o.l,o.R,o.m)}_n.prototype.ca=function(o){o=o.target;const c=this.M;c&&sn(o)==3?c.j():this.Y(o)},_n.prototype.Y=function(o){try{if(o==this.g)e:{const Xe=sn(this.g);var c=this.g.Ba();const Cr=this.g.Z();if(!(3>Xe)&&(Xe!=3||this.g&&(this.h.h||this.g.oa()||of(this.g)))){this.J||Xe!=4||c==7||(c==8||0>=Cr?Cs(3):Cs(2)),Ll(this);var f=this.g.Z();this.X=f;t:if(Fd(this)){var m=of(this.g);o="";var N=m.length,V=sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jn(this),Rs(this);var U="";break t}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,o+=this.h.i.decode(m[c],{stream:!(V&&c==N-1)});m.length=0,this.h.g+=o,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=f==200,M_(this.i,this.u,this.A,this.l,this.R,Xe,f),this.o){if(this.T&&!this.K){t:{if(this.g){var fe,Be=this.g;if((fe=Be.g?Be.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(fe)){var ae=fe;break t}}ae=null}if(f=ae)Pr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ol(this,f);else{this.o=!1,this.s=3,lt(12),Jn(this),Rs(this);break e}}if(this.P){f=!0;let jt;for(;!this.J&&this.C<U.length;)if(jt=B_(this,U),jt==jl){Xe==4&&(this.s=4,lt(14),f=!1),Pr(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==Od){this.s=4,lt(15),Pr(this.i,this.l,U,"[Invalid Chunk]"),f=!1;break}else Pr(this.i,this.l,jt,null),Ol(this,jt);if(Fd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||U.length!=0||this.h.h||(this.s=1,lt(16),f=!1),this.o=this.o&&f,!f)Pr(this.i,this.l,U,"[Invalid Chunked Response]"),Jn(this),Rs(this);else if(0<U.length&&!this.W){this.W=!0;var Ye=this.j;Ye.g==this&&Ye.ba&&!Ye.M&&(Ye.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Hl(Ye),Ye.M=!0,lt(11))}}else Pr(this.i,this.l,U,null),Ol(this,U);Xe==4&&Jn(this),this.o&&!this.J&&(Xe==4?ff(this.j,this):(this.o=!1,lo(this)))}else sw(this.g),f==400&&0<U.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),Jn(this),Rs(this)}}}catch{}finally{}};function Fd(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function B_(o,c){var f=o.C,m=c.indexOf(`
`,f);return m==-1?jl:(f=Number(c.substring(f,m)),isNaN(f)?Od:(m+=1,m+f>c.length?jl:(c=c.slice(m,m+f),o.C=m+f,c)))}_n.prototype.cancel=function(){this.J=!0,Jn(this)};function lo(o){o.S=Date.now()+o.I,Ud(o,o.I)}function Ud(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=xs(y(o.ba,o),c)}function Ll(o){o.B&&(l.clearTimeout(o.B),o.B=null)}_n.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(F_(this.i,this.A),this.L!=2&&(Cs(),lt(17)),Jn(this),this.s=2,Rs(this)):Ud(this,this.S-o)};function Rs(o){o.j.G==0||o.J||ff(o.j,o)}function Jn(o){Ll(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Cd(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Ol(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||Ml(f.h,o))){if(!o.K&&Ml(f.h,o)&&f.G==3){try{var m=f.Da.g.parse(c)}catch{m=null}if(Array.isArray(m)&&m.length==3){var N=m;if(N[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)vo(f),go(f);else break e;zl(f),lt(18)}}else f.za=N[1],0<f.za-f.T&&37500>N[2]&&f.F&&f.v==0&&!f.C&&(f.C=xs(y(f.Za,f),6e3));if(1>=Hd(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else er(f,11)}else if((o.K||f.g==o)&&vo(f),!E(c))for(N=f.Da.g.parse(c),c=0;c<N.length;c++){let ae=N[c];if(f.T=ae[0],ae=ae[1],f.G==2)if(ae[0]=="c"){f.K=ae[1],f.ia=ae[2];const Ye=ae[3];Ye!=null&&(f.la=Ye,f.j.info("VER="+f.la));const Xe=ae[4];Xe!=null&&(f.Aa=Xe,f.j.info("SVER="+f.Aa));const Cr=ae[5];Cr!=null&&typeof Cr=="number"&&0<Cr&&(m=1.5*Cr,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;const jt=o.g;if(jt){const wo=jt.g?jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wo){var V=m.h;V.g||wo.indexOf("spdy")==-1&&wo.indexOf("quic")==-1&&wo.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Fl(V,V.h),V.h=null))}if(m.D){const $l=jt.g?jt.g.getResponseHeader("X-HTTP-Session-Id"):null;$l&&(m.ya=$l,ge(m.I,m.D,$l))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var U=o;if(m.qa=gf(m,m.J?m.ia:null,m.W),U.K){$d(m.h,U);var fe=U,Be=m.L;Be&&(fe.I=Be),fe.B&&(Ll(fe),lo(fe)),m.g=U}else hf(m);0<f.i.length&&yo(f)}else ae[0]!="stop"&&ae[0]!="close"||er(f,7);else f.G==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?er(f,7):Bl(f):ae[0]!="noop"&&f.l&&f.l.ta(ae),f.v=0)}}Cs(4)}catch{}}var z_=class{constructor(o,c){this.g=o,this.map=c}};function Bd(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zd(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Hd(o){return o.h?1:o.g?o.g.size:0}function Ml(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Fl(o,c){o.g?o.g.add(c):o.h=c}function $d(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Bd.prototype.cancel=function(){if(this.i=qd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function qd(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return R(o.i)}function H_(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,m=0;m<f;m++)c.push(o[m]);return c}c=[],f=0;for(m in o)c[f++]=o[m];return c}function $_(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const m in o)c[f++]=m;return c}}}function Gd(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=$_(o),m=H_(o),N=m.length,V=0;V<N;V++)c.call(void 0,m[V],f&&f[V],o)}var Wd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function q_(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var m=o[f].indexOf("="),N=null;if(0<=m){var V=o[f].substring(0,m);N=o[f].substring(m+1)}else V=o[f];c(V,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Zn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Zn){this.h=o.h,uo(this,o.j),this.o=o.o,this.g=o.g,co(this,o.s),this.l=o.l;var c=o.i,f=new js;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),Qd(this,f),this.m=o.m}else o&&(c=String(o).match(Wd))?(this.h=!1,uo(this,c[1]||"",!0),this.o=Ds(c[2]||""),this.g=Ds(c[3]||"",!0),co(this,c[4]),this.l=Ds(c[5]||"",!0),Qd(this,c[6]||"",!0),this.m=Ds(c[7]||"")):(this.h=!1,this.i=new js(null,this.h))}Zn.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Vs(c,Kd,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Vs(c,Kd,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Vs(f,f.charAt(0)=="/"?Q_:W_,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Vs(f,Y_)),o.join("")};function rn(o){return new Zn(o)}function uo(o,c,f){o.j=f?Ds(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function co(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Qd(o,c,f){c instanceof js?(o.i=c,X_(o.i,o.h)):(f||(c=Vs(c,K_)),o.i=new js(c,o.h))}function ge(o,c,f){o.i.set(c,f)}function ho(o){return ge(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Ds(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Vs(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,G_),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function G_(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Kd=/[#\/\?@]/g,W_=/[#\?:]/g,Q_=/[#\?]/g,K_=/[#\?@]/g,Y_=/#/g;function js(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function wn(o){o.g||(o.g=new Map,o.h=0,o.i&&q_(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=js.prototype,t.add=function(o,c){wn(this),this.i=null,o=Ar(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function Yd(o,c){wn(o),c=Ar(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Xd(o,c){return wn(o),c=Ar(o,c),o.g.has(c)}t.forEach=function(o,c){wn(this),this.g.forEach(function(f,m){f.forEach(function(N){o.call(c,N,m,this)},this)},this)},t.na=function(){wn(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let m=0;m<c.length;m++){const N=o[m];for(let V=0;V<N.length;V++)f.push(c[m])}return f},t.V=function(o){wn(this);let c=[];if(typeof o=="string")Xd(this,o)&&(c=c.concat(this.g.get(Ar(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},t.set=function(o,c){return wn(this),this.i=null,o=Ar(this,o),Xd(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Jd(o,c,f){Yd(o,c),0<f.length&&(o.i=null,o.g.set(Ar(o,c),R(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var m=c[f];const V=encodeURIComponent(String(m)),U=this.V(m);for(m=0;m<U.length;m++){var N=V;U[m]!==""&&(N+="="+encodeURIComponent(String(U[m]))),o.push(N)}}return this.i=o.join("&")};function Ar(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function X_(o,c){c&&!o.j&&(wn(o),o.i=null,o.g.forEach(function(f,m){var N=m.toLowerCase();m!=N&&(Yd(this,m),Jd(this,N,f))},o)),o.j=c}function J_(o,c){const f=new Ns;if(l.Image){const m=new Image;m.onload=T(Tn,f,"TestLoadImage: loaded",!0,c,m),m.onerror=T(Tn,f,"TestLoadImage: error",!1,c,m),m.onabort=T(Tn,f,"TestLoadImage: abort",!1,c,m),m.ontimeout=T(Tn,f,"TestLoadImage: timeout",!1,c,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else c(!1)}function Z_(o,c){const f=new Ns,m=new AbortController,N=setTimeout(()=>{m.abort(),Tn(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:m.signal}).then(V=>{clearTimeout(N),V.ok?Tn(f,"TestPingServer: ok",!0,c):Tn(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),Tn(f,"TestPingServer: error",!1,c)})}function Tn(o,c,f,m,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),m(f)}catch{}}function ew(){this.g=new L_}function tw(o,c,f){const m=f||"";try{Gd(o,function(N,V){let U=N;d(N)&&(U=xl(N)),c.push(m+V+"="+encodeURIComponent(U))})}catch(N){throw c.push(m+"type="+encodeURIComponent("_badmap")),N}}function fo(o){this.l=o.Ub||null,this.j=o.eb||!1}C(fo,Nl),fo.prototype.g=function(){return new po(this.l,this.j)},fo.prototype.i=function(o){return function(){return o}}({});function po(o,c){Ke.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(po,Ke),t=po.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Ls(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bs(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ls(this)),this.g&&(this.readyState=3,Ls(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zd(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zd(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?bs(this):Ls(this),this.readyState==3&&Zd(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,bs(this))},t.Qa=function(o){this.g&&(this.response=o,bs(this))},t.ga=function(){this.g&&bs(this)};function bs(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Ls(o)}t.setRequestHeader=function(o,c){this.u.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function Ls(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(po.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function ef(o){let c="";return D(o,function(f,m){c+=m,c+=":",c+=f,c+=`\r
`}),c}function Ul(o,c,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=ef(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):ge(o,c,f))}function Ae(o){Ke.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ae,Ke);var nw=/^https?$/i,rw=["POST","PUT"];t=Ae.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,c,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vl.g(),this.v=this.o?xd(this.o):xd(Vl),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(V){tf(this,V);return}if(o=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var N in m)f.set(N,m[N]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const V of m.keys())f.set(V,m.get(V));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(rw,c,void 0))||m||N||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,U]of f)this.g.setRequestHeader(V,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sf(this),this.u=!0,this.g.send(o),this.u=!1}catch(V){tf(this,V)}};function tf(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,nf(o),mo(o)}function nf(o){o.A||(o.A=!0,at(o,"complete"),at(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,at(this,"complete"),at(this,"abort"),mo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mo(this,!0)),Ae.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?rf(this):this.bb())},t.bb=function(){rf(this)};function rf(o){if(o.h&&typeof a<"u"&&(!o.v[1]||sn(o)!=4||o.Z()!=2)){if(o.u&&sn(o)==4)Pd(o.Ea,0,o);else if(at(o,"readystatechange"),sn(o)==4){o.h=!1;try{const U=o.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var m;if(m=U===0){var N=String(o.D).match(Wd)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),m=!nw.test(N?N.toLowerCase():"")}f=m}if(f)at(o,"complete"),at(o,"success");else{o.m=6;try{var V=2<sn(o)?o.g.statusText:""}catch{V=""}o.l=V+" ["+o.Z()+"]",nf(o)}}finally{mo(o)}}}}function mo(o,c){if(o.g){sf(o);const f=o.g,m=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||at(o,"ready");try{f.onreadystatechange=m}catch{}}}function sf(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function sn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<sn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),b_(c)}};function of(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function sw(o){const c={};o=(o.g&&2<=sn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(E(o[m]))continue;var f=A(o[m]);const N=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=c[N]||[];c[N]=V,V.push(f)}_(c,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Os(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function af(o){this.Aa=0,this.i=[],this.j=new Ns,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Os("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Os("baseRetryDelayMs",5e3,o),this.cb=Os("retryDelaySeedMs",1e4,o),this.Wa=Os("forwardChannelMaxRetries",2,o),this.wa=Os("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Bd(o&&o.concurrentRequestLimit),this.Da=new ew,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=af.prototype,t.la=8,t.G=1,t.connect=function(o,c,f,m){lt(0),this.W=o,this.H=c||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=gf(this,null,this.W),yo(this)};function Bl(o){if(lf(o),o.G==3){var c=o.U++,f=rn(o.I);if(ge(f,"SID",o.K),ge(f,"RID",c),ge(f,"TYPE","terminate"),Ms(o,f),c=new _n(o,o.j,c),c.L=2,c.v=ho(rn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=yf(c.j,null),c.g.ea(c.v)),c.F=Date.now(),lo(c)}mf(o)}function go(o){o.g&&(Hl(o),o.g.cancel(),o.g=null)}function lf(o){go(o),o.u&&(l.clearTimeout(o.u),o.u=null),vo(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function yo(o){if(!zd(o.h)&&!o.s){o.s=!0;var c=o.Ga;ot||ee(),B||(ot(),B=!0),K.add(c,o),o.B=0}}function iw(o,c){return Hd(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=xs(y(o.Ga,o,c),pf(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new _n(this,this.j,o);let V=this.o;if(this.S&&(V?(V=g(V),I(V,this.S)):V=this.S),this.m!==null||this.O||(N.H=V,V=null),this.P)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(c+=m,4096<c){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=cf(this,N,c),f=rn(this.I),ge(f,"RID",o),ge(f,"CVER",22),this.D&&ge(f,"X-HTTP-Session-Id",this.D),Ms(this,f),V&&(this.O?c="headers="+encodeURIComponent(String(ef(V)))+"&"+c:this.m&&Ul(f,this.m,V)),Fl(this.h,N),this.Ua&&ge(f,"TYPE","init"),this.P?(ge(f,"$req",c),ge(f,"SID","null"),N.T=!0,bl(N,f,null)):bl(N,f,c),this.G=2}}else this.G==3&&(o?uf(this,o):this.i.length==0||zd(this.h)||uf(this))};function uf(o,c){var f;c?f=c.l:f=o.U++;const m=rn(o.I);ge(m,"SID",o.K),ge(m,"RID",f),ge(m,"AID",o.T),Ms(o,m),o.m&&o.o&&Ul(m,o.m,o.o),f=new _n(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=cf(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Fl(o.h,f),bl(f,m,c)}function Ms(o,c){o.H&&D(o.H,function(f,m){ge(c,m,f)}),o.l&&Gd({},function(f,m){ge(c,m,f)})}function cf(o,c,f){f=Math.min(o.i.length,f);var m=o.l?y(o.l.Na,o.l,o):null;e:{var N=o.i;let V=-1;for(;;){const U=["count="+f];V==-1?0<f?(V=N[0].g,U.push("ofs="+V)):V=0:U.push("ofs="+V);let fe=!0;for(let Be=0;Be<f;Be++){let ae=N[Be].g;const Ye=N[Be].map;if(ae-=V,0>ae)V=Math.max(0,N[Be].g-100),fe=!1;else try{tw(Ye,U,"req"+ae+"_")}catch{m&&m(Ye)}}if(fe){m=U.join("&");break e}}}return o=o.i.splice(0,f),c.D=o,m}function hf(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;ot||ee(),B||(ot(),B=!0),K.add(c,o),o.v=0}}function zl(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=xs(y(o.Fa,o),pf(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,df(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=xs(y(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),go(this),df(this))};function Hl(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function df(o){o.g=new _n(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=rn(o.qa);ge(c,"RID","rpc"),ge(c,"SID",o.K),ge(c,"AID",o.T),ge(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&ge(c,"TO",o.ja),ge(c,"TYPE","xmlhttp"),Ms(o,c),o.m&&o.o&&Ul(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=ho(rn(c)),f.m=null,f.P=!0,Md(f,o)}t.Za=function(){this.C!=null&&(this.C=null,go(this),zl(this),lt(19))};function vo(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function ff(o,c){var f=null;if(o.g==c){vo(o),Hl(o),o.g=null;var m=2}else if(Ml(o.h,c))f=c.D,$d(o.h,c),m=1;else return;if(o.G!=0){if(c.o)if(m==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var N=o.B;m=io(),at(m,new jd(m,f)),yo(o)}else hf(o);else if(N=c.s,N==3||N==0&&0<c.X||!(m==1&&iw(o,c)||m==2&&zl(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),N){case 1:er(o,5);break;case 4:er(o,10);break;case 3:er(o,6);break;default:er(o,2)}}}function pf(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function er(o,c){if(o.j.info("Error code "+c),c==2){var f=y(o.fb,o),m=o.Xa;const N=!m;m=new Zn(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||uo(m,"https"),ho(m),N?J_(m.toString(),f):Z_(m.toString(),f)}else lt(2);o.G=0,o.l&&o.l.sa(c),mf(o),lf(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function mf(o){if(o.G=0,o.ka=[],o.l){const c=qd(o.h);(c.length!=0||o.i.length!=0)&&(b(o.ka,c),b(o.ka,o.i),o.h.i.length=0,R(o.i),o.i.length=0),o.l.ra()}}function gf(o,c,f){var m=f instanceof Zn?rn(f):new Zn(f);if(m.g!="")c&&(m.g=c+"."+m.g),co(m,m.s);else{var N=l.location;m=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var V=new Zn(null);m&&uo(V,m),c&&(V.g=c),N&&co(V,N),f&&(V.l=f),m=V}return f=o.D,c=o.ya,f&&c&&ge(m,f,c),ge(m,"VER",o.la),Ms(o,m),m}function yf(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Ae(new fo({eb:f})):new Ae(o.pa),c.Ha(o.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function vf(){}t=vf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function _o(){}_o.prototype.g=function(o,c){return new _t(o,c)};function _t(o,c){Ke.call(this),this.g=new af(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!E(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!E(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new kr(this)}C(_t,Ke),_t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_t.prototype.close=function(){Bl(this.g)},_t.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=xl(o),o=f);c.i.push(new z_(c.Ya++,o)),c.G==3&&yo(c)},_t.prototype.N=function(){this.g.l=null,delete this.j,Bl(this.g),delete this.g,_t.aa.N.call(this)};function _f(o){Rl.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const f in c){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}C(_f,Rl);function wf(){Dl.call(this),this.status=1}C(wf,Dl);function kr(o){this.g=o}C(kr,vf),kr.prototype.ua=function(){at(this.g,"a")},kr.prototype.ta=function(o){at(this.g,new _f(o))},kr.prototype.sa=function(o){at(this.g,new wf)},kr.prototype.ra=function(){at(this.g,"b")},_o.prototype.createWebChannel=_o.prototype.g,_t.prototype.send=_t.prototype.o,_t.prototype.open=_t.prototype.m,_t.prototype.close=_t.prototype.close,uv=function(){return new _o},lv=function(){return io()},av=Xn,Ac={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},oo.NO_ERROR=0,oo.TIMEOUT=8,oo.HTTP_ERROR=6,ea=oo,bd.COMPLETE="complete",ov=bd,Nd.EventType=ks,ks.OPEN="a",ks.CLOSE="b",ks.ERROR="c",ks.MESSAGE="d",Ke.prototype.listen=Ke.prototype.K,Zs=Nd,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,iv=Ae}).apply(typeof Mo<"u"?Mo:typeof self<"u"?self:typeof window<"u"?window:{});const Qp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tt.UNAUTHENTICATED=new tt(null),tt.GOOGLE_CREDENTIALS=new tt("google-credentials-uid"),tt.FIRST_PARTY=new tt("first-party-uid"),tt.MOCK_USER=new tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ts="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=new Jy("@firebase/firestore");function Ws(){return yr.logLevel}function G(t,...e){if(yr.logLevel<=ie.DEBUG){const n=e.map(Bh);yr.debug(`Firestore (${Ts}): ${t}`,...n)}}function gn(t,...e){if(yr.logLevel<=ie.ERROR){const n=e.map(Bh);yr.error(`Firestore (${Ts}): ${t}`,...n)}}function as(t,...e){if(yr.logLevel<=ie.WARN){const n=e.map(Bh);yr.warn(`Firestore (${Ts}): ${t}`,...n)}}function Bh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${Ts}) INTERNAL ASSERTION FAILED: `+t;throw gn(e),new Error(e)}function ce(t,e){t||Y()}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends ws{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(tt.UNAUTHENTICATED))}shutdown(){}}class US{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class BS{constructor(e){this.t=e,this.currentUser=tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ce(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Un;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Un,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Un)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string"),new cv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string"),new tt(e)}}class zS{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class HS{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new zS(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $S{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qS{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ce(this.o===void 0);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,G("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string"),this.R=n.token,new $S(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=GS(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function ls(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return be.fromMillis(Date.now())}static fromDate(e){return be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new be(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new be(0,0))}static max(){return new J(new be(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return bi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof bi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ve extends bi{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const WS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $e extends bi{construct(e,n,r){return new $e(e,n,r)}static isValidIdentifier(e){return WS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$e.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $e(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new q(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new q(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new q(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $e(n)}static emptyPath(){return new $e([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(ve.fromString(e))}static fromName(e){return new W(ve.fromString(e).popFirst(5))}static empty(){return new W(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new ve(e.slice()))}}function QS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=J.fromTimestamp(r===1e9?new be(n+1,0):new be(n,r));return new $n(s,W.empty(),e)}function KS(t){return new $n(t.readTime,t.key,-1)}class $n{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new $n(J.min(),W.empty(),-1)}static max(){return new $n(J.max(),W.empty(),-1)}}function YS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qi(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==XS)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(s=>s?O.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new O((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(p=>{a[d]=p,++l,l===i&&r(a)},p=>s(p))}})}static doWhile(e,n){return new O((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function ZS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ki(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}zh.oe=-1;function sl(t){return t==null}function ja(t){return t===0&&1/t==-1/0}function eI(t){return typeof t=="number"&&Number.isInteger(t)&&!ja(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Er(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function dv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e,n){this.comparator=e,this.root=n||He.EMPTY}insert(e,n){return new Pe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,He.BLACK,null,null))}remove(e){return new Pe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,He.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fo(this.root,e,this.comparator,!0)}}class Fo{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class He{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??He.RED,this.left=s??He.EMPTY,this.right=i??He.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new He(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return He.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return He.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,He.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,He.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}He.EMPTY=null,He.RED=!0,He.BLACK=!1;He.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,s,i){return this}insert(e,n,r){return new He(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yp(this.data.getIterator())}getIteratorFrom(e){return new Yp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ge)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ge(this.comparator);return n.data=e,n}}class Yp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.fields=e,e.sort($e.comparator)}static empty(){return new Et([])}unionWith(e){let n=new Ge($e.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Et(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ls(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new fv("Invalid base64 string: "+i):i}}(e);return new Qe(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Qe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qe.EMPTY_BYTE_STRING=new Qe("");const tI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qn(t){if(ce(!!t),typeof t=="string"){let e=0;const n=tI.exec(t);if(ce(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(t.seconds),nanos:Ce(t.nanos)}}function Ce(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vr(t){return typeof t=="string"?Qe.fromBase64String(t):Qe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function $h(t){const e=t.mapValue.fields.__previous_value__;return Hh(e)?$h(e):e}function Li(t){const e=qn(t.mapValue.fields.__local_write_time__.timestampValue);return new be(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,n,r,s,i,a,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class Oi{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Oi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Oi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo={mapValue:{}};function _r(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hh(t)?4:sI(t)?9007199254740991:rI(t)?10:11:Y()}function nn(t,e){if(t===e)return!0;const n=_r(t);if(n!==_r(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Li(t).isEqual(Li(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=qn(s.timestampValue),l=qn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return vr(s.bytesValue).isEqual(vr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ce(s.geoPointValue.latitude)===Ce(i.geoPointValue.latitude)&&Ce(s.geoPointValue.longitude)===Ce(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ce(s.integerValue)===Ce(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Ce(s.doubleValue),l=Ce(i.doubleValue);return a===l?ja(a)===ja(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return ls(t.arrayValue.values||[],e.arrayValue.values||[],nn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Kp(a)!==Kp(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!nn(a[u],l[u])))return!1;return!0}(t,e);default:return Y()}}function Mi(t,e){return(t.values||[]).find(n=>nn(n,e))!==void 0}function us(t,e){if(t===e)return 0;const n=_r(t),r=_r(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Ce(i.integerValue||i.doubleValue),u=Ce(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Xp(t.timestampValue,e.timestampValue);case 4:return Xp(Li(t),Li(e));case 5:return le(t.stringValue,e.stringValue);case 6:return function(i,a){const l=vr(i),u=vr(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),u=a.split("/");for(let d=0;d<l.length&&d<u.length;d++){const p=le(l[d],u[d]);if(p!==0)return p}return le(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=le(Ce(i.latitude),Ce(a.latitude));return l!==0?l:le(Ce(i.longitude),Ce(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Jp(t.arrayValue,e.arrayValue);case 10:return function(i,a){var l,u,d,p;const v=i.fields||{},y=a.fields||{},T=(l=v.value)===null||l===void 0?void 0:l.arrayValue,C=(u=y.value)===null||u===void 0?void 0:u.arrayValue,R=le(((d=T==null?void 0:T.values)===null||d===void 0?void 0:d.length)||0,((p=C==null?void 0:C.values)===null||p===void 0?void 0:p.length)||0);return R!==0?R:Jp(T,C)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Uo.mapValue&&a===Uo.mapValue)return 0;if(i===Uo.mapValue)return 1;if(a===Uo.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=a.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let v=0;v<u.length&&v<p.length;++v){const y=le(u[v],p[v]);if(y!==0)return y;const T=us(l[u[v]],d[p[v]]);if(T!==0)return T}return le(u.length,p.length)}(t.mapValue,e.mapValue);default:throw Y()}}function Xp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=qn(t),r=qn(e),s=le(n.seconds,r.seconds);return s!==0?s:le(n.nanos,r.nanos)}function Jp(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=us(n[s],r[s]);if(i)return i}return le(n.length,r.length)}function cs(t){return kc(t)}function kc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=qn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return vr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=kc(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${kc(n.fields[a])}`;return s+"}"}(t.mapValue):Y()}function Zp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Cc(t){return!!t&&"integerValue"in t}function qh(t){return!!t&&"arrayValue"in t}function em(t){return!!t&&"nullValue"in t}function tm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ta(t){return!!t&&"mapValue"in t}function rI(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function di(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Er(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=di(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=di(t.arrayValue.values[n]);return e}return Object.assign({},t)}function sI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.value=e}static empty(){return new pt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ta(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=di(n)}setAll(e){let n=$e.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=di(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ta(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ta(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Er(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new pt(di(this.value))}}function pv(t){const e=[];return Er(t.fields,(n,r)=>{const s=new $e([n]);if(ta(r)){const i=pv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Et(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new rt(e,0,J.min(),J.min(),J.min(),pt.empty(),0)}static newFoundDocument(e,n,r,s){return new rt(e,1,n,J.min(),r,s,0)}static newNoDocument(e,n){return new rt(e,2,n,J.min(),J.min(),pt.empty(),0)}static newUnknownDocument(e,n){return new rt(e,3,n,J.min(),J.min(),pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n){this.position=e,this.inclusive=n}}function nm(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=W.comparator(W.fromName(a.referenceValue),n.key):r=us(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function rm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n="asc"){this.field=e,this.dir=n}}function iI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{}class De extends mv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new aI(e,n,r):n==="array-contains"?new cI(e,r):n==="in"?new hI(e,r):n==="not-in"?new dI(e,r):n==="array-contains-any"?new fI(e,r):new De(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new lI(e,r):new uI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(us(n,this.value)):n!==null&&_r(this.value)===_r(n)&&this.matchesComparison(us(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $t extends mv{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new $t(e,n)}matches(e){return gv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function gv(t){return t.op==="and"}function yv(t){return oI(t)&&gv(t)}function oI(t){for(const e of t.filters)if(e instanceof $t)return!1;return!0}function xc(t){if(t instanceof De)return t.field.canonicalString()+t.op.toString()+cs(t.value);if(yv(t))return t.filters.map(e=>xc(e)).join(",");{const e=t.filters.map(n=>xc(n)).join(",");return`${t.op}(${e})`}}function vv(t,e){return t instanceof De?function(r,s){return s instanceof De&&r.op===s.op&&r.field.isEqual(s.field)&&nn(r.value,s.value)}(t,e):t instanceof $t?function(r,s){return s instanceof $t&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&vv(a,s.filters[l]),!0):!1}(t,e):void Y()}function _v(t){return t instanceof De?function(n){return`${n.field.canonicalString()} ${n.op} ${cs(n.value)}`}(t):t instanceof $t?function(n){return n.op.toString()+" {"+n.getFilters().map(_v).join(" ,")+"}"}(t):"Filter"}class aI extends De{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class lI extends De{constructor(e,n){super(e,"in",n),this.keys=wv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uI extends De{constructor(e,n){super(e,"not-in",n),this.keys=wv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function wv(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class cI extends De{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qh(n)&&Mi(n.arrayValue,this.value)}}class hI extends De{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Mi(this.value.arrayValue,n)}}class dI extends De{constructor(e,n){super(e,"not-in",n)}matches(e){if(Mi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Mi(this.value.arrayValue,n)}}class fI extends De{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Mi(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.ue=null}}function sm(t,e=null,n=[],r=[],s=null,i=null,a=null){return new pI(t,e,n,r,s,i,a)}function Gh(t){const e=Z(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>xc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),sl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>cs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>cs(r)).join(",")),e.ue=n}return e.ue}function Wh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!iI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rm(t.startAt,e.startAt)&&rm(t.endAt,e.endAt)}function Nc(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function mI(t,e,n,r,s,i,a,l){return new Yi(t,e,n,r,s,i,a,l)}function il(t){return new Yi(t)}function im(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Tv(t){return t.collectionGroup!==null}function fi(t){const e=Z(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Ge($e.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new La(i,r))}),n.has($e.keyField().canonicalString())||e.ce.push(new La($e.keyField(),r))}return e.ce}function Xt(t){const e=Z(t);return e.le||(e.le=gI(e,fi(t))),e.le}function gI(t,e){if(t.limitType==="F")return sm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new La(s.field,i)});const n=t.endAt?new ba(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ba(t.startAt.position,t.startAt.inclusive):null;return sm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Rc(t,e){const n=t.filters.concat([e]);return new Yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Dc(t,e,n){return new Yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ol(t,e){return Wh(Xt(t),Xt(e))&&t.limitType===e.limitType}function Ev(t){return`${Gh(Xt(t))}|lt:${t.limitType}`}function Nr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>_v(s)).join(", ")}]`),sl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>cs(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>cs(s)).join(",")),`Target(${r})`}(Xt(t))}; limitType=${t.limitType})`}function al(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):W.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of fi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,u){const d=nm(a,l,u);return a.inclusive?d<=0:d<0}(r.startAt,fi(r),s)||r.endAt&&!function(a,l,u){const d=nm(a,l,u);return a.inclusive?d>=0:d>0}(r.endAt,fi(r),s))}(t,e)}function yI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Sv(t){return(e,n)=>{let r=!1;for(const s of fi(t)){const i=vI(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function vI(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(i,a,l){const u=a.data.field(i),d=l.data.field(i);return u!==null&&d!==null?us(u,d):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Er(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return dv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=new Pe(W.comparator);function yn(){return _I}const Iv=new Pe(W.comparator);function ei(...t){let e=Iv;for(const n of t)e=e.insert(n.key,n);return e}function Pv(t){let e=Iv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ar(){return pi()}function Av(){return pi()}function pi(){return new Es(t=>t.toString(),(t,e)=>t.isEqual(e))}const wI=new Pe(W.comparator),TI=new Ge(W.comparator);function ne(...t){let e=TI;for(const n of t)e=e.add(n);return e}const EI=new Ge(le);function SI(){return EI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ja(e)?"-0":e}}function kv(t){return{integerValue:""+t}}function II(t,e){return eI(e)?kv(e):Qh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this._=void 0}}function PI(t,e,n){return t instanceof Fi?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Hh(i)&&(i=$h(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof Ui?xv(t,e):t instanceof Bi?Nv(t,e):function(s,i){const a=Cv(s,i),l=om(a)+om(s.Pe);return Cc(a)&&Cc(s.Pe)?kv(l):Qh(s.serializer,l)}(t,e)}function AI(t,e,n){return t instanceof Ui?xv(t,e):t instanceof Bi?Nv(t,e):n}function Cv(t,e){return t instanceof Oa?function(r){return Cc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Fi extends ll{}class Ui extends ll{constructor(e){super(),this.elements=e}}function xv(t,e){const n=Rv(e);for(const r of t.elements)n.some(s=>nn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Bi extends ll{constructor(e){super(),this.elements=e}}function Nv(t,e){let n=Rv(e);for(const r of t.elements)n=n.filter(s=>!nn(s,r));return{arrayValue:{values:n}}}class Oa extends ll{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function om(t){return Ce(t.integerValue||t.doubleValue)}function Rv(t){return qh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n){this.field=e,this.transform=n}}function CI(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ui&&s instanceof Ui||r instanceof Bi&&s instanceof Bi?ls(r.elements,s.elements,nn):r instanceof Oa&&s instanceof Oa?nn(r.Pe,s.Pe):r instanceof Fi&&s instanceof Fi}(t.transform,e.transform)}class xI{constructor(e,n){this.version=e,this.transformResults=n}}class Jt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jt}static exists(e){return new Jt(void 0,e)}static updateTime(e){return new Jt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function na(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ul{}function Dv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new jv(t.key,Jt.none()):new Xi(t.key,t.data,Jt.none());{const n=t.data,r=pt.empty();let s=new Ge($e.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Yn(t.key,r,new Et(s.toArray()),Jt.none())}}function NI(t,e,n){t instanceof Xi?function(s,i,a){const l=s.value.clone(),u=lm(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Yn?function(s,i,a){if(!na(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=lm(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(Vv(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function mi(t,e,n,r){return t instanceof Xi?function(i,a,l,u){if(!na(i.precondition,a))return l;const d=i.value.clone(),p=um(i.fieldTransforms,u,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Yn?function(i,a,l,u){if(!na(i.precondition,a))return l;const d=um(i.fieldTransforms,u,a),p=a.data;return p.setAll(Vv(i)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(v=>v.field))}(t,e,n,r):function(i,a,l){return na(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function RI(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Cv(r.transform,s||null);i!=null&&(n===null&&(n=pt.empty()),n.set(r.field,i))}return n||null}function am(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ls(r,s,(i,a)=>CI(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xi extends ul{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Yn extends ul{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Vv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function lm(t,e,n){const r=new Map;ce(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,AI(a,l,n[s]))}return r}function um(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,PI(i,a,e))}return r}class jv extends ul{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DI extends ul{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&NI(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=mi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=mi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Av();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=Dv(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&ls(this.mutations,e.mutations,(n,r)=>am(n,r))&&ls(this.baseMutations,e.baseMutations,(n,r)=>am(n,r))}}class Kh{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ce(e.mutations.length===r.length);let s=function(){return wI}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Kh(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne,se;function LI(t){switch(t){default:return Y();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function bv(t){if(t===void 0)return gn("GRPC error has no .code"),L.UNKNOWN;switch(t){case Ne.OK:return L.OK;case Ne.CANCELLED:return L.CANCELLED;case Ne.UNKNOWN:return L.UNKNOWN;case Ne.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Ne.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Ne.INTERNAL:return L.INTERNAL;case Ne.UNAVAILABLE:return L.UNAVAILABLE;case Ne.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Ne.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Ne.NOT_FOUND:return L.NOT_FOUND;case Ne.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Ne.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Ne.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Ne.ABORTED:return L.ABORTED;case Ne.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Ne.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Ne.DATA_LOSS:return L.DATA_LOSS;default:return Y()}}(se=Ne||(Ne={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=new hr([4294967295,4294967295],0);function cm(t){const e=OI().encode(t),n=new sv;return n.update(e),new Uint8Array(n.digest())}function hm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new hr([n,r],0),new hr([s,i],0)]}class Yh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ti(`Invalid padding: ${n}`);if(r<0)throw new ti(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ti(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ti(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=hr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(hr.fromNumber(r)));return s.compare(MI)===1&&(s=new hr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=cm(e),[r,s]=hm(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Yh(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const n=cm(e),[r,s]=hm(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ti extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ji.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new cl(J.min(),s,new Pe(le),yn(),ne())}}class Ji{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ji(r,n,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Lv{constructor(e,n){this.targetId=e,this.me=n}}class Ov{constructor(e,n,r=Qe.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class dm{constructor(){this.fe=0,this.ge=pm(),this.pe=Qe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ne(),n=ne(),r=ne();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Y()}}),new Ji(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=pm()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class FI{constructor(e){this.Le=e,this.Be=new Map,this.ke=yn(),this.qe=fm(),this.Qe=new Pe(le)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Nc(i))if(r===0){const a=new W(i.path);this.Ue(n,a,rt.newNoDocument(a,J.min()))}else ce(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),u=l?this.Xe(l,e,a):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=vr(r).toUint8Array()}catch(u){if(u instanceof fv)return as("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Yh(a,s,i)}catch(u){return as(u instanceof ti?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const l=this.Je(a);if(l){if(i.current&&Nc(l.target)){const u=new W(l.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,rt.newNoDocument(u,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=ne();this.qe.forEach((i,a)=>{let l=!0;a.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new cl(e,n,this.Qe,this.ke,r);return this.ke=yn(),this.qe=fm(),this.Qe=new Pe(le),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new dm,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ge(le),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new dm),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function fm(){return new Pe(W.comparator)}function pm(){return new Pe(W.comparator)}const UI={asc:"ASCENDING",desc:"DESCENDING"},BI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zI={and:"AND",or:"OR"};class HI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vc(t,e){return t.useProto3Json||sl(e)?e:{value:e}}function Ma(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $I(t,e){return Ma(t,e.toTimestamp())}function Zt(t){return ce(!!t),J.fromTimestamp(function(n){const r=qn(n);return new be(r.seconds,r.nanos)}(t))}function Xh(t,e){return jc(t,e).canonicalString()}function jc(t,e){const n=function(s){return new ve(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Fv(t){const e=ve.fromString(t);return ce($v(e)),e}function bc(t,e){return Xh(t.databaseId,e.path)}function Tu(t,e){const n=Fv(e);if(n.get(1)!==t.databaseId.projectId)throw new q(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(Bv(n))}function Uv(t,e){return Xh(t.databaseId,e)}function qI(t){const e=Fv(t);return e.length===4?ve.emptyPath():Bv(e)}function Lc(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Bv(t){return ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function mm(t,e,n){return{name:bc(t,e),fields:n.value.mapValue.fields}}function GI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,p){return d.useProto3Json?(ce(p===void 0||typeof p=="string"),Qe.fromBase64String(p||"")):(ce(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Qe.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const p=d.code===void 0?L.UNKNOWN:bv(d.code);return new q(p,d.message||"")}(a);n=new Ov(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Tu(t,r.document.name),i=Zt(r.document.updateTime),a=r.document.createTime?Zt(r.document.createTime):J.min(),l=new pt({mapValue:{fields:r.document.fields}}),u=rt.newFoundDocument(s,i,a,l),d=r.targetIds||[],p=r.removedTargetIds||[];n=new ra(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Tu(t,r.document),i=r.readTime?Zt(r.readTime):J.min(),a=rt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new ra([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Tu(t,r.document),i=r.removedTargetIds||[];n=new ra([],i,s,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new bI(s,i),l=r.targetId;n=new Lv(l,a)}}return n}function WI(t,e){let n;if(e instanceof Xi)n={update:mm(t,e.key,e.value)};else if(e instanceof jv)n={delete:bc(t,e.key)};else if(e instanceof Yn)n={update:mm(t,e.key,e.data),updateMask:n1(e.fieldMask)};else{if(!(e instanceof DI))return Y();n={verify:bc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Fi)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ui)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Bi)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Oa)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:$I(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Y()}(t,e.precondition)),n}function QI(t,e){return t&&t.length>0?(ce(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?Zt(s.updateTime):Zt(i);return a.isEqual(J.min())&&(a=Zt(i)),new xI(a,s.transformResults||[])}(n,e))):[]}function KI(t,e){return{documents:[Uv(t,e.path)]}}function YI(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Uv(t,s);const i=function(d){if(d.length!==0)return Hv($t.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(p=>function(y){return{field:Rr(y.field),direction:ZI(y.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Vc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function XI(t){let e=qI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ce(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(v){const y=zv(v);return y instanceof $t&&yv(y)?y.getFilters():[y]}(n.where));let a=[];n.orderBy&&(a=function(v){return v.map(y=>function(C){return new La(Dr(C.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(v){let y;return y=typeof v=="object"?v.value:v,sl(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(v){const y=!!v.before,T=v.values||[];return new ba(T,y)}(n.startAt));let d=null;return n.endAt&&(d=function(v){const y=!v.before,T=v.values||[];return new ba(T,y)}(n.endAt)),mI(e,s,a,i,l,"F",u,d)}function JI(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Dr(n.unaryFilter.field);return De.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Dr(n.unaryFilter.field);return De.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Dr(n.unaryFilter.field);return De.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Dr(n.unaryFilter.field);return De.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return De.create(Dr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $t.create(n.compositeFilter.filters.map(r=>zv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function ZI(t){return UI[t]}function e1(t){return BI[t]}function t1(t){return zI[t]}function Rr(t){return{fieldPath:t.canonicalString()}}function Dr(t){return $e.fromServerFormat(t.fieldPath)}function Hv(t){return t instanceof De?function(n){if(n.op==="=="){if(tm(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NAN"}};if(em(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tm(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NOT_NAN"}};if(em(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rr(n.field),op:e1(n.op),value:n.value}}}(t):t instanceof $t?function(n){const r=n.getFilters().map(s=>Hv(s));return r.length===1?r[0]:{compositeFilter:{op:t1(n.op),filters:r}}}(t):Y()}function n1(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $v(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,n,r,s,i=J.min(),a=J.min(),l=Qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new xn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new xn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this.ct=e}}function s1(t){const e=XI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(){this.un=new o1}addToCollectionParentIndex(e,n){return this.un.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve($n.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve($n.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class o1{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ge(ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ge(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new hs(0)}static kn(){return new hs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(){this.changes=new Es(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&mi(r.mutation,s,Et.empty(),be.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){const s=ar();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=ei();return i.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ar();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=yn();const a=pi(),l=function(){return pi()}();return n.forEach((u,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof Yn)?i=i.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),mi(p.mutation,d,p.mutation.getFieldMask(),be.now())):a.set(d.key,Et.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,p)=>a.set(d,p)),n.forEach((d,p)=>{var v;return l.set(d,new l1(p,(v=a.get(d))!==null&&v!==void 0?v:null))}),l))}recalculateAndSaveOverlays(e,n){const r=pi();let s=new Pe((a,l)=>a-l),i=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let p=r.get(u)||Et.empty();p=l.applyToLocalView(d,p),r.set(u,p);const v=(s.get(l.batchId)||ne()).add(u);s=s.insert(l.batchId,v)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,p=u.value,v=Av();p.forEach(y=>{if(!i.has(y)){const T=Dv(n.get(y),r.get(y));T!==null&&v.set(y,T),i=i.add(y)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,v))}return O.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return W.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Tv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):O.resolve(ar());let l=-1,u=i;return a.next(d=>O.forEach(d,(p,v)=>(l<v.largestBatchId&&(l=v.largestBatchId),i.get(p)?O.resolve():this.remoteDocumentCache.getEntry(e,p).next(y=>{u=u.insert(p,y)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ne())).next(p=>({batchId:l,changes:Pv(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let s=ei();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=ei();return this.indexManager.getCollectionParents(e,i).next(l=>O.forEach(l,u=>{const d=function(v,y){return new Yi(y,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((v,y)=>{a=a.insert(v,y)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,d)=>{const p=d.getKey();a.get(p)===null&&(a=a.insert(p,rt.newInvalidDocument(p)))});let l=ei();return a.forEach((u,d)=>{const p=i.get(u);p!==void 0&&mi(p.mutation,d,Et.empty(),be.now()),al(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return O.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Zt(s.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:s1(s.bundledQuery),readTime:Zt(s.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(){this.overlays=new Pe(W.comparator),this.Ir=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ar();return O.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const s=ar(),i=n.length+1,a=new W(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return O.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Pe((d,p)=>d-p);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=i.get(d.largestBatchId);p===null&&(p=ar(),i=i.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const l=ar(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>l.set(d,p)),!(l.size()>=s)););return O.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new jI(n,r));let i=this.Ir.get(n);i===void 0&&(i=ne(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(){this.Tr=new Ge(Oe.Er),this.dr=new Ge(Oe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Oe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Oe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new W(new ve([])),r=new Oe(n,e),s=new Oe(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new W(new ve([])),r=new Oe(n,e),s=new Oe(n,e+1);let i=ne();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Oe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Oe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return W.comparator(e.key,n.key)||le(e.wr,n.wr)}static Ar(e,n){return le(e.wr,n.wr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ge(Oe.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new VI(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.br=this.br.add(new Oe(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return O.resolve(a)}lookupMutationBatch(e,n){return O.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Oe(n,0),s=new Oe(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const l=this.Dr(a.wr);i.push(l)}),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ge(le);return n.forEach(s=>{const i=new Oe(s,0),a=new Oe(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],l=>{r=r.add(l.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;W.isDocumentKey(i)||(i=i.child(""));const a=new Oe(new W(i),0);let l=new Ge(le);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},a),O.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ce(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(n.mutations,s=>{const i=new Oe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Oe(n,0),s=this.br.firstAfterOrEqual(r);return O.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e){this.Mr=e,this.docs=function(){return new Pe(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():rt.newInvalidDocument(n))}getEntries(e,n){let r=yn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():rt.newInvalidDocument(s))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=yn();const a=n.path,l=new W(a.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||YS(KS(p),r)<=0||(s.has(p.key)||al(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Y()}Or(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new m1(this)}getSize(e){return O.resolve(this.size)}}class m1 extends a1{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e){this.persistence=e,this.Nr=new Es(n=>Gh(n),Wh),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Jh,this.targetCount=0,this.kr=hs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),O.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new hs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Kn(n),O.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),O.waitFor(i).next(()=>s)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,n){this.qr={},this.overlays={},this.Qr=new zh(0),this.Kr=!1,this.Kr=!0,this.$r=new d1,this.referenceDelegate=e(this),this.Ur=new g1(this),this.indexManager=new i1,this.remoteDocumentCache=function(s){return new p1(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new r1(n),this.Gr=new c1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new h1,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new f1(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new v1(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class v1 extends JS{constructor(e){super(),this.currentSequenceNumber=e}}class Zh{constructor(e){this.persistence=e,this.Jr=new Jh,this.Yr=null}static Zr(e){return new Zh(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{const s=W.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,J.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return O.or([()=>O.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ne(),s=ne();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ed(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return TE()?8:ZS(_E())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new _1;return this.Xi(e,n,a).next(l=>{if(i.result=l,this.zi)return this.es(e,n,a,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Ws()<=ie.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Nr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(Ws()<=ie.DEBUG&&G("QueryEngine","Query:",Nr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Ws()<=ie.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Nr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xt(n))):O.resolve())}Yi(e,n){if(im(n))return O.resolve(null);let r=Xt(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Dc(n,null,"F"),r=Xt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=ne(...i);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,a,u.readTime)?this.Yi(e,Dc(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return im(n)||s.isEqual(J.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?O.resolve(null):(Ws()<=ie.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Nr(n)),this.rs(e,a,n,QS(s,-1)).next(l=>l))})}ts(e,n){let r=new Ge(Sv(e));return n.forEach((s,i)=>{al(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Ws()<=ie.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Nr(n)),this.Ji.getDocumentsMatchingQuery(e,n,$n.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Pe(le),this._s=new Es(i=>Gh(i),Wh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new u1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function E1(t,e,n,r){return new T1(t,e,n,r)}async function qv(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let u=ne();for(const d of s){a.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of i){l.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:l}))})})}function S1(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,p){const v=d.batch,y=v.keys();let T=O.resolve();return y.forEach(C=>{T=T.next(()=>p.getEntry(u,C)).next(R=>{const b=d.docVersions.get(C);ce(b!==null),R.version.compareTo(b)<0&&(v.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),p.addEntry(R)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(u,v))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ne();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Gv(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function I1(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,v)=>{const y=s.get(v);if(!y)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,v).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,v)));let T=y.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(v)!==null?T=T.withResumeToken(Qe.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):p.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(p.resumeToken,r)),s=s.insert(v,T),function(R,b,S){return R.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(y,T,p)&&l.push(n.Ur.updateTargetData(i,T))});let u=yn(),d=ne();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(P1(i,a,e.documentUpdates).next(p=>{u=p.Ps,d=p.Is})),!r.isEqual(J.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(v=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return O.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function P1(t,e,n){let r=ne(),s=ne();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=yn();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):G("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:a,Is:s}})}function A1(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function k1(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,O.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new xn(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Oc(t,e,n){const r=Z(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Ki(a))throw a;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function gm(t,e,n){const r=Z(t);let s=J.min(),i=ne();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,p){const v=Z(u),y=v._s.get(p);return y!==void 0?O.resolve(v.os.get(y)):v.Ur.getTargetData(d,p)}(r,a,Xt(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:J.min(),n?i:ne())).next(l=>(C1(r,yI(e),l),{documents:l,Ts:i})))}function C1(t,e,n){let r=t.us.get(e)||J.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class ym{constructor(){this.activeTargetIds=SI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class x1{constructor(){this.so=new ym,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ym,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo=null;function Eu(){return Bo===null?Bo=function(){return 268435456+Math.round(2147483648*Math.random())}():Bo++,"0x"+Bo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et="WebChannelConnection";class V1 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const l=Eu(),u=this.xo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,a),this.No(n,u,d,s).then(p=>(G("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw as("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",u,"request:",s),p})}Lo(n,r,s,i,a,l){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ts}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=R1[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Eu();return new Promise((a,l)=>{const u=new iv;u.setWithCredentials(!0),u.listenOnce(ov.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ea.NO_ERROR:const p=u.getResponseJson();G(et,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),a(p);break;case ea.TIMEOUT:G(et,`RPC '${e}' ${i} timed out`),l(new q(L.DEADLINE_EXCEEDED,"Request time out"));break;case ea.HTTP_ERROR:const v=u.getStatus();if(G(et,`RPC '${e}' ${i} failed with status:`,v,"response text:",u.getResponseText()),v>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const T=y==null?void 0:y.error;if(T&&T.status&&T.message){const C=function(b){const S=b.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(S)>=0?S:L.UNKNOWN}(T.status);l(new q(C,T.message))}else l(new q(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new q(L.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{G(et,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);G(et,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Eu(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=uv(),l=lv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");G(et,`Creating RPC '${e}' stream ${s}: ${p}`,u);const v=a.createWebChannel(p,u);let y=!1,T=!1;const C=new D1({Io:b=>{T?G(et,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(y||(G(et,`Opening RPC '${e}' stream ${s} transport.`),v.open(),y=!0),G(et,`RPC '${e}' stream ${s} sending:`,b),v.send(b))},To:()=>v.close()}),R=(b,S,E)=>{b.listen(S,k=>{try{E(k)}catch(j){setTimeout(()=>{throw j},0)}})};return R(v,Zs.EventType.OPEN,()=>{T||(G(et,`RPC '${e}' stream ${s} transport opened.`),C.yo())}),R(v,Zs.EventType.CLOSE,()=>{T||(T=!0,G(et,`RPC '${e}' stream ${s} transport closed`),C.So())}),R(v,Zs.EventType.ERROR,b=>{T||(T=!0,as(et,`RPC '${e}' stream ${s} transport errored:`,b),C.So(new q(L.UNAVAILABLE,"The operation could not be completed")))}),R(v,Zs.EventType.MESSAGE,b=>{var S;if(!T){const E=b.data[0];ce(!!E);const k=E,j=k.error||((S=k[0])===null||S===void 0?void 0:S.error);if(j){G(et,`RPC '${e}' stream ${s} received error:`,j);const F=j.status;let D=function(w){const I=Ne[w];if(I!==void 0)return bv(I)}(F),_=j.message;D===void 0&&(D=L.INTERNAL,_="Unknown error status: "+F+" with message "+j.message),T=!0,C.So(new q(D,_)),v.close()}else G(et,`RPC '${e}' stream ${s} received:`,E),C.bo(E)}}),R(l,av.STAT_EVENT,b=>{b.stat===Ac.PROXY?G(et,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===Ac.NOPROXY&&G(et,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function Su(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(t){return new HI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,n,r,s,i,a,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Wv(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(gn(n.toString()),gn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new q(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class j1 extends Qv{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=GI(this.serializer,e),r=function(i){if(!("targetChange"in i))return J.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?J.min():a.readTime?Zt(a.readTime):J.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Lc(this.serializer),n.addTarget=function(i,a){let l;const u=a.target;if(l=Nc(u)?{documents:KI(i,u)}:{query:YI(i,u)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Mv(i,a.resumeToken);const d=Vc(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(J.min())>0){l.readTime=Ma(i,a.snapshotVersion.toTimestamp());const d=Vc(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=JI(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Lc(this.serializer),n.removeTarget=e,this.a_(n)}}class b1 extends Qv{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ce(!!e.streamToken),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=QI(e.writeResults,e.commitTime),r=Zt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Lc(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>WI(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new q(L.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,jc(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(L.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,jc(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new q(L.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class O1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(gn(n),this.D_=!1):G("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{Sr(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=Z(u);d.L_.add(4),await Zi(d),d.q_.set("Unknown"),d.L_.delete(4),await dl(d)}(this))})}),this.q_=new O1(r,s)}}async function dl(t){if(Sr(t))for(const e of t.B_)await e(!0)}async function Zi(t){for(const e of t.B_)await e(!1)}function Kv(t,e){const n=Z(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),sd(n)?rd(n):Ss(n).r_()&&nd(n,e))}function td(t,e){const n=Z(t),r=Ss(n);n.N_.delete(e),r.r_()&&Yv(n,e),n.N_.size===0&&(r.r_()?r.o_():Sr(n)&&n.q_.set("Unknown"))}function nd(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ss(t).A_(e)}function Yv(t,e){t.Q_.xe(e),Ss(t).R_(e)}function rd(t){t.Q_=new FI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ss(t).start(),t.q_.v_()}function sd(t){return Sr(t)&&!Ss(t).n_()&&t.N_.size>0}function Sr(t){return Z(t).L_.size===0}function Xv(t){t.Q_=void 0}async function F1(t){t.q_.set("Online")}async function U1(t){t.N_.forEach((e,n)=>{nd(t,e)})}async function B1(t,e){Xv(t),sd(t)?(t.q_.M_(e),rd(t)):t.q_.set("Unknown")}async function z1(t,e,n){if(t.q_.set("Online"),e instanceof Ov&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fa(t,r)}else if(e instanceof ra?t.Q_.Ke(e):e instanceof Lv?t.Q_.He(e):t.Q_.We(e),!n.isEqual(J.min()))try{const r=await Gv(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Q_.rt(a);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.N_.get(d);p&&i.N_.set(d,p.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,d)=>{const p=i.N_.get(u);if(!p)return;i.N_.set(u,p.withResumeToken(Qe.EMPTY_BYTE_STRING,p.snapshotVersion)),Yv(i,u);const v=new xn(p.target,u,d,p.sequenceNumber);nd(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await Fa(t,r)}}async function Fa(t,e,n){if(!Ki(e))throw e;t.L_.add(1),await Zi(t),t.q_.set("Offline"),n||(n=()=>Gv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await dl(t)})}function Jv(t,e){return e().catch(n=>Fa(t,n,e))}async function fl(t){const e=Z(t),n=Gn(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;H1(e);)try{const s=await A1(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,$1(e,s)}catch(s){await Fa(e,s)}Zv(e)&&e_(e)}function H1(t){return Sr(t)&&t.O_.length<10}function $1(t,e){t.O_.push(e);const n=Gn(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Zv(t){return Sr(t)&&!Gn(t).n_()&&t.O_.length>0}function e_(t){Gn(t).start()}async function q1(t){Gn(t).p_()}async function G1(t){const e=Gn(t);for(const n of t.O_)e.m_(n.mutations)}async function W1(t,e,n){const r=t.O_.shift(),s=Kh.from(r,e,n);await Jv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await fl(t)}async function Q1(t,e){e&&Gn(t).V_&&await async function(r,s){if(function(a){return LI(a)&&a!==L.ABORTED}(s.code)){const i=r.O_.shift();Gn(r).s_(),await Jv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await fl(r)}}(t,e),Zv(t)&&e_(t)}async function _m(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=Sr(n);n.L_.add(3),await Zi(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await dl(n)}async function K1(t,e){const n=Z(t);e?(n.L_.delete(2),await dl(n)):e||(n.L_.add(2),await Zi(n),n.q_.set("Unknown"))}function Ss(t){return t.K_||(t.K_=function(n,r,s){const i=Z(n);return i.w_(),new j1(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:F1.bind(null,t),Ro:U1.bind(null,t),mo:B1.bind(null,t),d_:z1.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),sd(t)?rd(t):t.q_.set("Unknown")):(await t.K_.stop(),Xv(t))})),t.K_}function Gn(t){return t.U_||(t.U_=function(n,r,s){const i=Z(n);return i.w_(),new b1(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:q1.bind(null,t),mo:Q1.bind(null,t),f_:G1.bind(null,t),g_:W1.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await fl(t)):(await t.U_.stop(),t.O_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Un,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new id(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function od(t,e){if(gn("AsyncQueue",`${e}: ${t}`),Ki(t))return new q(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=ei(),this.sortedSet=new Pe(this.comparator)}static emptySet(e){return new Zr(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Zr;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(){this.W_=new Pe(W.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ds{constructor(e,n,r,s,i,a,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ds(e,n,Zr.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ol(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class X1{constructor(){this.queries=Tm(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=Tm(),i.forEach((a,l)=>{for(const u of l.j_)u.onError(r)})})(this,new q(L.ABORTED,"Firestore shutting down"))}}function Tm(){return new Es(t=>Ev(t),ol)}async function t_(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new Y1,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=od(a,`Initialization of query '${Nr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&ad(n)}async function n_(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function J1(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.j_)l.X_(s)&&(r=!0);a.z_=s}}r&&ad(n)}function Z1(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function ad(t){t.Y_.forEach(e=>{e.next()})}var Mc,Em;(Em=Mc||(Mc={})).ea="default",Em.Cache="cache";class r_{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ds(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ds.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Mc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e){this.key=e}}class i_{constructor(e){this.key=e}}class eP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ne(),this.mutatedKeys=ne(),this.Aa=Sv(e),this.Ra=new Zr(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new wm,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,v)=>{const y=s.get(p),T=al(this.query,v)?v:null,C=!!y&&this.mutatedKeys.has(y.key),R=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let b=!1;y&&T?y.data.isEqual(T.data)?C!==R&&(r.track({type:3,doc:T}),b=!0):this.ga(y,T)||(r.track({type:2,doc:T}),b=!0,(u&&this.Aa(T,u)>0||d&&this.Aa(T,d)<0)&&(l=!0)):!y&&T?(r.track({type:0,doc:T}),b=!0):y&&!T&&(r.track({type:1,doc:y}),b=!0,(u||d)&&(l=!0)),b&&(T?(a=a.add(T),i=R?i.add(p):i.delete(p)):(a=a.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((p,v)=>function(T,C){const R=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return R(T)-R(C)}(p.type,v.type)||this.Aa(p.doc,v.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,a.length!==0||d?{snapshot:new ds(this.query,e.Ra,i,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new wm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ne(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new i_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new s_(r))}),n}ba(e){this.Ta=e.Ts,this.da=ne();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ds.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class tP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class nP{constructor(e){this.key=e,this.va=!1}}class rP{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Es(l=>Ev(l),ol),this.Ma=new Map,this.xa=new Set,this.Oa=new Pe(W.comparator),this.Na=new Map,this.La=new Jh,this.Ba={},this.ka=new Map,this.qa=hs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function sP(t,e,n=!0){const r=h_(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await o_(r,e,n,!0),s}async function iP(t,e){const n=h_(t);await o_(n,e,!0,!1)}async function o_(t,e,n,r){const s=await k1(t.localStore,Xt(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await oP(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Kv(t.remoteStore,s),l}async function oP(t,e,n,r,s){t.Ka=(v,y,T)=>async function(R,b,S,E){let k=b.view.ma(S);k.ns&&(k=await gm(R.localStore,b.query,!1).then(({documents:_})=>b.view.ma(_,k)));const j=E&&E.targetChanges.get(b.targetId),F=E&&E.targetMismatches.get(b.targetId)!=null,D=b.view.applyChanges(k,R.isPrimaryClient,j,F);return Im(R,b.targetId,D.wa),D.snapshot}(t,v,y,T);const i=await gm(t.localStore,e,!0),a=new eP(e,i.Ts),l=a.ma(i.documents),u=Ji.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,u);Im(t,n,d.wa);const p=new tP(e,n,a);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function aP(t,e,n){const r=Z(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!ol(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Oc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&td(r.remoteStore,s.targetId),Fc(r,s.targetId)}).catch(Qi)):(Fc(r,s.targetId),await Oc(r.localStore,s.targetId,!0))}async function lP(t,e){const n=Z(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),td(n.remoteStore,r.targetId))}async function uP(t,e,n){const r=gP(t);try{const s=await function(a,l){const u=Z(a),d=be.now(),p=l.reduce((T,C)=>T.add(C.key),ne());let v,y;return u.persistence.runTransaction("Locally write mutations","readwrite",T=>{let C=yn(),R=ne();return u.cs.getEntries(T,p).next(b=>{C=b,C.forEach((S,E)=>{E.isValidDocument()||(R=R.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(T,C)).next(b=>{v=b;const S=[];for(const E of l){const k=RI(E,v.get(E.key).overlayedDocument);k!=null&&S.push(new Yn(E.key,k,pv(k.value.mapValue),Jt.exists(!0)))}return u.mutationQueue.addMutationBatch(T,d,S,l)}).next(b=>{y=b;const S=b.applyToLocalDocumentSet(v,R);return u.documentOverlayCache.saveOverlays(T,b.batchId,S)})}).then(()=>({batchId:y.batchId,changes:Pv(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let d=a.Ba[a.currentUser.toKey()];d||(d=new Pe(le)),d=d.insert(l,u),a.Ba[a.currentUser.toKey()]=d}(r,s.batchId,n),await eo(r,s.changes),await fl(r.remoteStore)}catch(s){const i=od(s,"Failed to persist write");n.reject(i)}}async function a_(t,e){const n=Z(t);try{const r=await I1(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?ce(a.va):s.removedDocuments.size>0&&(ce(a.va),a.va=!1))}),await eo(n,r,e)}catch(r){await Qi(r)}}function Sm(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const l=a.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=Z(a);u.onlineState=l;let d=!1;u.queries.forEach((p,v)=>{for(const y of v.j_)y.Z_(l)&&(d=!0)}),d&&ad(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cP(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new Pe(W.comparator);a=a.insert(i,rt.newNoDocument(i,J.min()));const l=ne().add(i),u=new cl(J.min(),new Map,new Pe(le),a,l);await a_(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),ld(r)}else await Oc(r.localStore,e,!1).then(()=>Fc(r,e,n)).catch(Qi)}async function hP(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await S1(n.localStore,e);u_(n,r,null),l_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await eo(n,s)}catch(s){await Qi(s)}}async function dP(t,e,n){const r=Z(t);try{const s=await function(a,l){const u=Z(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,l).next(v=>(ce(v!==null),p=v.keys(),u.mutationQueue.removeMutationBatch(d,v))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);u_(r,e,n),l_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await eo(r,s)}catch(s){await Qi(s)}}function l_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function u_(t,e,n){const r=Z(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Fc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||c_(t,r)})}function c_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(td(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ld(t))}function Im(t,e,n){for(const r of n)r instanceof s_?(t.La.addReference(r.key,e),fP(t,r)):r instanceof i_?(G("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||c_(t,r.key)):Y()}function fP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(G("SyncEngine","New document in limbo: "+n),t.xa.add(r),ld(t))}function ld(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new W(ve.fromString(e)),r=t.qa.next();t.Na.set(r,new nP(n)),t.Oa=t.Oa.insert(n,r),Kv(t.remoteStore,new xn(Xt(il(n.path)),r,"TargetPurposeLimboResolution",zh.oe))}}async function eo(t,e,n){const r=Z(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{a.push(r.Ka(u,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const v=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,v?"current":"not-current")}if(d){s.push(d);const v=ed.Wi(u.targetId,d);i.push(v)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(u,d){const p=Z(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>O.forEach(d,y=>O.forEach(y.$i,T=>p.persistence.referenceDelegate.addReference(v,y.targetId,T)).next(()=>O.forEach(y.Ui,T=>p.persistence.referenceDelegate.removeReference(v,y.targetId,T)))))}catch(v){if(!Ki(v))throw v;G("LocalStore","Failed to update sequence numbers: "+v)}for(const v of d){const y=v.targetId;if(!v.fromCache){const T=p.os.get(y),C=T.snapshotVersion,R=T.withLastLimboFreeSnapshotVersion(C);p.os=p.os.insert(y,R)}}}(r.localStore,i))}async function pP(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await qv(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new q(L.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await eo(n,r.hs)}}function mP(t,e){const n=Z(t),r=n.Na.get(e);if(r&&r.va)return ne().add(r.key);{let s=ne();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const l=n.Fa.get(a);s=s.unionWith(l.view.Va)}return s}}function h_(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=a_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cP.bind(null,e),e.Ca.d_=J1.bind(null,e.eventManager),e.Ca.$a=Z1.bind(null,e.eventManager),e}function gP(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dP.bind(null,e),e}class Ua{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hl(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return E1(this.persistence,new w1,e.initialUser,this.serializer)}Ga(e){return new y1(Zh.Zr,this.serializer)}Wa(e){return new x1}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ua.provider={build:()=>new Ua};class Uc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Sm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=pP.bind(null,this.syncEngine),await K1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new X1}()}createDatastore(e){const n=hl(e.databaseInfo.databaseId),r=function(i){return new V1(i)}(e.databaseInfo);return function(i,a,l,u){return new L1(i,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new M1(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Sm(this.syncEngine,n,0),function(){return vm.D()?new vm:new N1}())}createSyncEngine(e,n){return function(s,i,a,l,u,d,p){const v=new rP(s,i,a,l,u,d);return p&&(v.Qa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Z(s);G("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Zi(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Uc.provider={build:()=>new Uc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):gn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=tt.UNAUTHENTICATED,this.clientId=hv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{G("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(G("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Un;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=od(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Iu(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await qv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Pm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await vP(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>_m(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>_m(e.remoteStore,s)),t._onlineComponents=e}async function vP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await Iu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;as("Error using user provided cache. Falling back to memory cache: "+n),await Iu(t,new Ua)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await Iu(t,new Ua);return t._offlineComponents}async function f_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await Pm(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await Pm(t,new Uc))),t._onlineComponents}function _P(t){return f_(t).then(e=>e.syncEngine)}async function Bc(t){const e=await f_(t),n=e.eventManager;return n.onListen=sP.bind(null,e.syncEngine),n.onUnlisten=aP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=iP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=lP.bind(null,e.syncEngine),n}function wP(t,e,n={}){const r=new Un;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,d){const p=new d_({next:y=>{p.Za(),a.enqueueAndForget(()=>n_(i,v));const T=y.docs.has(l);!T&&y.fromCache?d.reject(new q(L.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&y.fromCache&&u&&u.source==="server"?d.reject(new q(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(y)},error:y=>d.reject(y)}),v=new r_(il(l.path),p,{includeMetadataChanges:!0,_a:!0});return t_(i,v)}(await Bc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(t,e,n){if(!n)throw new q(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function TP(t,e,n,r){if(e===!0&&r===!0)throw new q(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function km(t){if(!W.isDocumentKey(t))throw new q(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Cm(t){if(W.isDocumentKey(t))throw new q(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function en(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pl(t);throw new q(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=p_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ml{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new FS;switch(r.type){case"firstParty":return new HS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Am.get(n);r&&(G("ComponentProvider","Removing Datastore"),Am.delete(n),r.terminate())}(this),Promise.resolve()}}function EP(t,e,n,r={}){var s;const i=(t=en(t,ml))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&as("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=tt.MOCK_USER;else{l=vE(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new q(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new tt(d)}t._authCredentials=new US(new cv(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Is(this.firestore,e,this._query)}}class st{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new st(this.firestore,e,this._key)}}class Bn extends Is{constructor(e,n,r){super(e,n,il(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new st(this.firestore,null,new W(e))}withConverter(e){return new Bn(this.firestore,e,this._path)}}function SP(t,e,...n){if(t=tn(t),m_("collection","path",e),t instanceof ml){const r=ve.fromString(e,...n);return Cm(r),new Bn(t,null,r)}{if(!(t instanceof st||t instanceof Bn))throw new q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return Cm(r),new Bn(t.firestore,null,r)}}function Ps(t,e,...n){if(t=tn(t),arguments.length===1&&(e=hv.newId()),m_("doc","path",e),t instanceof ml){const r=ve.fromString(e,...n);return km(r),new st(t,null,new W(r))}{if(!(t instanceof st||t instanceof Bn))throw new q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return km(r),new st(t.firestore,t instanceof Bn?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Wv(this,"async_queue_retry"),this.Vu=()=>{const r=Su();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Su();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Su();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Un;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ki(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw gn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=id.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Y()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Rm(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class fs extends ml{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Nm,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Nm(e),this._firestoreClient=void 0,await e}}}function IP(t,e){const n=typeof t=="object"?t:kS(),r=typeof t=="string"?t:"(default)",s=SS(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=gE("firestore");i&&EP(s,...i)}return s}function ud(t){if(t._terminated)throw new q(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||PP(t),t._firestoreClient}function PP(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,p){return new nI(l,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p_(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new yP(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ps(Qe.fromBase64String(e))}catch(n){throw new q(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ps(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $e(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=/^__.*__$/;class kP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Yn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xi(e,this.data,n,this.fieldTransforms)}}class g_{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Yn(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function y_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class dd{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new dd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ba(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(y_(this.Cu)&&AP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class CP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||hl(e)}Qu(e,n,r,s=!1){return new dd({Cu:e,methodName:n,qu:r,path:$e.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fd(t){const e=t._freezeSettings(),n=hl(t._databaseId);return new CP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xP(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);md("Data must be an object, but it was:",a,r);const l=v_(r,a);let u,d;if(i.merge)u=new Et(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const p=[];for(const v of i.mergeFields){const y=zc(e,v,n);if(!a.contains(y))throw new q(L.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);w_(p,y)||p.push(y)}u=new Et(p),d=a.fieldTransforms.filter(v=>u.covers(v.field))}else u=null,d=a.fieldTransforms;return new kP(new pt(l),u,d)}class vl extends yl{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vl}}class pd extends yl{_toFieldTransform(e){return new kI(e.path,new Fi)}isEqual(e){return e instanceof pd}}function NP(t,e,n,r){const s=t.Qu(1,e,n);md("Data must be an object, but it was:",s,r);const i=[],a=pt.empty();Er(r,(u,d)=>{const p=gd(e,u,n);d=tn(d);const v=s.Nu(p);if(d instanceof vl)i.push(p);else{const y=to(d,v);y!=null&&(i.push(p),a.set(p,y))}});const l=new Et(i);return new g_(a,l,s.fieldTransforms)}function RP(t,e,n,r,s,i){const a=t.Qu(1,e,n),l=[zc(e,r,n)],u=[s];if(i.length%2!=0)throw new q(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<i.length;y+=2)l.push(zc(e,i[y])),u.push(i[y+1]);const d=[],p=pt.empty();for(let y=l.length-1;y>=0;--y)if(!w_(d,l[y])){const T=l[y];let C=u[y];C=tn(C);const R=a.Nu(T);if(C instanceof vl)d.push(T);else{const b=to(C,R);b!=null&&(d.push(T),p.set(T,b))}}const v=new Et(d);return new g_(p,v,a.fieldTransforms)}function DP(t,e,n,r=!1){return to(n,t.Qu(r?4:3,e))}function to(t,e){if(__(t=tn(t)))return md("Unsupported field value:",e,t),v_(t,e);if(t instanceof yl)return function(r,s){if(!y_(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let u=to(l,s.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=tn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return II(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=be.fromDate(r);return{timestampValue:Ma(s.serializer,i)}}if(r instanceof be){const i=new be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ma(s.serializer,i)}}if(r instanceof cd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ps)return{bytesValue:Mv(s.serializer,r._byteString)};if(r instanceof st){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Xh(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof hd)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return Qh(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${pl(r)}`)}(t,e)}function v_(t,e){const n={};return dv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Er(t,(r,s)=>{const i=to(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function __(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof be||t instanceof cd||t instanceof ps||t instanceof st||t instanceof yl||t instanceof hd)}function md(t,e,n){if(!__(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=pl(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function zc(t,e,n){if((e=tn(e))instanceof gl)return e._internalPath;if(typeof e=="string")return gd(t,e);throw Ba("Field path arguments must be of type string or ",t,!1,void 0,n)}const VP=new RegExp("[~\\*/\\[\\]]");function gd(t,e,n){if(e.search(VP)>=0)throw Ba(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gl(...e.split("."))._internalPath}catch{throw Ba(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ba(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new q(L.INVALID_ARGUMENT,l+t+u)}function w_(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new st(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jP extends T_{data(){return super.data()}}function yd(t,e){return typeof e=="string"?gd(t,e):e instanceof gl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vd{}class LP extends vd{}function OP(t,e,...n){let r=[];e instanceof vd&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof _d).length,l=i.filter(u=>u instanceof _l).length;if(a>1||a>0&&l>0)throw new q(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class _l extends LP{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new _l(e,n,r)}_apply(e){const n=this._parse(e);return E_(e._query,n),new Is(e.firestore,e.converter,Rc(e._query,n))}_parse(e){const n=fd(e.firestore);return function(i,a,l,u,d,p,v){let y;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new q(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Vm(v,p);const T=[];for(const C of v)T.push(Dm(u,i,C));y={arrayValue:{values:T}}}else y=Dm(u,i,v)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Vm(v,p),y=DP(l,a,v,p==="in"||p==="not-in");return De.create(d,p,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function MP(t,e,n){const r=e,s=yd("where",t);return _l._create(s,r,n)}class _d extends vd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new _d(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:$t.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const u of l)E_(a,u),a=Rc(a,u)}(e._query,n),new Is(e.firestore,e.converter,Rc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Dm(t,e,n){if(typeof(n=tn(n))=="string"){if(n==="")throw new q(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tv(e)&&n.indexOf("/")!==-1)throw new q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ve.fromString(n));if(!W.isDocumentKey(r))throw new q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zp(t,new W(r))}if(n instanceof st)return Zp(t,n._key);throw new q(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pl(n)}.`)}function Vm(t,e){if(!Array.isArray(t)||t.length===0)throw new q(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function E_(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class FP{convertValue(e,n="none"){switch(_r(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Er(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Ce(a.doubleValue));return new hd(i)}convertGeoPoint(e){return new cd(Ce(e.latitude),Ce(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=$h(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Li(e));default:return null}}convertTimestamp(e){const n=qn(e);return new be(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);ce($v(r));const s=new Oi(r.get(1),r.get(3)),i=new W(r.popFirst(5));return s.isEqual(n)||gn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class S_ extends T_{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(yd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class sa extends S_{data(e={}){return super.data(e)}}class BP{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ni(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new sa(this._firestore,this._userDataWriter,r.key,r,new ni(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new sa(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ni(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new sa(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ni(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,p=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),p=a.indexOf(l.doc.key)),{type:zP(l.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function zP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(t){t=en(t,st);const e=en(t.firestore,fs);return wP(ud(e),t._key).then(n=>C_(e,t,n))}class I_ extends FP{constructor(e){super(),this.firestore=e}convertBytes(e){return new ps(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,n)}}function P_(t,e,n){t=en(t,st);const r=en(t.firestore,fs),s=UP(t.converter,e);return k_(r,[xP(fd(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Jt.none())])}function A_(t,e,n,...r){t=en(t,st);const s=en(t.firestore,fs),i=fd(s);let a;return a=typeof(e=tn(e))=="string"||e instanceof gl?RP(i,"updateDoc",t._key,e,n,r):NP(i,"updateDoc",t._key,e),k_(s,[a.toMutation(t._key,Jt.exists(!0))])}function HP(t,...e){var n,r,s;t=tn(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Rm(e[a])||(i=e[a],a++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Rm(e[a])){const v=e[a];e[a]=(n=v.next)===null||n===void 0?void 0:n.bind(v),e[a+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[a+2]=(s=v.complete)===null||s===void 0?void 0:s.bind(v)}let u,d,p;if(t instanceof st)d=en(t.firestore,fs),p=il(t._key.path),u={next:v=>{e[a]&&e[a](C_(d,t,v))},error:e[a+1],complete:e[a+2]};else{const v=en(t,Is);d=en(v.firestore,fs),p=v._query;const y=new I_(d);u={next:T=>{e[a]&&e[a](new BP(d,y,v,T))},error:e[a+1],complete:e[a+2]},bP(t._query)}return function(y,T,C,R){const b=new d_(R),S=new r_(T,b,C);return y.asyncQueue.enqueueAndForget(async()=>t_(await Bc(y),S)),()=>{b.Za(),y.asyncQueue.enqueueAndForget(async()=>n_(await Bc(y),S))}}(ud(d),p,l,u)}function k_(t,e){return function(r,s){const i=new Un;return r.asyncQueue.enqueueAndForget(async()=>uP(await _P(r),s,i)),i.promise}(ud(t),e)}function C_(t,e,n){const r=n.docs.get(e._key),s=new I_(t);return new S_(t,s,e._key,r,new ni(n.hasPendingWrites,n.fromCache),e.converter)}function qr(){return new pd("serverTimestamp")}(function(e,n=!0){(function(s){Ts=s})(AS),Va(new Vi("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new fs(new BS(r.getProvider("auth-internal")),new qS(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new q(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oi(d.options.projectId,p)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Jr(Qp,"4.7.3",e),Jr(Qp,"4.7.3","esm2017")})();const Hc={apiKey:"YOUR_API_KEY",authDomain:"YOUR_PROJECT.firebaseapp.com",projectId:"YOUR_PROJECT_ID",storageBucket:"YOUR_PROJECT.appspot.com",messagingSenderId:"YOUR_SENDER_ID",appId:"YOUR_APP_ID"},$P=tv(Hc),Ir=IP($P),Tl="students",wd="classes",qP=async(t,e)=>{const n=`${e}_${t.toLowerCase().replace(/\s+/g,"_")}`,r=Ps(Ir,Tl,n),s=await wl(r);if(s.exists())return await A_(r,{lastLogin:qr()}),{id:n,...s.data()};{const i={name:t,classCode:e,completedChallenges:[],completedScenarios:[],totalPoints:0,createdAt:qr(),lastLogin:qr(),lastActivity:qr()};return await P_(r,i),{id:n,...i}}},GP=async(t,e)=>{const n=Ps(Ir,Tl,t);await A_(n,{completedChallenges:e.completedChallenges||[],completedScenarios:e.completedScenarios||[],totalPoints:e.totalPoints||0,lastActivity:qr()})},WP=async t=>{const e=Ps(Ir,Tl,t),n=await wl(e);return n.exists()?n.data():null},QP=async(t,e)=>{const n=JP(),r=Ps(Ir,wd,n);return await P_(r,{name:t,teacher:e,classCode:n,createdAt:qr(),isActive:!0}),n},KP=async t=>{const e=Ps(Ir,wd,t),n=await wl(e);return n.exists()?n.data():null},YP=async t=>{const e=Ps(Ir,wd,t);return(await wl(e)).exists()},XP=(t,e)=>{const n=OP(SP(Ir,Tl),MP("classCode","==",t));return HP(n,r=>{const s=r.docs.map(i=>{var a,l,u,d;return{id:i.id,...i.data(),lastActivity:((l=(a=i.data().lastActivity)==null?void 0:a.toDate)==null?void 0:l.call(a))||null,lastLogin:((d=(u=i.data().lastLogin)==null?void 0:u.toDate)==null?void 0:d.call(u))||null}});e(s)})},JP=()=>{const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let e="";for(let n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},$c=()=>Hc.apiKey!=="YOUR_API_KEY"&&Hc.projectId!=="YOUR_PROJECT_ID",ZP=({onLogin:t,onTeacherMode:e})=>{const[n,r]=$.useState("student"),[s,i]=$.useState(""),[a,l]=$.useState(""),[u,d]=$.useState(""),[p,v]=$.useState(""),[y,T]=$.useState(""),[C,R]=$.useState(!1),[b,S]=$.useState(""),E=$c(),k=async D=>{if(D.preventDefault(),T(""),!s.trim()){T("Please enter your name");return}if(!a.trim()){T("Please enter the class code");return}R(!0);try{if(!await YP(a.toUpperCase())){T("Invalid class code. Please check with your teacher."),R(!1);return}const g=await qP(s.trim(),a.toUpperCase());t(g)}catch(_){console.error("Login error:",_),T("Unable to join class. Please try again.")}R(!1)},j=async D=>{if(D.preventDefault(),T(""),!p.trim()){T("Please enter your name");return}if(!u.trim()){T("Please enter a class name");return}R(!0);try{const _=await QP(u.trim(),p.trim());S(_)}catch(_){console.error("Create class error:",_),T("Unable to create class. Please try again.")}R(!1)},F=()=>{e(b||a.toUpperCase())};return E?h.jsx("div",{className:"login-container",children:h.jsxs("div",{className:"login-card",children:[h.jsxs("div",{className:"login-header",children:[h.jsx("h1",{children:"CyberEd Range"}),h.jsx("p",{children:"Cybersecurity Training Platform"})]}),h.jsxs("div",{className:"login-tabs",children:[h.jsx("button",{className:`tab-btn ${n==="student"?"active":""}`,onClick:()=>{r("student"),T(""),S("")},children:"Student"}),h.jsx("button",{className:`tab-btn ${n==="teacher"?"active":""}`,onClick:()=>{r("teacher"),T(""),S("")},children:"Teacher"})]}),n==="student"?h.jsxs("form",{onSubmit:k,className:"login-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"studentName",children:"Your Name"}),h.jsx("input",{type:"text",id:"studentName",placeholder:"Enter your name",value:s,onChange:D=>i(D.target.value),disabled:C})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"classCode",children:"Class Code"}),h.jsx("input",{type:"text",id:"classCode",placeholder:"Enter class code (e.g., ABC123)",value:a,onChange:D=>l(D.target.value.toUpperCase()),maxLength:6,disabled:C,className:"code-input"})]}),y&&h.jsx("div",{className:"error-message",children:y}),h.jsx("button",{type:"submit",className:"btn-primary",disabled:C,children:C?"Joining...":"Join Class"})]}):h.jsx(h.Fragment,{children:b?h.jsxs("div",{className:"class-created",children:[h.jsx("div",{className:"success-icon",children:""}),h.jsx("h3",{children:"Class Created!"}),h.jsx("p",{children:"Share this code with your students:"}),h.jsx("div",{className:"class-code-display",children:b}),h.jsx("p",{className:"code-hint",children:"Students will enter this code to join your class"}),h.jsx("button",{className:"btn-primary",onClick:F,children:"Open Teacher Dashboard"})]}):h.jsxs("form",{onSubmit:j,className:"login-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"teacherName",children:"Your Name"}),h.jsx("input",{type:"text",id:"teacherName",placeholder:"Enter your name",value:p,onChange:D=>v(D.target.value),disabled:C})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"className",children:"Class Name"}),h.jsx("input",{type:"text",id:"className",placeholder:"e.g., Period 3 Cybersecurity",value:u,onChange:D=>d(D.target.value),disabled:C})]}),y&&h.jsx("div",{className:"error-message",children:y}),h.jsx("button",{type:"submit",className:"btn-primary",disabled:C,children:C?"Creating...":"Create Class"}),h.jsx("div",{className:"divider",children:h.jsx("span",{children:"or"})}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"existingCode",children:"Enter Existing Class Code"}),h.jsx("input",{type:"text",id:"existingCode",placeholder:"ABC123",value:a,onChange:D=>l(D.target.value.toUpperCase()),maxLength:6,className:"code-input"})]}),h.jsx("button",{type:"button",className:"btn-secondary",onClick:F,disabled:!a.trim(),children:"Open Dashboard for Existing Class"})]})})]})}):h.jsx("div",{className:"login-container",children:h.jsxs("div",{className:"login-card",children:[h.jsxs("div",{className:"login-header",children:[h.jsx("h1",{children:"CyberEd Range"}),h.jsx("p",{children:"Setup Required"})]}),h.jsxs("div",{className:"setup-warning",children:[h.jsx("h3",{children:"Firebase Configuration Needed"}),h.jsx("p",{children:"To enable multi-student mode, please configure Firebase:"}),h.jsxs("ol",{children:[h.jsxs("li",{children:["Create a Firebase project at ",h.jsx("a",{href:"https://console.firebase.google.com",target:"_blank",rel:"noopener noreferrer",children:"console.firebase.google.com"})]}),h.jsx("li",{children:"Enable Firestore Database"}),h.jsxs("li",{children:["Copy your config to ",h.jsx("code",{children:"src/config/firebase.js"})]}),h.jsxs("li",{children:["Or create a ",h.jsx("code",{children:".env"})," file with VITE_FIREBASE_* variables"]})]}),h.jsx("button",{className:"btn-primary",onClick:()=>t({id:"demo",name:"Demo User",classCode:"DEMO"}),children:"Continue in Demo Mode"})]})]})})},eA=({classCode:t,onBack:e})=>{var E,k,j,F;const[n,r]=$.useState([]),[s,i]=$.useState(null),[a,l]=$.useState(!0),[u,d]=$.useState(null),[p,v]=$.useState("points"),y=Object.values(cr).flat().length,T=Ut.length;$.useEffect(()=>{(async()=>{const g=await KP(t);i(g)})();const _=XP(t,g=>{r(g),l(!1)});return()=>_()},[t]);const C=[...n].sort((D,_)=>{var g,w;switch(p){case"points":return _.totalPoints-D.totalPoints;case"name":return D.name.localeCompare(_.name);case"activity":const I=((g=D.lastActivity)==null?void 0:g.getTime())||0;return(((w=_.lastActivity)==null?void 0:w.getTime())||0)-I;default:return 0}}),R=D=>{if(!D)return{status:"never",label:"Never active",color:"#666"};const g=new Date-D,w=Math.floor(g/6e4);if(w<5)return{status:"active",label:"Active now",color:"#4caf50"};if(w<30)return{status:"recent",label:`${w}m ago`,color:"#ff9800"};if(w<60)return{status:"idle",label:`${w}m ago`,color:"#f44336"};const I=Math.floor(w/60);return I<24?{status:"idle",label:`${I}h ago`,color:"#f44336"}:{status:"inactive",label:`${Math.floor(I/24)}d ago`,color:"#666"}},b=(D,_)=>_>0?Math.round(D/_*100):0,S={totalStudents:n.length,activeStudents:n.filter(D=>{const _=R(D.lastActivity);return _.status==="active"||_.status==="recent"}).length,avgPoints:n.length>0?Math.round(n.reduce((D,_)=>D+_.totalPoints,0)/n.length):0,avgChallenges:n.length>0?Math.round(n.reduce((D,_)=>{var g;return D+(((g=_.completedChallenges)==null?void 0:g.length)||0)},0)/n.length):0};return a?h.jsx("div",{className:"teacher-dashboard",children:h.jsxs("div",{className:"loading-screen",children:[h.jsx("div",{className:"loading-spinner"}),h.jsx("p",{children:"Loading class data..."})]})}):h.jsxs("div",{className:"teacher-dashboard",children:[h.jsxs("header",{className:"td-header",children:[h.jsx("button",{className:"back-btn",onClick:e,children:" Exit Dashboard"}),h.jsxs("div",{className:"td-title",children:[h.jsx("h1",{children:(s==null?void 0:s.name)||"Class Dashboard"}),h.jsxs("div",{className:"class-code-badge",children:["Class Code: ",h.jsx("strong",{children:t})]})]})]}),h.jsxs("div",{className:"td-stats",children:[h.jsxs("div",{className:"td-stat-card",children:[h.jsx("span",{className:"td-stat-value",children:S.totalStudents}),h.jsx("span",{className:"td-stat-label",children:"Total Students"})]}),h.jsxs("div",{className:"td-stat-card active",children:[h.jsx("span",{className:"td-stat-value",children:S.activeStudents}),h.jsx("span",{className:"td-stat-label",children:"Currently Active"})]}),h.jsxs("div",{className:"td-stat-card",children:[h.jsx("span",{className:"td-stat-value",children:S.avgPoints}),h.jsx("span",{className:"td-stat-label",children:"Avg Points"})]}),h.jsxs("div",{className:"td-stat-card",children:[h.jsx("span",{className:"td-stat-value",children:S.avgChallenges}),h.jsx("span",{className:"td-stat-label",children:"Avg Challenges Done"})]})]}),h.jsxs("div",{className:"td-controls",children:[h.jsxs("div",{className:"sort-controls",children:[h.jsx("label",{children:"Sort by:"}),h.jsxs("select",{value:p,onChange:D=>v(D.target.value),children:[h.jsx("option",{value:"points",children:"Points (High to Low)"}),h.jsx("option",{value:"name",children:"Name (A-Z)"}),h.jsx("option",{value:"activity",children:"Recent Activity"})]})]}),h.jsx("button",{className:"btn-refresh",onClick:()=>window.location.reload(),children:"Refresh"})]}),h.jsxs("div",{className:"td-content",children:[h.jsxs("div",{className:"student-list-panel",children:[h.jsxs("h2",{children:["Students (",n.length,")"]}),n.length===0?h.jsxs("div",{className:"no-students",children:[h.jsx("p",{children:"No students have joined yet."}),h.jsxs("p",{children:["Share the class code: ",h.jsx("strong",{children:t})]})]}):h.jsx("div",{className:"student-list",children:C.map((D,_)=>{var w,I,A,x;const g=R(D.lastActivity);return b(((w=D.completedChallenges)==null?void 0:w.length)||0,y),b(((I=D.completedScenarios)==null?void 0:I.length)||0,T),h.jsxs("div",{className:`student-card ${(u==null?void 0:u.id)===D.id?"selected":""}`,onClick:()=>d(D),children:[h.jsxs("div",{className:"student-rank",children:["#",_+1]}),h.jsxs("div",{className:"student-info",children:[h.jsx("div",{className:"student-name",children:D.name}),h.jsxs("div",{className:"student-activity",style:{color:g.color},children:[h.jsx("span",{className:`activity-dot ${g.status}`}),g.label]})]}),h.jsxs("div",{className:"student-progress",children:[h.jsxs("div",{className:"progress-item",children:[h.jsx("span",{className:"progress-value",children:D.totalPoints}),h.jsx("span",{className:"progress-label",children:"pts"})]}),h.jsxs("div",{className:"progress-item",children:[h.jsx("span",{className:"progress-value",children:((A=D.completedChallenges)==null?void 0:A.length)||0}),h.jsx("span",{className:"progress-label",children:"challenges"})]}),h.jsxs("div",{className:"progress-item",children:[h.jsx("span",{className:"progress-value",children:((x=D.completedScenarios)==null?void 0:x.length)||0}),h.jsx("span",{className:"progress-label",children:"scenarios"})]})]})]},D.id)})})]}),h.jsx("div",{className:"student-detail-panel",children:u?h.jsxs(h.Fragment,{children:[h.jsx("h2",{children:u.name}),h.jsxs("div",{className:"detail-section",children:[h.jsx("h3",{children:"Overall Progress"}),h.jsx("div",{className:"detail-stats",children:h.jsxs("div",{className:"detail-stat",children:[h.jsx("span",{className:"detail-stat-value",children:u.totalPoints}),h.jsx("span",{className:"detail-stat-label",children:"Total Points"})]})})]}),h.jsxs("div",{className:"detail-section",children:[h.jsxs("h3",{children:["Challenges (",((E=u.completedChallenges)==null?void 0:E.length)||0,"/",y,")"]}),h.jsx("div",{className:"progress-bar-container",children:h.jsx("div",{className:"progress-bar-fill",style:{width:`${b(((k=u.completedChallenges)==null?void 0:k.length)||0,y)}%`}})}),h.jsx("div",{className:"completed-list",children:Object.entries(cr).map(([D,_])=>{const g=_.filter(w=>{var I;return(I=u.completedChallenges)==null?void 0:I.includes(w.id)});return g.length===0?null:h.jsxs("div",{className:"category-progress",children:[h.jsx("h4",{children:D}),h.jsx("ul",{children:g.map(w=>h.jsxs("li",{children:[w.title," (+",w.points,"pts)"]},w.id))})]},D)})})]}),h.jsxs("div",{className:"detail-section",children:[h.jsxs("h3",{children:["Network Monitor (",((j=u.completedScenarios)==null?void 0:j.length)||0,"/",T,")"]}),h.jsx("div",{className:"progress-bar-container",children:h.jsx("div",{className:"progress-bar-fill scenario",style:{width:`${b(((F=u.completedScenarios)==null?void 0:F.length)||0,T)}%`}})}),h.jsx("div",{className:"completed-list",children:h.jsx("ul",{children:Ut.filter(D=>{var _;return(_=u.completedScenarios)==null?void 0:_.includes(D.id)}).map(D=>h.jsxs("li",{children:[D.name," (+",D.points,"pts)"]},D.id))})})]})]}):h.jsx("div",{className:"no-selection",children:h.jsx("p",{children:"Select a student to view details"})})})]})]})};function tA(){const[t,e]=$.useState(null),[n,r]=$.useState(!1),[s,i]=$.useState(null),[a,l]=$.useState("dashboard"),[u,d]=$.useState(null),[p,v]=$.useState(null),[y,T]=$.useState([]),[C,R]=$.useState([]),[b,S]=$.useState(0);$.useEffect(()=>{const X=localStorage.getItem("cyberrange-session");if(X)try{const re=JSON.parse(X);re.user&&(e(re.user),E(re.user))}catch(re){console.error("Error loading session:",re)}},[]);const E=async X=>{if($c()&&X.id!=="demo")try{const re=await WP(X.id);re&&(T(re.completedChallenges||[]),R(re.completedScenarios||[]),S(re.totalPoints||0))}catch(re){console.error("Error loading Firebase progress:",re),k()}else k()},k=()=>{const X=localStorage.getItem("cyberrange-progress");if(X)try{const re=JSON.parse(X);T(re.completed||[]),R(re.completedScenarios||[]),S(re.points||0)}catch(re){console.error("Error loading local progress:",re)}},j=$.useCallback(async(X,re,ot)=>{if(localStorage.setItem("cyberrange-progress",JSON.stringify({completed:X,completedScenarios:re,points:ot})),$c()&&t&&t.id!=="demo")try{await GP(t.id,{completedChallenges:X,completedScenarios:re,totalPoints:ot})}catch(B){console.error("Error saving to Firebase:",B)}},[t]);$.useEffect(()=>{t&&j(y,C,b)},[y,C,b,t,j]);const F=X=>{e(X),r(!1),localStorage.setItem("cyberrange-session",JSON.stringify({user:X})),X.completedChallenges?(T(X.completedChallenges),R(X.completedScenarios||[]),S(X.totalPoints||0)):E(X)},D=X=>{r(!0),i(X)},_=()=>{e(null),r(!1),i(null),T([]),R([]),S(0),l("dashboard"),localStorage.removeItem("cyberrange-session")},g=X=>{d(X),l("challenges")},w=X=>{v(X),l("challenge-detail")},I=(X,re)=>{y.includes(X)||(T([...y,X]),S(b+re))},A=()=>{v(null),l("challenges")},x=()=>{d(null),v(null),l("dashboard")},P=(X,re)=>{C.includes(X)||(R([...C,X]),S(b+re))},Ue=()=>{window.confirm("Are you sure you want to reset all progress? This cannot be undone.")&&(T([]),R([]),S(0),localStorage.removeItem("cyberrange-progress"),l("dashboard"))};return!t&&!n?h.jsx(ZP,{onLogin:F,onTeacherMode:D}):n&&s?h.jsx(eA,{classCode:s,onBack:()=>{r(!1),i(null)}}):h.jsxs("div",{className:"app",children:[h.jsx("header",{className:"header",children:h.jsxs("div",{className:"header-content",children:[h.jsx("div",{className:"logo",children:"CyberEd Range"}),h.jsxs("nav",{className:"nav",children:[h.jsx("button",{className:`nav-btn ${a==="dashboard"?"active":""}`,onClick:x,children:"Dashboard"}),h.jsx("button",{className:`nav-btn ${a==="network-monitor"?"active":""}`,onClick:()=>l("network-monitor"),children:"Network Monitor"}),h.jsx("button",{className:`nav-btn ${a==="vocabulary"?"active":""}`,onClick:()=>l("vocabulary"),children:"Vocabulary"}),h.jsx("button",{className:"nav-btn",onClick:Ue,style:{background:"rgba(244, 67, 54, 0.2)",borderColor:"#f44336"},children:"Reset"}),h.jsxs("div",{className:"user-info",children:[h.jsx("span",{className:"user-name",children:t==null?void 0:t.name}),h.jsx("span",{className:"user-class",children:t==null?void 0:t.classCode}),h.jsx("button",{className:"logout-btn",onClick:_,children:"Logout"})]})]})]})}),h.jsxs("main",{className:"main-content",children:[a==="dashboard"&&h.jsx(UT,{completedChallenges:y,completedScenarios:C,onSelectCategory:g,onSelectNetworkMonitor:()=>l("network-monitor")}),a==="challenges"&&u&&h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"back-btn",onClick:x,children:" Back to Dashboard"}),h.jsx("div",{style:{marginTop:"1rem"},children:h.jsx(BT,{category:u,completedChallenges:y,onSelectChallenge:w})})]}),a==="challenge-detail"&&p&&h.jsx(zT,{challengeId:p,onComplete:I,onBack:A,isCompleted:y.includes(p)}),a==="vocabulary"&&h.jsx(HT,{}),a==="network-monitor"&&h.jsx(oE,{completedScenarios:C,onCompleteScenario:P,onBack:x})]})]})}Pu.createRoot(document.getElementById("root")).render(h.jsx(Ew.StrictMode,{children:h.jsx(tA,{})}));
