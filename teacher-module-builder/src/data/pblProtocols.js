const PROTOCOLS = [
  {
    id: 'backwards-design',
    name: 'Backwards Design Protocol',
    purpose: 'Start with the end product and work backwards to plan milestones',
    duration: '30-45 min',
    phase: 'destination',
    color: '#00d9ff',
    steps: [
      'Define the final product and authentic audience',
      'Identify the cognitive skills students need to demonstrate',
      'Draft essential questions that drive inquiry',
      'Map backwards from the final product to identify 3 milestones',
      'Ensure each milestone builds toward the final product',
    ],
    tips: [
      'The final product should solve a real problem for a real audience',
      'Limit cognitive skills to 3-4 to keep assessment manageable',
      'Essential questions should be open-ended and debatable',
    ],
  },
  {
    id: 'tuning-protocol',
    name: 'Tuning Protocol',
    purpose: 'Get structured feedback on your project design from colleagues',
    duration: '45 min',
    phase: 'destination',
    color: '#00d9ff',
    steps: [
      'Present your project design (10 min)',
      'Clarifying questions from reviewers (5 min)',
      'Warm feedback - what works well (5 min)',
      'Cool feedback - questions and suggestions (10 min)',
      'Reflection and revision planning (10 min)',
    ],
    tips: [
      'Presenter should listen during feedback rounds, not defend',
      'Cool feedback should be phrased as questions, not directives',
      'Focus on alignment between product, skills, and questions',
    ],
  },
  {
    id: 'entry-event-design',
    name: 'Entry Event Design',
    purpose: 'Create an emotionally engaging launch that sparks the need to know',
    duration: '1-2 class periods',
    phase: 'launch',
    color: '#a55eea',
    steps: [
      'Choose an entry event type (guest speaker, video, simulation, etc.)',
      'Design the experience to create emotional engagement',
      'Plan facilitation questions to surface student reactions',
      'Prepare the K/NTK board activity',
      'Connect the entry event to the driving question',
    ],
    tips: [
      'The best entry events create surprise, empathy, or curiosity',
      'Allow plenty of time for student reactions and questions',
      'Have students write individual reflections before group discussion',
    ],
    examples: [
      'Invite a local expert affected by the problem students will solve',
      'Show a short documentary clip that reveals a surprising injustice',
      'Run a brief simulation where students experience the problem firsthand',
      'Present a mysterious artifact and ask students to figure out its significance',
    ],
  },
  {
    id: 'rubric-unpacking',
    name: 'Rubric Unpacking Protocol',
    purpose: 'Help students understand and take ownership of success criteria',
    duration: '1 class period',
    phase: 'launch',
    color: '#a55eea',
    steps: [
      'Distribute the rubric and read through together',
      'Students highlight unfamiliar terms or unclear criteria',
      'In small groups, create or find exemplars for each level',
      'Whole-class discussion to clarify expectations',
      'Students set personal goals based on rubric criteria',
    ],
    tips: [
      'Use student-friendly language in the rubric',
      'Share exemplars of past work at different quality levels',
      'Revisit the rubric before each checkpoint assessment',
    ],
  },
  {
    id: 'kntk-facilitation',
    name: 'K/NTK Board Facilitation',
    purpose: 'Capture and organize what students know and need to learn',
    duration: '20-30 min',
    phase: 'launch',
    color: '#a55eea',
    steps: [
      'Post the driving question prominently',
      'Silent brainstorm: students write what they already know (sticky notes)',
      'Share and cluster Know items on the board',
      'Silent brainstorm: what do we need to find out?',
      'Share and prioritize Need to Know items',
    ],
    tips: [
      'Keep the board visible and update it throughout the project',
      'Move items from NTK to K as students learn',
      'Use NTK items to drive mini-lesson planning',
    ],
  },
  {
    id: 'critique-protocol',
    name: 'Critique Protocol',
    purpose: 'Structured peer feedback on milestone work products',
    duration: '30-40 min',
    phase: 'milestone',
    color: '#ff6b6b',
    steps: [
      'Presenter shares work and identifies feedback focus (3 min)',
      'Reviewers examine work silently (3 min)',
      'Warm feedback round - what is working (5 min)',
      'Cool feedback round - questions and suggestions (7 min)',
      'Presenter reflects on feedback received (3 min)',
    ],
    norms: [
      'Be kind - focus on the work, not the person',
      'Be specific - point to exact elements',
      'Be helpful - offer actionable suggestions',
      'Be honest - respectful honesty serves the work',
    ],
    sentenceStarters: {
      warm: [
        'I notice that you effectively...',
        'This part is strong because...',
        'I can see evidence of [skill] when you...',
      ],
      cool: [
        'I wonder what would happen if you...',
        'Have you considered...',
        'I am curious about your choice to...',
        'This section could be strengthened by...',
      ],
    },
  },
  {
    id: 'checkpoint-reflection',
    name: 'Checkpoint Reflection',
    purpose: 'Students self-assess against the rubric at each milestone',
    duration: '20-30 min',
    phase: 'milestone',
    color: '#ff6b6b',
    steps: [
      'Review the rubric criteria for this checkpoint',
      'Gather evidence from your work for each skill',
      'Rate yourself honestly on each criterion',
      'Identify one strength and one growth area',
      'Set a specific goal for the next milestone',
    ],
    tips: [
      'Compare self-assessment with peer and teacher feedback',
      'Use the same rubric language in reflections',
      'Track growth by comparing across checkpoints',
    ],
  },
  {
    id: 'stand-up-meeting',
    name: 'Team Stand-Up',
    purpose: 'Quick daily check-in for project teams',
    duration: '5-10 min',
    phase: 'milestone',
    color: '#ff6b6b',
    steps: [
      'Each member shares: What did I accomplish?',
      'What am I working on next?',
      'What is blocking me?',
      'Team identifies how to help each other',
    ],
    tips: [
      'Keep it standing to maintain energy and brevity',
      'Use a timer - 1 minute per person max',
      'Teacher circulates and listens for common blockers',
    ],
  },
  {
    id: 'presentation-prep',
    name: 'Presentation Preparation Protocol',
    purpose: 'Help students prepare compelling final presentations',
    duration: '1-2 class periods',
    phase: 'final',
    color: '#fd79a8',
    steps: [
      'Review audience and purpose for the presentation',
      'Draft key messages (3 max) the audience should remember',
      'Structure the presentation: hook, problem, solution, call to action',
      'Practice with peer feedback using the rubric',
      'Revise based on feedback',
    ],
    tips: [
      'Remind students who their audience is and what they care about',
      'Practice with a timer to ensure they stay within time limits',
      'Encourage students to anticipate audience questions',
    ],
  },
  {
    id: 'final-reflection',
    name: 'Final Reflection Protocol',
    purpose: 'Deep reflection on the entire PBL journey',
    duration: '30-45 min',
    phase: 'final',
    color: '#26de81',
    prompts: {
      process: [
        'What was the most challenging part of this project? How did you overcome it?',
        'How did your understanding of the topic change from start to finish?',
        'What would you do differently if you started over?',
      ],
      skills: [
        'Which cognitive skill did you grow in the most? What evidence do you have?',
        'How did working with your team help (or hinder) your learning?',
        'What skill do you want to continue developing?',
      ],
      impact: [
        'How might your work make a difference for your audience?',
        'What surprised you most during this project?',
        'What advice would you give future students doing this project?',
      ],
    },
    tips: [
      'Give students quiet time to write before sharing',
      'Use a talking circle for oral reflections',
      'Celebrate growth, not just final product quality',
    ],
  },
  {
    id: 'celebration-protocol',
    name: 'Celebration & Debrief',
    purpose: 'Honor student work and celebrate the learning journey',
    duration: '1 class period',
    phase: 'final',
    color: '#26de81',
    steps: [
      'Set up exhibition space for final products',
      'Invite authentic audience members',
      'Students present and field questions',
      'Audience provides written feedback',
      'Whole-class celebration and debrief',
    ],
    tips: [
      'Take photos/video to document the event',
      'Have students write thank-you notes to guest audiences',
      'Update the K/NTK board one final time to show learning',
    ],
  },
];

export function getProtocolsByPhase(phase) {
  return PROTOCOLS.filter((p) => p.phase === phase);
}

export function getRecommendedProtocols(context) {
  return PROTOCOLS.filter((p) => p.phase === context);
}
